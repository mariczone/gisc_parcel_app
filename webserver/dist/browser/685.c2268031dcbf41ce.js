"use strict";(self.webpackChunkparcel_app=self.webpackChunkparcel_app||[]).push([[685],{22558:(T,d,i)=>{function v(e){return e&&"getAtOrigin"in e&&"originOf"in e}i.d(d,{l:()=>v})},83602:(T,d,i)=>{i.r(d),i.d(d,{default:()=>$});var v=i(15861),e=i(17626),P=i(85840),n=i(62208);function x(t,r){return m(t)===m(r)}function m(t){if((0,n.Wi)(t))return null;let l=null;return l=null!=t.objectId?t.objectId:null!=t.layer&&"objectIdField"in t.layer&&null!=t.layer.objectIdField&&null!=t.attributes?t.attributes[t.layer.objectIdField]:t.uid,null==l?null:`o-${null!=t.layer?t.layer.id:""}-${l}`}const L={json:{write:{writer:function B(t,r){(0,n.Wi)(t)||null==t.layer?.objectIdField||null==t.attributes||(r.feature={layerId:t.layer.id,objectId:t.attributes[t.layer.objectIdField]})},target:{"feature.layerId":{type:[Number,String]},"feature.objectId":{type:[Number,String]}}},origins:{"web-scene":{read:function N(t){if(null!=t.layerId&&null!=t.objectId)return{uid:null,layer:{id:t.layerId,objectIdField:"ObjectId"},attributes:{ObjectId:t.objectId}}}}}}};var w=i(14517),S=i(79608),W=i(86810),s=i(77712),h=(i(90912),i(85931),i(76898)),f=i(128),Z=i(72642),A=i(82706);let p=class extends((0,W.eC)((0,S.J)(w.Z))){constructor(t){super(t),this.position=null,this.elevationInfo=null,this.feature=null}equals(t){return(0,n._W)(this.position,t.position)&&(0,n._W)(this.elevationInfo,t.elevationInfo)&&x(this.feature,t.feature)}};(0,e._)([(0,s.Cb)({type:Z.Z}),(0,f.B)()],p.prototype,"position",void 0),(0,e._)([(0,s.Cb)({type:A.Z}),(0,f.B)()],p.prototype,"elevationInfo",void 0),(0,e._)([(0,s.Cb)(L)],p.prototype,"feature",void 0),p=(0,e._)([(0,h.j)("esri.analysis.LineOfSightAnalysisObserver")],p);const E=p;let y=class extends((0,W.eC)(S.j)){constructor(t){super(t),this.position=null,this.elevationInfo=null,this.feature=null}equals(t){return(0,n._W)(this.position,t.position)&&(0,n._W)(this.elevationInfo,t.elevationInfo)&&x(this.feature,t.feature)}};(0,e._)([(0,s.Cb)({type:Z.Z}),(0,f.B)()],y.prototype,"position",void 0),(0,e._)([(0,s.Cb)({type:A.Z}),(0,f.B)()],y.prototype,"elevationInfo",void 0),(0,e._)([(0,s.Cb)(L)],y.prototype,"feature",void 0),y=(0,e._)([(0,h.j)("esri.analysis.LineOfSightAnalysisTarget")],y);const R=y;var b=i(74333),C=i(89726),g=i(32917),H=i(55915),j=i(5548),U=i(60507);const I=b.Z.ofType(R);let a=class extends P.Z{constructor(t){super(t),this.type="line-of-sight",this.observer=null,this.extent=null}initialize(){this.addHandles((0,g.YP)(()=>this._computeExtent(),t=>{((0,n.Wi)(t)||(0,n.Wi)(t.pending))&&this._set("extent",(0,n.pC)(t)?t.extent:null)},g.tX))}get targets(){return this._get("targets")||new I}set targets(t){this._set("targets",(0,C.Z)(t,this.targets,I))}get spatialReference(){return(0,n.pC)(this.observer)&&(0,n.pC)(this.observer.position)?this.observer.position.spatialReference:null}get requiredPropertiesForEditing(){return[(0,n.yw)(this.observer,t=>t.position)]}waitComputeExtent(){var t=this;return(0,v.Z)(function*(){const r=t._computeExtent();return(0,n.pC)(r)?(0,n.Wg)(r.pending):Promise.resolve()})()}_computeExtent(){const t=this.spatialReference;if((0,n.Wi)(this.observer)||(0,n.Wi)(this.observer.position)||(0,n.Wi)(t))return null;const r=u=>"absolute-height"===(0,U.VW)(u.position,u.elevationInfo),l=this.observer.position,F=(0,j.al)(l.x,l.y,l.z,l.x,l.y,l.z);for(const u of this.targets)if((0,n.pC)(u.position)){const c=(0,H.dz)(u.position,t);if((0,n.pC)(c.pending))return{pending:c.pending,extent:null};if((0,n.pC)(c.geometry)){const{x:G,y:V,z:D}=c.geometry;(0,j.pp)(F,[G,V,D])}}const O=(0,j.HH)(F,t);return r(this.observer)&&this.targets.every(r)||(O.zmin=void 0,O.zmax=void 0),{pending:null,extent:O}}clear(){this.observer=null,this.targets.removeAll()}};(0,e._)([(0,s.Cb)({type:["line-of-sight"]})],a.prototype,"type",void 0),(0,e._)([(0,s.Cb)({type:E,json:{read:!0,write:!0}})],a.prototype,"observer",void 0),(0,e._)([(0,s.Cb)({cast:C.R,type:I,nonNullable:!0,json:{read:!0,write:!0}})],a.prototype,"targets",null),(0,e._)([(0,s.Cb)({value:null,readOnly:!0})],a.prototype,"extent",void 0),(0,e._)([(0,s.Cb)({readOnly:!0})],a.prototype,"spatialReference",null),(0,e._)([(0,s.Cb)({readOnly:!0})],a.prototype,"requiredPropertiesForEditing",null),a=(0,e._)([(0,h.j)("esri.analysis.LineOfSightAnalysis")],a);const z=a;var J=i(99959),M=i(44917),X=i(49286);const Y=b.Z.ofType(R);let o=class extends((0,X.q)((0,J.R)(M.Z))){constructor(t){super(t),this.type="line-of-sight",this.operationalLayerType="LineOfSightLayer",this.analysis=new z,this.opacity=1}initialize(){this.addHandles((0,g.YP)(()=>this.analysis,(t,r)=>{(0,n.pC)(r)&&r.parent===this&&(r.parent=null),(0,n.pC)(t)&&(t.parent=this)},g.tX))}load(){var t=this;return(0,v.Z)(function*(){return(0,n.pC)(t.analysis)&&t.addResolvingPromise(t.analysis.waitComputeExtent()),t})()}get observer(){return(0,n.yw)(this.analysis,t=>t.observer)}set observer(t){(0,n.yw)(this.analysis,r=>r.observer=t)}get targets(){return(0,n.pC)(this.analysis)?this.analysis.targets:new b.Z}set targets(t){(0,C.Z)(t,this.analysis?.targets)}get fullExtent(){return(0,n.pC)(this.analysis)?this.analysis.extent:null}get spatialReference(){return(0,n.pC)(this.analysis)?(0,n.Wg)(this.analysis.spatialReference):null}releaseAnalysis(t){this.analysis===t&&(this.analysis=new z)}};(0,e._)([(0,s.Cb)({json:{read:!1},readOnly:!0})],o.prototype,"type",void 0),(0,e._)([(0,s.Cb)({type:["LineOfSightLayer"]})],o.prototype,"operationalLayerType",void 0),(0,e._)([(0,s.Cb)({type:E,json:{read:!0,write:{ignoreOrigin:!0}}})],o.prototype,"observer",null),(0,e._)([(0,s.Cb)({type:Y,json:{read:!0,write:{ignoreOrigin:!0}}})],o.prototype,"targets",null),(0,e._)([(0,s.Cb)({nonNullable:!0,json:{read:!1,write:!1}})],o.prototype,"analysis",void 0),(0,e._)([(0,s.Cb)({readOnly:!0})],o.prototype,"fullExtent",null),(0,e._)([(0,s.Cb)({readOnly:!0})],o.prototype,"spatialReference",null),(0,e._)([(0,s.Cb)({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],o.prototype,"opacity",void 0),(0,e._)([(0,s.Cb)({type:["show","hide"]})],o.prototype,"listMode",void 0),o=(0,e._)([(0,h.j)("esri.layers.LineOfSightLayer")],o);const $=o}}]);
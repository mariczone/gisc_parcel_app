"use strict";(self.webpackChunkparcel_app=self.webpackChunkparcel_app||[]).push([[7430],{10992:(F,U,g)=>{g.d(U,{AR:()=>C,Gr:()=>M,JG:()=>K,Jk:()=>A,KU:()=>o,Ue:()=>O,al:()=>B,ct:()=>a,nF:()=>D,zk:()=>V});var j=g(21286),x=g(97535),f=g(84161),l=g(28093),y=g(26242);function O(e){return e?{origin:(0,l.a)(e.origin),vector:(0,l.a)(e.vector)}:{origin:(0,l.c)(),vector:(0,l.c)()}}function K(e,d=O()){return B(e.origin,e.vector,d)}function B(e,d,t=O()){return(0,f.c)(t.origin,e),(0,f.c)(t.vector,d),t}function V(e,d,t=O()){return(0,f.c)(t.origin,e),(0,f.b)(t.vector,d,e),t}function A(e,d){const t=(0,f.b)(y.WM.get(),d,e.origin),r=(0,f.e)(e.vector,t),i=(0,f.e)(e.vector,e.vector),s=(0,j.uZ)(r/i,0,1),u=(0,f.b)(y.WM.get(),(0,f.g)(y.WM.get(),e.vector,s),t);return(0,f.e)(u,u)}function D(e,d,t){return a(e,d,0,1,t)}function o(e,d,t){return(0,f.a)(t,e.origin,(0,f.g)(t,e.vector,d))}function a(e,d,t,r,i){const{vector:s,origin:u}=e,m=(0,f.b)(y.WM.get(),d,u),P=(0,f.e)(s,m)/(0,f.p)(s);return(0,f.g)(i,s,(0,j.uZ)(P,t,r)),(0,f.a)(i,i,e.origin)}function M(e,d){if(W(e,function R(e,d){const t=b.get();return t.origin=e,t.vector=d,t}(d.origin,d.direction),!1,p)){const{tA:t,pB:r,distance2:i}=p;if(t>=0&&t<=1)return i;if(t<0)return(0,f.d)(e.origin,r);if(t>1)return(0,f.d)((0,f.a)(y.WM.get(),e.origin,e.vector),r)}return null}function C(e,d,t){return!!W(e,d,!0,p)&&((0,f.c)(t,p.pA),!0)}function W(e,d,t,r){const s=e.origin,u=(0,f.a)(y.WM.get(),s,e.vector),m=d.origin,P=(0,f.a)(y.WM.get(),m,d.vector),E=y.WM.get(),c=y.WM.get();if(E[0]=s[0]-m[0],E[1]=s[1]-m[1],E[2]=s[2]-m[2],c[0]=P[0]-m[0],c[1]=P[1]-m[1],c[2]=P[2]-m[2],Math.abs(c[0])<1e-6&&Math.abs(c[1])<1e-6&&Math.abs(c[2])<1e-6)return!1;const v=y.WM.get();if(v[0]=u[0]-s[0],v[1]=u[1]-s[1],v[2]=u[2]-s[2],Math.abs(v[0])<1e-6&&Math.abs(v[1])<1e-6&&Math.abs(v[2])<1e-6)return!1;const Z=E[0]*c[0]+E[1]*c[1]+E[2]*c[2],G=c[0]*v[0]+c[1]*v[1]+c[2]*v[2],$=E[0]*v[0]+E[1]*v[1]+E[2]*v[2],z=c[0]*c[0]+c[1]*c[1]+c[2]*c[2],N=(v[0]*v[0]+v[1]*v[1]+v[2]*v[2])*z-G*G;if(Math.abs(N)<1e-6)return!1;let T=(Z*G-$*z)/N,_=(Z+G*T)/z;t&&(T=(0,j.uZ)(T,0,1),_=(0,j.uZ)(_,0,1));const S=y.WM.get(),I=y.WM.get();return S[0]=s[0]+T*v[0],S[1]=s[1]+T*v[1],S[2]=s[2]+T*v[2],I[0]=m[0]+_*c[0],I[1]=m[1]+_*c[1],I[2]=m[2]+_*c[2],r.tA=T,r.tB=_,r.pA=S,r.pB=I,r.distance2=(0,f.d)(S,I),!0}const p={tA:0,tB:0,pA:(0,l.c)(),pB:(0,l.c)(),distance2:0},b=new x.x(()=>O())},2282:(F,U,g)=>{g.d(U,{E6:()=>A,T:()=>R,ep:()=>B,hu:()=>O,kG:()=>D,u_:()=>L,yK:()=>K});var j=g(99770);g(993),(0,g(4794).c)();class y{constructor(a){this.message=a}toString(){return`AssertException: ${this.message}`}}function O(o,a){if(!o){a=a||"Assertion";const M=new Error(a).stack;throw new y(`${a} at ${M}`)}}function R(o,a){o||(a=a||"",console.warn("Verify failed: "+a+"\n"+new Error("verify").stack))}function K(o,a,M,C){let h,W=(M[0]-o[0])/a[0],p=(C[0]-o[0])/a[0];W>p&&(h=W,W=p,p=h);let b=(M[1]-o[1])/a[1],e=(C[1]-o[1])/a[1];if(b>e&&(h=b,b=e,e=h),W>e||b>p)return!1;b>W&&(W=b),e<p&&(p=e);let d=(M[2]-o[2])/a[2],t=(C[2]-o[2])/a[2];return d>t&&(h=d,d=t,t=h),!(W>t||d>p||(t<p&&(p=t),p<0))}function B(o,a,M,C,h,W=(0,j.a)()){const p=(C[h]-M[h])*(a[0]-o[0])-(C[0]-M[0])*(a[h]-o[h]);if(0===p)return!1;const e=((C[0]-M[0])*(o[h]-M[h])-(C[h]-M[h])*(o[0]-M[0]))/p;return W[0]=o[0]+e*(a[0]-o[0]),W[1]=o[h]+e*(a[h]-o[h]),!0}function A(o,a){return Math.log(o)/Math.log(a)}function L(o,a,M,C){o[12]=a,o[13]=M,o[14]=C}function D(o){return 1===o[0]&&0===o[1]&&0===o[2]&&0===o[3]&&0===o[4]&&1===o[5]&&0===o[6]&&0===o[7]&&0===o[8]&&0===o[9]&&1===o[10]&&0===o[11]&&1===o[15]}},21269:(F,U,g)=>{g.r(U),g.d(U,{default:()=>b});var j=g(15861),x=g(17626),f=g(62208),l=g(10699),V=(g(63290),g(90912),g(85931),g(26584),g(8314),g(76898)),A=g(84161),L=g(28093),D=g(10992),o=g(97126),a=g(83308),M=g(82274),C=g(91573);function W(t,r,i){const s=(0,o.c)(),u=(0,o.g)(s);return(0,A.z)(u,u,t,.5),(0,A.z)(u,u,r,.5),s[3]=(0,A.i)(u,t),(0,A.a)(u,u,i),s}let p=class{constructor(){this._idToComponent=new Map,this._components=new M.Z(t=>t.bounds),this._edges=new M.Z(t=>t.bounds),this._tmpLineSegment=(0,D.Ue)(),this._tmpP1=(0,L.c)(),this._tmpP2=(0,L.c)(),this._tmpP3=(0,L.c)(),this.remoteClient=null}fetchCandidates(t,r){var i=this;return(0,j.Z)(function*(){yield Promise.resolve(),(0,l.k_)(r),yield i._ensureEdgeLocations(t,r);const s=[];return i._edges.forEachNeighbor(u=>(i._addCandidates(t,u,s),s.length<1e3),t.bounds),{result:{candidates:s}}})()}_ensureEdgeLocations(t,r){var i=this;return(0,j.Z)(function*(){const s=[];if(i._components.forEachNeighbor(P=>{if((0,f.Wi)(P.info)){const{id:E,uid:c}=P;s.push({id:E,uid:c})}return!0},t.bounds),!s.length)return;const u={components:s},m=yield i.remoteClient.invoke("fetchAllEdgeLocations",u,(0,f.Pt)(r,{}));for(const P of m.components)i._setFetchEdgeLocations(P)})()}add(t){var r=this;return(0,j.Z)(function*(){const i=new e(t.id,t.bounds);return r._idToComponent.set(i.id,i),r._components.add([i]),{result:{}}})()}remove(t){var r=this;return(0,j.Z)(function*(){const i=r._idToComponent.get(t.id);if(i){const s=[];r._edges.forEachNeighbor(u=>(u.component===i&&s.push(u),!0),i.bounds),r._edges.remove(s),r._components.remove([i]),r._idToComponent.delete(i.id)}return{result:{}}})()}_setFetchEdgeLocations(t){const r=this._idToComponent.get(t.id);if((0,f.Wi)(r)||t.uid!==r.uid)return;const i=C.n_.createView(t.locations),s=new Array(i.count),u=(0,L.c)(),m=(0,L.c)();for(let c=0;c<i.count;c++){i.position0.getVec(c,u),i.position1.getVec(c,m);const v=W(u,m,t.origin),Z=new d(r,c,v);s[c]=Z}this._edges.add(s);const{objectIds:P,origin:E}=t;r.info={locations:i,objectIds:P,origin:E}}_addCandidates(t,r,i){const{info:s}=r.component,{origin:u,objectIds:m}=s,P=s.locations,E=P.position0.getVec(r.index,this._tmpP1),c=P.position1.getVec(r.index,this._tmpP2);(0,A.a)(E,E,u),(0,A.a)(c,c,u);const v=m[P.componentIndex.get(r.index)];this._addEdgeCandidate(t,v,E,c,i),this._addVertexCandidate(t,v,E,i),this._addVertexCandidate(t,v,c,i)}_addEdgeCandidate(t,r,i,s,u){if(!(t.types&a.r.EDGE))return;const m=(0,o.g)(t.bounds),P=(0,D.zk)(i,s,this._tmpLineSegment),E=(0,D.nF)(P,m,this._tmpP3);(0,o.m)(t.bounds,E)&&u.push({type:"edge",objectId:r,target:(0,L.a)(E),distance:(0,A.i)(m,E),start:(0,L.a)(i),end:(0,L.a)(s)})}_addVertexCandidate(t,r,i,s){if(!(t.types&a.r.VERTEX))return;const u=(0,o.g)(t.bounds);(0,o.m)(t.bounds,i)&&s.push({type:"vertex",objectId:r,target:(0,L.a)(i),distance:(0,A.i)(u,i)})}};p=(0,x._)([(0,V.j)("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker")],p);const b=p;let e=(()=>{class t{constructor(i,s){this.id=i,this.bounds=s,this.info=null,this.uid=++t.uid}}return t.uid=0,t})();class d{constructor(r,i,s){this.component=r,this.index=i,this.bounds=s}}}}]);
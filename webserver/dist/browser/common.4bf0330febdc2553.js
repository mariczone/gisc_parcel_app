"use strict";(self.webpackChunkparcel_app=self.webpackChunkparcel_app||[]).push([[8592],{85840:(H,W,e)=>{e.d(W,{Z:()=>m});var s=e(17626),E=e(14517),S=e(79608),g=e(61996),j=e(86810),I=e(62208),C=e(77712),x=(e(90912),e(85931),e(76898));let p=0,h=class extends((0,j.eC)((0,S.J)((0,g.IG)(E.Z)))){constructor(A){super(A),this.id=`${Date.now().toString(16)}-analysis-${p++}`,this.title=null}get parent(){return this._get("parent")}set parent(A){const v=this.parent;if((0,I.pC)(v))switch(v.type){case"line-of-sight":case"dimension":v.releaseAnalysis(this);break;case"2d":case"3d":v.analyses.includes(this)&&v.analyses.remove(this)}this._set("parent",A)}get isEditable(){return this.requiredPropertiesForEditing.every(I.pC)}};(0,s._)([(0,C.Cb)({type:String,constructOnly:!0,clonable:!1})],h.prototype,"id",void 0),(0,s._)([(0,C.Cb)({type:String})],h.prototype,"title",void 0),(0,s._)([(0,C.Cb)({constructOnly:!0})],h.prototype,"type",void 0),(0,s._)([(0,C.Cb)({clonable:!1,value:null})],h.prototype,"parent",null),(0,s._)([(0,C.Cb)({readOnly:!0})],h.prototype,"isEditable",null),(0,s._)([(0,C.Cb)({readOnly:!0})],h.prototype,"requiredPropertiesForEditing",void 0),h=(0,s._)([(0,x.j)("esri.analysis.Analysis")],h);const m=h},57577:(H,W,e)=>{function s(E){throw new Error('Could not dynamically require "'+E+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}e.d(W,{c:()=>s})},7006:(H,W,e)=>{e.d(W,{A:()=>L,B:()=>R,C:()=>K,D:()=>o,E:()=>b,F:()=>l,G:()=>y,H:()=>T,I:()=>w,J:()=>F,K:()=>N,L:()=>V,M:()=>$,N:()=>J,a:()=>j,b:()=>I,c:()=>g,d:()=>C,e:()=>S,f:()=>B,g:()=>Y,h:()=>O,i:()=>x,j:()=>m,k:()=>c,l:()=>i,m:()=>n,n:()=>a,o:()=>A,p:()=>_,q:()=>P,r:()=>v,s:()=>f,t:()=>p,u:()=>d,v:()=>M,w:()=>h,x:()=>U,y:()=>u,z:()=>D});var s=e(4918),E=e(15994);function S(G){return s.G.extendedSpatialReferenceInfo(G)}function g(G,Z,z){return s.G.clip(E.N,G,Z,z)}function j(G,Z,z){return s.G.cut(E.N,G,Z,z)}function I(G,Z,z){return s.G.contains(E.N,G,Z,z)}function C(G,Z,z){return s.G.crosses(E.N,G,Z,z)}function B(G,Z,z,k){return s.G.distance(E.N,G,Z,z,k)}function O(G,Z,z){return s.G.equals(E.N,G,Z,z)}function x(G,Z,z){return s.G.intersects(E.N,G,Z,z)}function p(G,Z,z){return s.G.touches(E.N,G,Z,z)}function h(G,Z,z){return s.G.within(E.N,G,Z,z)}function m(G,Z,z){return s.G.disjoint(E.N,G,Z,z)}function A(G,Z,z){return s.G.overlaps(E.N,G,Z,z)}function v(G,Z,z,k){return s.G.relate(E.N,G,Z,z,k)}function c(G,Z){return s.G.isSimple(E.N,G,Z)}function f(G,Z){return s.G.simplify(E.N,G,Z)}function i(G,Z,z=!1){return s.G.convexHull(E.N,G,Z,z)}function n(G,Z,z){return s.G.difference(E.N,G,Z,z)}function a(G,Z,z){return s.G.symmetricDifference(E.N,G,Z,z)}function _(G,Z,z){return s.G.intersect(E.N,G,Z,z)}function d(G,Z,z=null){return s.G.union(E.N,G,Z,z)}function P(G,Z,z,k,X,Q,q){return s.G.offset(E.N,G,Z,z,k,X,Q,q)}function M(G,Z,z,k,X=!1){return s.G.buffer(E.N,G,Z,z,k,X)}function U(G,Z,z,k,X,Q,q){return s.G.geodesicBuffer(E.N,G,Z,z,k,X,Q,q)}function u(G,Z,z,k=!0){return s.G.nearestCoordinate(E.N,G,Z,z,k)}function D(G,Z,z){return s.G.nearestVertex(E.N,G,Z,z)}function L(G,Z,z,k,X){return s.G.nearestVertices(E.N,G,Z,z,k,X)}function R(G,Z,z,k){if(null==Z||null==k)throw new Error("Illegal Argument Exception");const X=s.G.rotate(Z,z,k);return X.spatialReference=G,X}function K(G,Z,z){if(null==Z||null==z)throw new Error("Illegal Argument Exception");const k=s.G.flipHorizontal(Z,z);return k.spatialReference=G,k}function o(G,Z,z){if(null==Z||null==z)throw new Error("Illegal Argument Exception");const k=s.G.flipVertical(Z,z);return k.spatialReference=G,k}function b(G,Z,z,k,X){return s.G.generalize(E.N,G,Z,z,k,X)}function l(G,Z,z,k){return s.G.densify(E.N,G,Z,z,k)}function y(G,Z,z,k,X=0){return s.G.geodesicDensify(E.N,G,Z,z,k,X)}function T(G,Z,z){return s.G.planarArea(E.N,G,Z,z)}function w(G,Z,z){return s.G.planarLength(E.N,G,Z,z)}function F(G,Z,z,k){return s.G.geodesicArea(E.N,G,Z,z,k)}function N(G,Z,z,k){return s.G.geodesicLength(E.N,G,Z,z,k)}function V(G,Z,z){return null==Z||null==z?[]:s.G.intersectLinesToPoints(E.N,G,Z,z)}function $(G,Z){s.G.changeDefaultSpatialReferenceTolerance(G,Z)}function J(G){s.G.clearDefaultSpatialReferenceTolerance(G)}const Y=Object.freeze(Object.defineProperty({__proto__:null,buffer:M,changeDefaultSpatialReferenceTolerance:$,clearDefaultSpatialReferenceTolerance:J,clip:g,contains:I,convexHull:i,crosses:C,cut:j,densify:l,difference:n,disjoint:m,distance:B,equals:O,extendedSpatialReferenceInfo:S,flipHorizontal:K,flipVertical:o,generalize:b,geodesicArea:F,geodesicBuffer:U,geodesicDensify:y,geodesicLength:N,intersect:_,intersectLinesToPoints:V,intersects:x,isSimple:c,nearestCoordinate:u,nearestVertex:D,nearestVertices:L,offset:P,overlaps:A,planarArea:T,planarLength:w,relate:v,rotate:R,simplify:f,symmetricDifference:a,touches:p,union:d,within:h},Symbol.toStringTag,{value:"Module"}))},128:(H,W,e)=>{e.d(W,{B:()=>x});var s=e(15861),E=e(22558),S=e(21726),g=e(35948),j=e(34117),I=e(31283),C=e(77712),B=e(61556),O=e(29840);function x(d){const P=d?.origins??[void 0];return(M,U)=>{const u=function p(d,P,M){if("resource"===d?.type)return function h(d,P,M){const U=(0,j.Oe)(P,M);return{type:String,read:(u,D,L)=>{const R=(0,O.r)(u,D,L);return U.type===String?R:"function"==typeof U.type?new U.type({url:R}):void 0},write:{writer(u,D,L,R){if(!R||!R.resources)return"string"==typeof u?void(D[L]=(0,O.t)(u,R)):void(D[L]=u.write({},R));const K=function a(d){return null==d?null:"string"==typeof d?d:d.url}(u),o=(0,O.t)(K,{...R,verifyItemRelativeUrls:R&&R.verifyItemRelativeUrls?{writtenUrls:R.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},O.M.NO),b=U.type!==String&&(!(0,E.l)(this)||R&&R.origin&&this.originIdOf(M)>(0,I.M9)(R.origin)),l={object:this,propertyName:M,value:u,targetUrl:o,dest:D,targetPropertyName:L,context:R,params:d};R&&R.portalItem&&o&&!(0,S.YP)(o)?b?function A(d){const{context:P,targetUrl:M,params:U,value:u,dest:D,targetPropertyName:L}=d;if(!P.portalItem)return;const R=P.portalItem.resourceFromPath(M),K=f(u,M,P),o=(0,B.B)(K),b=(0,S.Ml)(R.path),l=U?.compress??!1;o===b?(P.resources&&c({...d,resource:R,content:K,compress:l,updates:P.resources.toUpdate}),D[L]=M):m(d)}(l):function v({context:d,targetUrl:P,dest:M,targetPropertyName:U}){d.portalItem&&d.resources&&(d.resources.toKeep.push({resource:d.portalItem.resourceFromPath(P),compress:!1}),M[U]=P)}(l):R&&R.portalItem&&(null==o||null!=(0,O.i)(o)||(0,S.jc)(o)||b)?m(l):D[L]=o}}}}(d,P,M);switch(d?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:U,write:u}=O.a;return{read:U,write:u}}}}(d,M,U);for(const D of P){const L=(0,C.CJ)(M,D,U);for(const R in u)L[R]=u[R]}}}function m(d){const{targetUrl:P,params:M,value:U,context:u,dest:D,targetPropertyName:L}=d;if(!u.portalItem)return;const R=(0,O.p)(P),K=R?.filename??(0,g.D)(),o=M?.prefix??R?.prefix,b=f(U,P,u),l=(0,S.v_)(o,K),y=`${l}.${(0,B.B)(b)}`,T=u.portalItem.resourceFromPath(y);(0,S.jc)(P)&&u.resources&&u.resources.pendingOperations.push(function i(d){return n.apply(this,arguments)}(P).then(F=>{T.path=`${l}.${(0,B.B)(F)}`,D[L]=T.itemRelativeUrl}).catch(()=>{}));const w=M?.compress??!1;u.resources&&c({...d,resource:T,content:b,compress:w,updates:u.resources.toAdd}),D[L]=T.itemRelativeUrl}function c({object:d,propertyName:P,updates:M,resource:U,content:u,compress:D}){M.push({resource:U,content:u,compress:D,finish:L=>{!function _(d,P,M){"string"==typeof d[P]?d[P]=M.url:d[P].url=M.url}(d,P,L)}})}function f(d,P,M){return"string"==typeof d?{url:P}:new Blob([JSON.stringify(d.toJSON(M))],{type:"application/json"})}function n(){return(n=(0,s.Z)(function*(d){const P=(yield Promise.resolve().then(e.bind(e,84792))).default,{data:M}=yield P(d,{responseType:"blob"});return M})).apply(this,arguments)}},75327:(H,W,e)=>{e.d(W,{Qc:()=>p,WU:()=>j,lt:()=>x});var s=e(77275),E=e(56683);const S={ar:[".",","],bg:[",","\xa0"],bs:[",","."],ca:[",","."],cs:[",","\xa0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xa0"],fi:[",","\xa0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xa0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xa0"],lv:[",","\xa0"],mk:[",","."],nb:[",","\xa0"],nl:[",","."],pl:[",","\xa0"],pt:[",","."],"pt-pt":[",","\xa0"],ro:[",","."],ru:[",","\xa0"],sk:[",","\xa0"],sl:[",","."],sr:[",","."],sv:[",","\xa0"],th:[".",","],tr:[",","."],uk:[",","\xa0"],vi:[",","."],zh:[".",","]};function g(c=(0,E.Kd)()){let f=(c=c.toLowerCase())in S;if(!f){const _=c.split("-");_.length>1&&_[0]in S&&(c=_[0],f=!0),f||(c="en")}const[i,n,a="#,##0.###"]=S[c];return{decimal:i,group:n,pattern:a}}function j(c,f){const i=g((f={...f}).locale);f.customs=i;const n=f.pattern||i.pattern;return isNaN(c)||Math.abs(c)===1/0?null:function C(c,f,i){const n=(i=i||{}).customs.group,a=i.customs.decimal,_=f.split(";"),d=_[0];if((f=_[c<0?1:0]||"-"+d).includes("%"))c*=100;else if(f.includes("\u2030"))c*=1e3;else{if(f.includes("\xa4"))throw new Error("currency notation not supported");if(f.includes("E"))throw new Error("exponential notation not supported")}const P=I,M=d.match(P);if(!M)throw new Error("unable to find a number expression in pattern: "+f);return!1===i.fractional&&(i.places=0),f.replace(P,function B(c,f,i){!0===(i=i||{}).places&&(i.places=0),i.places===1/0&&(i.places=6);const n=f.split("."),a="string"==typeof i.places&&i.places.indexOf(",");let _=i.places;a?_=i.places.substring(a+1):_>=0||(_=(n[1]||[]).length),i.round<0||(c=Number(c.toFixed(Number(_))));const d=String(Math.abs(c)).split("."),P=d[1]||"";if(n[1]||i.places){a&&(i.places=i.places.substring(0,a));const K=void 0!==i.places?i.places:n[1]&&n[1].lastIndexOf("0")+1;K>P.length&&(d[1]=P.padEnd(Number(K),"0")),_<P.length&&(d[1]=P.substr(0,Number(_)))}else d[1]&&d.pop();const M=n[0].replace(",","");let U=M.indexOf("0");-1!==U&&(U=M.length-U,U>d[0].length&&(d[0]=d[0].padStart(U,"0")),M.includes("#")||(d[0]=d[0].substr(d[0].length-U)));let u,D,L=n[0].lastIndexOf(",");if(-1!==L){u=n[0].length-L-1;const K=n[0].substr(0,L);L=K.lastIndexOf(","),-1!==L&&(D=K.length-L-1)}const R=[];for(let K=d[0];K;){const o=K.length-u;R.push(o>0?K.substr(o):K),K=o>0?K.slice(0,o):"",D&&(u=D,D=void 0)}return d[0]=R.reverse().join(i.group||","),d.join(i.decimal||".")}(c,M[0],{decimal:a,group:n,places:i.places,round:i.round}))}(c,n,f)}const I=/[#0,]*[#0](?:\.0*#*)?/;function x(c){const f=g((c=c||{}).locale),i=c.pattern||f.pattern,n=f.group,a=f.decimal;let _=1;if(i.includes("%"))_/=100;else if(i.includes("\u2030"))_/=1e3;else if(i.includes("\xa4"))throw new Error("currency notation not supported");const d=i.split(";");return 1===d.length&&d.push("-"+d[0]),{regexp:A(d,M=>(M="(?:"+(0,s.Qs)(M,".")+")").replace(I,U=>{const u={signed:!1,separator:c.strict?n:[n,""],fractional:c.fractional,decimal:a,exponent:!1},D=U.split(".");let L=c.places;1===D.length&&1!==_&&(D[1]="###"),1===D.length||0===L?u.fractional=!1:(void 0===L&&(L=c.pattern?D[1].lastIndexOf("0")+1:1/0),L&&null==c.fractional&&(u.fractional=!0),!c.places&&L<D[1].length&&(L+=","+D[1].length),u.places=L);const R=D[0].split(",");return R.length>1&&(u.groupSize=R.pop().length,R.length>1&&(u.groupSize2=R.pop().length)),"("+function h(c){"places"in(c=c||{})||(c.places=1/0),"string"!=typeof c.decimal&&(c.decimal="."),"fractional"in c&&!/^0/.test(String(c.places))||(c.fractional=[!0,!1]),"exponent"in c||(c.exponent=[!0,!1]),"eSigned"in c||(c.eSigned=[!0,!1]);const f=m(c),i=A(c.fractional,a=>{let _="";return a&&0!==c.places&&(_="\\"+c.decimal,c.places===1/0?_="(?:"+_+"\\d+)?":_+="\\d{"+c.places+"}"),_},!0);let n=f+i;return i&&(n="(?:(?:"+n+")|(?:"+i+"))"),n+A(c.exponent,a=>a?"([eE]"+m({signed:c.eSigned})+")":"")}(u)+")"}),!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:n,decimal:a,factor:_}}function p(c,f){const i=x(f),n=new RegExp("^"+i.regexp+"$").exec(c);if(!n)return NaN;let a=n[1];if(!n[1]){if(!n[2])return NaN;a=n[2],i.factor*=-1}return a=a.replace(new RegExp("["+i.group+"\\s\\xa0]","g"),"").replace(i.decimal,"."),Number(a)*i.factor}function m(c){return"signed"in(c=c||{})||(c.signed=[!0,!1]),"separator"in c?"groupSize"in c||(c.groupSize=3):c.separator="",A(c.signed,f=>f?"[-+]":"",!0)+A(c.separator,f=>{if(!f)return"(?:\\d+)";" "===(f=(0,s.Qs)(f))?f="\\s":"\xa0"===f&&(f="\\s\\xa0");const i=c.groupSize,n=c.groupSize2;if(n){const a="(?:0|[1-9]\\d{0,"+(n-1)+"}(?:["+f+"]\\d{"+n+"})*["+f+"]\\d{"+i+"})";return i-n>0?"(?:"+a+"|(?:0|[1-9]\\d{0,"+(i-1)+"}))":a}return"(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+f+"]\\d{"+i+"})*)"},!0)}const A=(c,f,i)=>{if(!(c instanceof Array))return f(c);const n=[];for(let a=0;a<c.length;a++)n.push(f(c[a]));return v(n.join("|"),Boolean(i))},v=(c,f)=>"("+(f?"?:":"")+c+")"},88070:(H,W,e)=>{e.d(W,{E:()=>p,H:()=>x});var s=e(30217),E=e(550),S=e(67831),g=e(84161);const I=(0,e(28093).c)(),C=(0,E.c)(),B=(0,E.c)(),O=(0,E.c)();function x(m,A,v){return(0,g.s)(I,A[0],A[1],1),(0,g.t)(I,I,(0,s.t)(C,v)),0===I[2]?(0,S.s)(m,I[0],I[1]):(0,S.s)(m,I[0]/I[2],I[1]/I[2])}function p(m,A,v){return h(B,A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7]),h(O,v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7]),(0,s.m)(m,(0,s.a)(B,B),O),0!==m[8]&&(m[0]/=m[8],m[1]/=m[8],m[2]/=m[8],m[3]/=m[8],m[4]/=m[8],m[5]/=m[8],m[6]/=m[8],m[7]/=m[8],m[8]/=m[8]),m}function h(m,A,v,c,f,i,n,a,_){(0,s.s)(m,A,c,i,v,f,n,1,1,1),(0,g.s)(I,a,_,1),(0,s.a)(C,m);const[d,P,M]=(0,g.t)(I,I,(0,s.t)(C,C));return(0,s.s)(C,d,0,0,0,P,0,0,0,M),(0,s.m)(m,C,m)}},42930:(H,W,e)=>{e.d(W,{q:()=>C});var s=e(85931),E=e(54024),S=e(63290),g=e(62208),j=e(10699),I=e(59289);class C{constructor(O,x,p,h,m={}){this._mainMethod=x,this._transferLists=p,this._listeners=[],this._promise=(0,I.bA)(O,{...m,schedule:h}).then(A=>{if(void 0===this._thread){this._thread=A,this._promise=null,m.hasInitialize&&this.broadcast({},"initialize");for(const v of this._listeners)this._connectListener(v)}else A.close()}),this._promise.catch(A=>S.Z.getLogger("esri.core.workers.WorkerHandle").error(`Failed to initialize ${O} worker: ${A}`))}on(O,x){const p={removed:!1,eventName:O,callback:x,threadHandle:null};return this._listeners.push(p),this._connectListener(p),(0,E.kB)(()=>{p.removed=!0,(0,s.Od)(this._listeners,p),this._thread&&(0,g.pC)(p.threadHandle)&&p.threadHandle.remove()})}destroy(){this._thread&&(this._thread.close(),this._thread=null),this._promise=null}invoke(O,x){return this.invokeMethod(this._mainMethod,O,x)}invokeMethod(O,x,p){if(this._thread){const h=this._transferLists[O],m=h?h(x):[];return this._thread.invoke(O,x,{transferList:m,signal:p})}return this._promise?this._promise.then(()=>((0,j.k_)(p),this.invokeMethod(O,x,p))):Promise.reject(null)}broadcast(O,x){return this._thread?Promise.all(this._thread.broadcast(x,O)).then(()=>{}):this._promise?this._promise.then(()=>this.broadcast(O,x)):Promise.reject()}get promise(){return this._promise}_connectListener(O){this._thread&&this._thread.on(O.eventName,O.callback).then(x=>{O.removed||(O.threadHandle=x)})}}},28678:(H,W,e)=>{e.r(W),e.d(W,{default:()=>K});var L,s=e(15861),E=e(17626),g=(e(29132),e(84792)),j=e(26584),I=e(99959),C=e(77275),B=e(21726),O=e(77712),h=(e(90912),e(85931),e(68653)),m=e(76898),A=e(99433),v=e(44917),c=e(552),f=e(49286),i=e(6647),n=e(30346),a=e(99555),_=e(12585),d=e(72258),P=e(2584),M=e(91309),U=e(2004),u=e(65234),D=e(72642);let R=L=class extends((0,c.h)((0,n.Q)((0,a.M)((0,f.q)((0,i.I)((0,I.R)(v.Z))))))){constructor(...o){super(...o),this.copyright="",this.fullExtent=new U.Z(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,u.Z.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=u.Z.WebMercator,this.subDomains=null,this.tileInfo=new P.Z({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new D.Z({x:-20037508.342787,y:20037508.342787,spatialReference:u.Z.WebMercator}),spatialReference:u.Z.WebMercator,lods:[new d.Z({level:0,scale:591657527.591555,resolution:156543.033928}),new d.Z({level:1,scale:295828763.795777,resolution:78271.5169639999}),new d.Z({level:2,scale:147914381.897889,resolution:39135.7584820001}),new d.Z({level:3,scale:73957190.948944,resolution:19567.8792409999}),new d.Z({level:4,scale:36978595.474472,resolution:9783.93962049996}),new d.Z({level:5,scale:18489297.737236,resolution:4891.96981024998}),new d.Z({level:6,scale:9244648.868618,resolution:2445.98490512499}),new d.Z({level:7,scale:4622324.434309,resolution:1222.99245256249}),new d.Z({level:8,scale:2311162.217155,resolution:611.49622628138}),new d.Z({level:9,scale:1155581.108577,resolution:305.748113140558}),new d.Z({level:10,scale:577790.554289,resolution:152.874056570411}),new d.Z({level:11,scale:288895.277144,resolution:76.4370282850732}),new d.Z({level:12,scale:144447.638572,resolution:38.2185141425366}),new d.Z({level:13,scale:72223.819286,resolution:19.1092570712683}),new d.Z({level:14,scale:36111.909643,resolution:9.55462853563415}),new d.Z({level:15,scale:18055.954822,resolution:4.77731426794937}),new d.Z({level:16,scale:9027.977411,resolution:2.38865713397468}),new d.Z({level:17,scale:4513.988705,resolution:1.19432856685505}),new d.Z({level:18,scale:2256.994353,resolution:.597164283559817}),new d.Z({level:19,scale:1128.497176,resolution:.298582141647617}),new d.Z({level:20,scale:564.248588,resolution:.14929107082380833}),new d.Z({level:21,scale:282.124294,resolution:.07464553541190416}),new d.Z({level:22,scale:141.062147,resolution:.03732276770595208}),new d.Z({level:23,scale:70.5310735,resolution:.01866138385297604})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(o,b){return"string"==typeof o?{urlTemplate:o,...b}:o}load(o){const b=this.loadFromPortal({supportedTypes:["WMTS"]},o).then(()=>{let l="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const y=new B.R9(this.urlTemplate);!(this.subDomains&&this.subDomains.length>0)&&y.authority?.includes("{subDomain}")&&(l="is missing 'subDomains' property")}else l="spatialReference must match tileInfo.spatialReference";else l="is missing the required 'urlTemplate' property value";if(l)throw new j.Z("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${l}`)});return this.addResolvingPromise(b),Promise.resolve(this)}get levelValues(){const o=[];if(!this.tileInfo)return null;for(const b of this.tileInfo.lods)o[b.level]=b.levelValue||b.level;return o}readSpatialReference(o,b){return o||b.fullExtent&&b.fullExtent.spatialReference&&u.Z.fromJSON(b.fullExtent.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const o=[],{urlTemplate:b,subDomains:l}=this,y=new B.R9(b),T=y.scheme?y.scheme+"://":"//",w=T+y.authority+"/",F=y.authority;if(F?.includes("{subDomain}")){if(l&&l.length>0&&F.split(".").length>1)for(const N of l)o.push(T+F.replace(/\{subDomain\}/gi,N)+"/")}else o.push(w);return o.map(N=>("/"!==N.charAt(N.length-1)&&(N+="/"),N))}get urlPath(){if(!this.urlTemplate)return null;const o=this.urlTemplate,b=new B.R9(o);return o.substring(((b.scheme?b.scheme+"://":"//")+b.authority+"/").length)}readUrlTemplate(o,b){return o||b.templateUrl}writeUrlTemplate(o,b){o&&(0,B.oC)(o)&&(o="https:"+o),o&&(o=o.replace(/\{z\}/gi,"{level}").replace(/\{x\}/gi,"{col}").replace(/\{y\}/gi,"{row}"),o=(0,B.Fv)(o)),b.templateUrl=o}fetchTile(o,b,l,y={}){const{signal:T}=y,w=this.getTileUrl(o,b,l),F={responseType:"image",signal:T,query:{...this.refreshParameters}};return(0,g.default)(w,F).then(N=>N.data)}fetchImageBitmapTile(o,b,l,y={}){var T=this;return(0,s.Z)(function*(){const{signal:w}=y;if(T.fetchTile!==L.prototype.fetchTile){const $=yield T.fetchTile(o,b,l,y);try{return createImageBitmap($)}catch(J){throw new j.Z("request:server",`Unable to load tile ${o}/${b}/${l}`,{error:J,level:o,row:b,col:l})}}const F=T.getTileUrl(o,b,l),N={responseType:"blob",signal:w,query:{...T.refreshParameters}},{data:V}=yield(0,g.default)(F,N);return(0,_.g)(V,F)})()}getTileUrl(o,b,l){const{levelValues:y,tileServers:T,urlPath:w}=this;if(!y||!T||!w)return"";const F=y[o];return T[b%T.length]+(0,C.gx)(w,{level:F,z:F,col:l,x:l,row:b,y:b})}};(0,E._)([(0,O.Cb)({type:String,value:"",json:{write:!0}})],R.prototype,"copyright",void 0),(0,E._)([(0,O.Cb)({type:U.Z,json:{write:!0},nonNullable:!0})],R.prototype,"fullExtent",void 0),(0,E._)([(0,O.Cb)({readOnly:!0,json:{read:!1,write:!1}})],R.prototype,"legendEnabled",void 0),(0,E._)([(0,O.Cb)({type:["show","hide"]})],R.prototype,"listMode",void 0),(0,E._)([(0,O.Cb)({json:{read:!0,write:!0}})],R.prototype,"blendMode",void 0),(0,E._)([(0,O.Cb)()],R.prototype,"levelValues",null),(0,E._)([(0,O.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],R.prototype,"isReference",void 0),(0,E._)([(0,O.Cb)({type:["WebTiledLayer"],value:"WebTiledLayer"})],R.prototype,"operationalLayerType",void 0),(0,E._)([(0,O.Cb)({readOnly:!0,json:{read:!1,write:!1}})],R.prototype,"popupEnabled",void 0),(0,E._)([(0,O.Cb)({type:u.Z})],R.prototype,"spatialReference",void 0),(0,E._)([(0,h.r)("spatialReference",["spatialReference","fullExtent.spatialReference"])],R.prototype,"readSpatialReference",null),(0,E._)([(0,O.Cb)({type:[String],json:{write:!0}})],R.prototype,"subDomains",void 0),(0,E._)([(0,O.Cb)({type:P.Z,json:{write:!0}})],R.prototype,"tileInfo",void 0),(0,E._)([(0,O.Cb)({readOnly:!0})],R.prototype,"tileServers",null),(0,E._)([(0,O.Cb)({json:{read:!1}})],R.prototype,"type",void 0),(0,E._)([(0,O.Cb)()],R.prototype,"urlPath",null),(0,E._)([(0,O.Cb)({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],R.prototype,"urlTemplate",void 0),(0,E._)([(0,h.r)("urlTemplate",["urlTemplate","templateUrl"])],R.prototype,"readUrlTemplate",null),(0,E._)([(0,A.c)("urlTemplate",{templateUrl:{type:String}})],R.prototype,"writeUrlTemplate",null),(0,E._)([(0,O.Cb)({type:M.B,json:{write:!0}})],R.prototype,"wmtsInfo",void 0),R=L=(0,E._)([(0,m.j)("esri.layers.WebTileLayer")],R);const K=R},47519:(H,W,e)=>{var s,E;e.d(W,{i:()=>s}),(E=s||(s={}))[E.PROJECT_VERTICES=1]="PROJECT_VERTICES"},1476:(H,W,e)=>{e.d(W,{S:()=>E,X:()=>s});const s=1;function E(S,g){let j=0;for(const I of g){const C=I.attributes?.[S];"number"==typeof C&&isFinite(C)&&(j=Math.max(j,C))}return j}},20901:(H,W,e)=>{e.r(W),e.d(W,{createConnection:()=>K});var s=e(15861),E=e(17626),g=(e(29132),e(84792)),j=e(26584),I=e(63290),C=e(62208),B=e(10699),O=e(21726),m=(e(90912),e(85931),e(8314),e(76898)),A=e(77712),v=e(33696),c=e(61885);let f=class extends c.Z.EventedAccessor{destroy(){this.emit("destroy")}get connectionError(){return this.errorString?new j.Z("stream-connection",this.errorString):null}onFeature(o){this.emit("data-received",o)}onMessage(o){this.emit("message-received",o)}};(0,E._)([(0,A.Cb)({readOnly:!0})],f.prototype,"connectionError",null),f=(0,E._)([(0,m.j)("esri.layers.support.StreamConnection")],f);const i=f;var n,o;(o=n||(n={}))[o.CONNECTING=0]="CONNECTING",o[o.OPEN=1]="OPEN",o[o.CLOSING=2]="CLOSING",o[o.CLOSED=3]="CLOSED";let a=class extends i{constructor(o){super(),this._outstandingMessages=[],this.errorString=null;const{geometryType:b,spatialReference:l,sourceSpatialReference:y}=o;this._config=o,this._featureZScaler=(0,v.k)(b,y,l),this._open()}_open(){var o=this;return(0,s.Z)(function*(){yield o._tryCreateWebSocket(),o.destroyed||(yield o._handshake())})()}destroy(){super.destroy(),(0,C.pC)(this._websocket)&&(this._websocket.onopen=null,this._websocket.onclose=null,this._websocket.onerror=null,this._websocket.onmessage=null,this._websocket.close()),this._websocket=null}get connectionStatus(){if((0,C.Wi)(this._websocket))return"disconnected";switch(this._websocket.readyState){case n.CONNECTING:case n.OPEN:return"connected";case n.CLOSING:case n.CLOSED:return"disconnected"}}sendMessageToSocket(o){(0,C.Wi)(this._websocket)?this._outstandingMessages.push(o):this._websocket.send(JSON.stringify(o))}sendMessageToClient(o){this._onMessage(o)}updateCustomParameters(o){this._config.customParameters=o,(0,C.pC)(this._websocket)&&this._websocket.close()}_tryCreateWebSocket(o=this._config.source.path,b=1e3,l=0){var y=this;return(0,s.Z)(function*(){try{if(y.destroyed)return;const T=(0,O.fl)(o,y._config.customParameters??{});y._websocket=yield y._createWebSocket(T),y.notifyChange("connectionStatus")}catch(T){const w=b/1e3;return y._config.maxReconnectionAttempts&&l>=y._config.maxReconnectionAttempts?(I.Z.getLogger(y.declaredClass).error(new j.Z("websocket-connection","Exceeded maxReconnectionAttempts attempts. No further attempts will be made")),void y.destroy()):(I.Z.getLogger(y.declaredClass).error(new j.Z("websocket-connection",`Failed to connect. Attempting to reconnect in ${w}s`,T)),yield(0,B.e4)(b),y._tryCreateWebSocket(o,Math.min(1.5*b,1e3*y._config.maxReconnectionInterval),l+1))}})()}_setWebSocketJSONParseHandler(o){o.onmessage=b=>{try{const l=JSON.parse(b.data);this._onMessage(l)}catch(l){return void I.Z.getLogger(this.declaredClass).error(new j.Z("websocket-connection","Failed to parse message, invalid JSON",{error:l}))}}}_createWebSocket(o){return new Promise((b,l)=>{const y=new WebSocket(o);y.onopen=()=>{if(y.onopen=null,this.destroyed)return y.onclose=null,void y.close();y.onclose=T=>this._onClose(T),y.onerror=T=>this._onError(T),this._setWebSocketJSONParseHandler(y),b(y)},y.onclose=T=>{y.onopen=y.onclose=null,l(T)}})}_handshake(o=1e4){var b=this;return(0,s.Z)(function*(){const l=b._websocket;if((0,C.Wi)(l))return;const y=(0,B.hh)(),T=l.onmessage,{filter:w,outFields:F,spatialReference:N}=b._config;return y.timeout(o),l.onmessage=V=>{let $=null;try{$=JSON.parse(V.data)}catch{}$&&"object"==typeof $||(I.Z.getLogger(b.declaredClass).error(new j.Z("websocket-connection","Protocol violation. Handshake failed - malformed message",V.data)),y.reject(),b.destroy()),$.spatialReference?.wkid!==N?.wkid&&(I.Z.getLogger(b.declaredClass).error(new j.Z("websocket-connection",`Protocol violation. Handshake failed - expected wkid of ${N.wkid}`,V.data)),y.reject(),b.destroy()),"json"!==$.format&&(I.Z.getLogger(b.declaredClass).error(new j.Z("websocket-connection","Protocol violation. Handshake failed - format is not set",V.data)),y.reject(),b.destroy()),w&&$.filter!==w&&I.Z.getLogger(b.declaredClass).error(new j.Z("websocket-connection","Tried to set filter, but server doesn't support it")),F&&$.outFields!==F&&I.Z.getLogger(b.declaredClass).error(new j.Z("websocket-connection","Tried to set outFields, but server doesn't support it")),l.onmessage=T;for(const J of b._outstandingMessages)l.send(JSON.stringify(J));b._outstandingMessages=[],y.resolve()},l.send(JSON.stringify({filter:w,outFields:F,format:"json",spatialReference:{wkid:N.wkid}})),y.promise})()}_onMessage(o){if(this.onMessage(o),"type"in o)switch(o.type){case"features":case"featureResult":for(const b of o.features)(0,C.pC)(this._featureZScaler)&&this._featureZScaler(b.geometry),this.onFeature(b)}}_onError(o){const b="Encountered an error over WebSocket connection";this._set("errorString",b),I.Z.getLogger(this.declaredClass).error("websocket-connection",b)}_onClose(o){this._websocket=null,this.notifyChange("connectionStatus"),1e3!==o.code&&I.Z.getLogger(this.declaredClass).error("websocket-connection",`WebSocket closed unexpectedly with error code ${o.code}`),this.destroyed||this._open()}};(0,E._)([(0,A.Cb)()],a.prototype,"connectionStatus",null),(0,E._)([(0,A.Cb)()],a.prototype,"errorString",void 0),a=(0,E._)([(0,m.j)("esri.layers.graphics.sources.connections.WebSocketConnection")],a);var _=e(20477),d=e(96854),P=e(91179),M=e(65234);const u={maxQueryDepth:5,maxRecordCountFactor:3};let D=class extends a{constructor(o){super({...u,...o}),this._buddyServicesQuery=null,this._relatedFeatures=null}_open(){var o=this;return(0,s.Z)(function*(){const b=yield o._fetchServiceDefinition(o._config.source);b.timeInfo.trackIdField||I.Z.getLogger(o.declaredClass).warn("GeoEvent service was configured without a TrackIdField. This may result in certain functionality being disabled. The purgeOptions.maxObservations property will have no effect.");const l=o._fetchWebSocketUrl(b.streamUrls,o._config.spatialReference);o._buddyServicesQuery||(o._buddyServicesQuery=o._queryBuddyServices()),yield o._buddyServicesQuery,yield o._tryCreateWebSocket(l);const{filter:y,outFields:T}=o._config;o.destroyed||o._setFilter(y,T)})()}_onMessage(o){if("attributes"in o){let b;try{b=this._enrich(o),(0,C.pC)(this._featureZScaler)&&this._featureZScaler(b.geometry)}catch(l){return void I.Z.getLogger(this.declaredClass).error(new j.Z("geoevent-connection","Failed to parse message",l))}this.onFeature(b)}else this.onMessage(o)}_fetchServiceDefinition(o){var b=this;return(0,s.Z)(function*(){const l={f:"json",...b._config.customParameters},y=(0,g.default)(o.path,{query:l,responseType:"json"}),T=(yield y).data;return b._serviceDefinition=T,T})()}_fetchWebSocketUrl(o,b){const l=o[0],{urls:y,token:T}=l,w=this._inferWebSocketBaseUrl(y);return(0,O.fl)(`${w}/subscribe`,{outSR:""+b.wkid,token:T})}_inferWebSocketBaseUrl(o){if(1===o.length)return o[0];for(const b of o)if(b.includes("wss"))return b;return I.Z.getLogger(this.declaredClass).error(new j.Z("geoevent-connection","Unable to infer WebSocket url",o)),null}_setFilter(o,b){var l=this;return(0,s.Z)(function*(){const y=l._websocket;if((0,C.Wi)(y)||(0,C.Wi)(o)&&(0,C.Wi)(b))return;const T=JSON.stringify({filter:l._serializeFilter(o,b)});let w=!1;const F=(0,B.hh)();return y.onmessage=$=>{const J=JSON.parse($.data);J.filter&&(J.error&&(I.Z.getLogger(l.declaredClass).error(new j.Z("geoevent-connection","Failed to set service filter",J.error)),l._set("errorString",`Could not set service filter - ${J.error}`),F.reject(J.error)),l._setWebSocketJSONParseHandler(y),w=!0,F.resolve())},y.send(T),setTimeout(()=>{w||(l.destroyed||l._websocket!==y||I.Z.getLogger(l.declaredClass).error(new j.Z("geoevent-connection","Server timed out when setting filter")),F.reject())},1e4),F.promise})()}_serializeFilter(o,b){const l={};if((0,C.Wi)(o)&&(0,C.Wi)(b))return l;if((0,C.pC)(o)&&o.geometry)try{const y=(0,P.im)(o.geometry);if("extent"!==y.type)throw new j.Z(`Expected extent but found type ${y.type}`);l.geometry=JSON.stringify(y.shiftCentralMeridian())}catch(y){I.Z.getLogger(this.declaredClass).error(new j.Z("geoevent-connection","Encountered an error when setting connection geometryDefinition",y))}return(0,C.pC)(o)&&o.where&&"1 = 1"!==o.where&&"1=1"!==o.where&&(l.where=o.where),(0,C.pC)(b)&&(l.outFields=b.join(",")),l}_enrich(o){if(!this._relatedFeatures)return o;const y=this._relatedFeatures.get(o.attributes[this._serviceDefinition.relatedFeatures.joinField]);if(!y)return I.Z.getLogger(this.declaredClass).warn("geoevent-connection","Feature join failed. Is the join field configured correctly?",o),o;const{attributes:T,geometry:w}=y;for(const F in T)o.attributes[F]=T[F];return w&&(o.geometry=w),o.geometry||o.centroid||I.Z.getLogger(this.declaredClass).error(new j.Z("geoevent-connection","Found malformed feature - no geometry found",o)),o}_queryBuddyServices(){var o=this;return(0,s.Z)(function*(){try{const{relatedFeatures:b,keepLatestArchive:l}=o._serviceDefinition,y=o._queryRelatedFeatures(b),T=o._queryArchive(l);yield y;const w=yield T;if(!w)return;for(const F of w.features)o.onFeature(o._enrich(F))}catch(b){I.Z.getLogger(o.declaredClass).error(new j.Z("geoevent-connection","Encountered an error when querying buddy services",{error:b}))}})()}_queryRelatedFeatures(o){var b=this;return(0,s.Z)(function*(){if(!o)return;const l=yield b._queryBuddy(o.featuresUrl);b._addRelatedFeatures(l)})()}_queryArchive(o){var b=this;return(0,s.Z)(function*(){if(o)return b._queryBuddy(o.featuresUrl)})()}_queryBuddy(o){var b=this;return(0,s.Z)(function*(){const l=new((yield Promise.resolve().then(e.bind(e,80415))).default)({url:o}),{capabilities:y}=yield l.load(),T=y.query.supportsMaxRecordCountFactor,w=y.query.supportsPagination,F=y.query.supportsCentroid,N=b._config.maxRecordCountFactor,V=l.capabilities.query.maxRecordCount,$=T?V*N:V,J=new d.Z;if(J.outFields=(0,C.Pt)(b._config.outFields,["*"]),J.where=(0,C.Pt)((0,C.U2)(b._config.filter,"where"),"1=1"),J.returnGeometry=!0,J.returnExceededLimitFeatures=!0,J.outSpatialReference=M.Z.fromJSON(b._config.spatialReference),F&&(J.returnCentroid=!0),T&&(J.maxRecordCountFactor=N),w)return J.num=$,l.destroy(),b._queryPages(o,J);const Y=yield(0,_.JT)(o,J,b._config.sourceSpatialReference);return l.destroy(),Y.data})()}_queryPages(o,b,l=[],y=0){var T=this;return(0,s.Z)(function*(){b.start=(0,C.pC)(b.num)?y*b.num:null;const{data:w}=yield(0,_.JT)(o,b,T._config.sourceSpatialReference);return w.exceededTransferLimit&&y<(T._config.maxQueryDepth??0)?(w.features.forEach(F=>l.push(F)),T._queryPages(o,b,l,y+1)):(l.forEach(F=>w.features.push(F)),w)})()}_addRelatedFeatures(o){const b=new Map,l=o.features,y=this._serviceDefinition.relatedFeatures.joinField;for(const T of l)b.set(T.attributes[y],T);this._relatedFeatures=b}};D=(0,E._)([(0,m.j)("esri.layers.graphics.sources.connections.GeoEventConnection")],D);const L=D;let R=class extends i{constructor(o){super(),this.connectionStatus="connected",this.errorString=null;const{geometryType:b,spatialReference:l,sourceSpatialReference:y}=o;this._featureZScaler=(0,v.k)(b,y,l)}updateCustomParameters(o){}sendMessageToSocket(o){}sendMessageToClient(o){if("type"in o)switch(o.type){case"features":case"featureResult":for(const b of o.features)(0,C.pC)(this._featureZScaler)&&this._featureZScaler(b.geometry),this.onFeature(b)}this.onMessage(o)}};function K(o,b,l,y,T,w,F,N){const V={source:o,sourceSpatialReference:b,spatialReference:l,geometryType:y,filter:T,maxReconnectionAttempts:w,maxReconnectionInterval:F,customParameters:N};return o?o.path.startsWith("wss://")||o.path.startsWith("ws://")?new a(V):new L(V):new R(V)}(0,E._)([(0,A.Cb)()],R.prototype,"connectionStatus",void 0),(0,E._)([(0,A.Cb)()],R.prototype,"errorString",void 0),R=(0,E._)([(0,m.j)("esri.layers.support.ClientSideConnection")],R)},5143:(H,W,e)=>{e.d(W,{Z:()=>p});var s=e(17626),S=(e(29132),e(77712)),I=(e(90912),e(85931),e(68653)),C=e(76898),B=e(51026),O=e(28930),x=e(65234);const p=h=>{let m=class extends h{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(A,v){return null!=v.minLOD&&null!=v.maxLOD?A:0}readMaxScale(A,v){return null!=v.minLOD&&null!=v.maxLOD?A:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(A,v){return v.capabilities&&v.capabilities.includes("Tilemap")?new O.y({layer:this}):null}};return(0,s._)([(0,S.Cb)({json:{read:{source:"copyrightText"}}})],m.prototype,"copyright",void 0),(0,s._)([(0,S.Cb)()],m.prototype,"minScale",void 0),(0,s._)([(0,I.r)("service","minScale")],m.prototype,"readMinScale",null),(0,s._)([(0,S.Cb)()],m.prototype,"maxScale",void 0),(0,s._)([(0,I.r)("service","maxScale")],m.prototype,"readMaxScale",null),(0,s._)([(0,S.Cb)({type:x.Z})],m.prototype,"spatialReference",void 0),(0,s._)([(0,S.Cb)({readOnly:!0})],m.prototype,"supportsBlankTile",null),(0,s._)([(0,S.Cb)(B.h)],m.prototype,"tileInfo",void 0),(0,s._)([(0,S.Cb)()],m.prototype,"tilemapCache",void 0),(0,s._)([(0,I.r)("service","tilemapCache",["capabilities"])],m.prototype,"readTilemapCache",null),(0,s._)([(0,S.Cb)()],m.prototype,"version",void 0),m=(0,s._)([(0,C.j)("esri.layers.mixins.ArcGISCachedService")],m),m}},22825:(H,W,e)=>{e.d(W,{A:()=>E});const s=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function E(S){return null!=S&&s.some(([g,j])=>S>=g&&S<=j)}},14772:(H,W,e)=>{e.d(W,{R:()=>A});var s=e(17626),E=e(14517),S=e(80542),g=e(62208),j=e(95737),I=e(77712),O=(e(90912),e(85931),e(76898)),x=e(13812),p=e(59990),h=e(13410);const m={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let A=class extends((0,S.p)(E.Z)){constructor(v){super(v),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const v=this.visibleSublayers.map(c=>{const f=(0,p.f)(this.floors,c);return c.toExportImageJSON(f)});return v.length?JSON.stringify(v):null}get hasDynamicLayers(){return this.layer&&(0,h.FN)(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(v){this._get("layer")!==v&&(this._set("layer",v),this.handles.remove("layer"),v&&this.handles.add([v.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),v.on("sublayer-update",c=>this.notifyChange(m[c.propertyName]))],"layer"))}get layers(){const v=this.visibleSublayers;return v?v.length?"show:"+v.map(c=>c.id).join(","):"show:-1":null}get layerDefs(){const v=!!this.floors?.length,c=this.visibleSublayers.filter(f=>null!=f.definitionExpression||v&&null!=f.floorInfo);return c.length?JSON.stringify(c.reduce((f,i)=>{const n=(0,p.f)(this.floors,i),a=(0,j._)(n,i.definitionExpression);return(0,g.pC)(a)&&(f[i.id]=a),f},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const v=this.layer;return v&&(v.commitProperty("dpi"),v.commitProperty("imageFormat"),v.commitProperty("imageTransparency"),v.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const v=[];if(!this.layer)return v;const c=this.layer.sublayers,f=n=>{const a=this.scale;n.visible&&(0===a||(0===n.minScale||a<=n.minScale)&&(0===n.maxScale||a>=n.maxScale))&&(n.sublayers?n.sublayers.forEach(f):v.unshift(n))};c&&c.forEach(f);const i=this._get("visibleSublayers");return!i||i.length!==v.length||i.some((n,a)=>v[a]!==n)?v:i}toJSON(){const v=this.layer;let c={dpi:v.dpi,format:v.imageFormat,transparent:v.imageTransparency,gdbVersion:v.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?c.dynamicLayers=this.dynamicLayers:c={...c,layers:this.layers,layerDefs:this.layerDefs},c}};(0,s._)([(0,I.Cb)({readOnly:!0})],A.prototype,"dynamicLayers",null),(0,s._)([(0,I.Cb)()],A.prototype,"floors",void 0),(0,s._)([(0,I.Cb)({readOnly:!0})],A.prototype,"hasDynamicLayers",null),(0,s._)([(0,I.Cb)()],A.prototype,"layer",null),(0,s._)([(0,I.Cb)({readOnly:!0})],A.prototype,"layers",null),(0,s._)([(0,I.Cb)({readOnly:!0})],A.prototype,"layerDefs",null),(0,s._)([(0,I.Cb)({type:Number})],A.prototype,"scale",void 0),(0,s._)([(0,I.Cb)(x.qG)],A.prototype,"timeExtent",void 0),(0,s._)([(0,I.Cb)({readOnly:!0})],A.prototype,"version",null),(0,s._)([(0,I.Cb)({readOnly:!0})],A.prototype,"visibleSublayers",null),A=(0,s._)([(0,O.j)("esri.layers.mixins.ExportImageParameters")],A)},51920:(H,W,e)=>{e.d(W,{j:()=>O});var s=e(17626),E=e(14517),S=e(80542),g=e(77712),C=(e(90912),e(85931),e(76898));const B={visible:"visibleSublayers"};let O=class extends((0,S.p)(E.Z)){constructor(x){super(x),this.scale=0}set layer(x){this._get("layer")!==x&&(this._set("layer",x),this.handles.remove("layer"),x&&this.handles.add([x.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),x.on("wms-sublayer-update",p=>this.notifyChange(B[p.propertyName]))],"layer"))}get layers(){return this.visibleSublayers.filter(({name:x})=>x).map(({name:x})=>x).join()}get version(){this.commitProperty("layers");const x=this.layer;return x&&x.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:x,scale:p}=this,h=x?.sublayers,m=[],A=v=>{const{minScale:c,maxScale:f,sublayers:i,visible:n}=v;n&&(0===p||(0===c||p<=c)&&(0===f||p>=f))&&(i?i.forEach(A):m.push(v))};return h?.forEach(A),m}toJSON(){const{layer:x,layers:p}=this,{imageFormat:h,imageTransparency:m,version:A}=x;return{format:h,request:"GetMap",service:"WMS",styles:"",transparent:m?"TRUE":"FALSE",version:A,layers:p}}};(0,s._)([(0,g.Cb)()],O.prototype,"layer",null),(0,s._)([(0,g.Cb)({readOnly:!0})],O.prototype,"layers",null),(0,s._)([(0,g.Cb)({type:Number})],O.prototype,"scale",void 0),(0,s._)([(0,g.Cb)({readOnly:!0})],O.prototype,"version",null),(0,s._)([(0,g.Cb)({readOnly:!0})],O.prototype,"visibleSublayers",null),O=(0,s._)([(0,C.j)("esri.layers.support.ExportWMSImageParameters")],O)},17732:(H,W,e)=>{e.d(W,{L:()=>h});var s=e(17626),E=e(14517),S=e(62208),g=e(77712),C=(e(90912),e(85931),e(76898)),B=e(37118),O=e(55915),x=e(65401),p=e(65629);let h=class extends E.Z{constructor(m){super(m)}get bounds(){const m=this.coords;return(0,S.Wi)(m)||(0,S.Wi)(m.extent)?null:(0,x.oJ)(m.extent)}get coords(){const m=(0,S.Wg)(this.element.georeference)?.coords;return(0,O.dz)(m,this.spatialReference).geometry}get normalizedCoords(){return B.Z.fromJSON((0,p.Ui)(this.coords))}get normalizedBounds(){const m=(0,S.pC)(this.normalizedCoords)?this.normalizedCoords.extent:null;return(0,S.pC)(m)?(0,x.oJ)(m):null}};(0,s._)([(0,g.Cb)()],h.prototype,"spatialReference",void 0),(0,s._)([(0,g.Cb)()],h.prototype,"element",void 0),(0,s._)([(0,g.Cb)()],h.prototype,"bounds",null),(0,s._)([(0,g.Cb)()],h.prototype,"coords",null),(0,s._)([(0,g.Cb)()],h.prototype,"normalizedCoords",null),(0,s._)([(0,g.Cb)()],h.prototype,"normalizedBounds",null),h=(0,s._)([(0,C.j)("esri.layers.support.MediaElementView")],h)},28930:(H,W,e)=>{e.d(W,{y:()=>U});var M,s=e(15861),E=e(17626),S=e(84792),g=e(14517),j=e(27306),I=e(26584),C=e(80542),B=e(63290),O=e(93961),x=e(77029),p=e(10699),h=e(32917),m=e(50618),A=e(21726),v=e(77712),c=e(66656),f=e(85931),i=e(76898),n=e(68511),a=e(58817);class _{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(D,L){if("unknown"!==this._allAvailability)return this._allAvailability;const R=(D-this.location.top)*this.location.width+(L-this.location.left),o=R>>3,b=this._tileAvailabilityBitSet;return o<0||o>b.length?"unknown":b[o]&1<<R%8?"available":"unavailable"}_updateFromData(D){let K=!0,o=!0;const b=Math.ceil(this.location.width*this.location.height/8),l=new Uint8Array(b);let y=0;for(let T=0;T<D.length;T++){const w=T%8;D[T]?(o=!1,l[y]|=1<<w):K=!1,7===w&&++y}o?this._allAvailability="unavailable":K?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=l,this.byteSize+=l.length)}static fromDefinition(D,L){const R=D.service.request||S.default,{row:K,col:o,width:b,height:l}=D,y={query:{f:"json"}};return L=L?{...y,...L}:y,R(function P(u){let D;if("vector-tile"===u.service.type)D=`${u.service.url}/tilemap/${u.level}/${u.row}/${u.col}/${u.width}/${u.height}`;else{const R=u.service.tileServers;D=`${R&&R.length?R[u.row%R.length]:u.service.url}/tilemap/${u.level}/${u.row}/${u.col}/${u.width}/${u.height}`}const L=u.service.query;return L&&(D=`${D}?${L}`),D}(D),L).then(T=>T.data).catch(T=>{if(T&&T.details&&422===T.details.httpStatus)return{location:{top:K,left:o,width:b,height:l},valid:!0,data:(0,f.a9)(b*l,0)};throw T}).then(T=>{if(T.location&&(T.location.top!==K||T.location.left!==o||T.location.width!==b||T.location.height!==l))throw new I.Z("tilemap:location-mismatch","Tilemap response for different location than requested",{response:T,definition:{top:K,left:o,width:b,height:l}});return _.fromJSON(T)})}static fromJSON(D){_._validateJSON(D);const L=new _;return L.location=Object.freeze((0,a.d9)(D.location)),L._updateFromData(D.data),Object.freeze(L)}static _validateJSON(D){if(!D||!D.location)throw new I.Z("tilemap:missing-location","Location missing from tilemap response");if(!1===D.valid)throw new I.Z("tilemap:invalid","Tilemap response was marked as invalid");if(!D.data)throw new I.Z("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(D.data))throw new I.Z("tilemap:data-mismatch","Data must be an array of numbers");if(D.data.length!==D.location.width*D.location.height)throw new I.Z("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function d(u){return`${u.level}/${u.row}/${u.col}/${u.width}/${u.height}`}let U=M=class extends((0,C.p)(g.Z)){constructor(u){super(u),this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2*j.Y8.MEGABYTES,this.request=S.default,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new O.Z(this.cacheByteSize),this.addHandles([(0,h.YP)(()=>{const{layer:u}=this;return[u?.parsedUrl,u?.tileServers,u?.apiKey,u?.customParameters]},()=>this._initializeTilemapDefinition()),(0,h.YP)(()=>this.layer?.tileInfo?.lods,u=>this._initializeAvailableLevels(u),h.tX)]),this._initializeTilemapDefinition()}castLevels(u){return u<=2?(B.Z.getLogger(this.declaredClass).error("Minimum levels for Tilemap is 3, but got ",u),3):u}get size(){return 1<<this.levels}fetchTilemap(u,D,L,R){if(!this._availableLevels[u])return Promise.reject(new I.Z("tilemap-cache:level-unavailable",`Level ${u} is unavailable in the service`));const K=this._tmpTilemapDefinition,o=this._tilemapFromCache(u,D,L,K);if(o)return Promise.resolve(o);const b=R&&R.signal;return R={...R,signal:null},new Promise((l,y)=>{(0,p.fu)(b,()=>y((0,p.zE)()));const T=d(K);let w=this._pendingTilemapRequests[T];if(!w){w=_.fromDefinition(K,R).then(N=>(this._tilemapCache.put(T,N,N.byteSize),N));const F=()=>delete this._pendingTilemapRequests[T];this._pendingTilemapRequests[T]=w,w.then(F,F)}w.then(l,y)})}getAvailability(u,D,L){if(!this._availableLevels[u])return"unavailable";const R=this._tilemapFromCache(u,D,L,this._tmpTilemapDefinition);return R?R.getAvailability(D,L):"unknown"}fetchAvailability(u,D,L,R){return this._availableLevels[u]?this.fetchTilemap(u,D,L,R).catch(K=>K).then(K=>{if(K instanceof _){const o=K.getAvailability(D,L);if("unavailable"===o)throw new I.Z("tile-map:tile-unavailable","Tile is not available",{level:u,row:D,col:L});return o}if((0,p.D_)(K))throw K;return"unknown"}):Promise.reject(new I.Z("tilemap-cache:level-unavailable",`Level ${u} is unavailable in the service`))}fetchAvailabilityUpsample(u,D,L,R,K){R.level=u,R.row=D,R.col=L;const o=this.layer.tileInfo;o.updateTileInfo(R);const b=this.fetchAvailability(u,D,L,K).catch(l=>{if((0,p.D_)(l))throw l;if(o.upsampleTile(R))return this.fetchAvailabilityUpsample(R.level,R.row,R.col,R);throw l});return this._fetchAvailabilityUpsamplePrefetch(R.id,u,D,L,K,b),b}_fetchAvailabilityUpsamplePrefetch(u,D,L,R,K,o){var b=this;return(0,s.Z)(function*(){if(!b._prefetchingEnabled||null==u)return;const l=`prefetch-${u}`;if(b.handles.has(l))return;const y=new AbortController;o.then(()=>y.abort(),()=>y.abort());let T=!1;if(b.handles.add({remove(){T||(T=!0,y.abort())}},l),yield(0,m.MU)(10,y.signal).catch(()=>{}),T||(T=!0,b.handles.remove(l)),(0,p.Hc)(y))return;const F=new n.f(u,D,L,R),N={...K,signal:y.signal},V=b.layer.tileInfo;for(let $=0;M._prefetches.length<M._maxPrefetch&&V.upsampleTile(F);++$){const J=b.fetchAvailability(F.level,F.row,F.col,N);M._prefetches.push(J);const Y=()=>{M._prefetches.removeUnordered(J)};J.then(Y,Y)}})()}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const{parsedUrl:u,apiKey:D,customParameters:L}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:u.path,query:(0,A.B7)({...u.query,...L,token:D??u.query?.token}),tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(u,D,L,R){R.level=u,R.row=D-D%this.size,R.col=L-L%this.size;const K=d(R);return this._tilemapCache.get(K)}_initializeAvailableLevels(u){this._availableLevels={},u&&u.forEach(D=>this._availableLevels[D.level]=!0)}get test(){const u=this;return{get prefetchingEnabled(){return u._prefetchingEnabled},set prefetchingEnabled(D){u._prefetchingEnabled=D},hasTilemap:(D,L,R)=>!!u._tilemapFromCache(D,L,R,u._tmpTilemapDefinition)}}};U._maxPrefetch=4,U._prefetches=new x.Z({initialSize:M._maxPrefetch}),(0,E._)([(0,v.Cb)({constructOnly:!0,type:Number})],U.prototype,"levels",void 0),(0,E._)([(0,c.p)("levels")],U.prototype,"castLevels",null),(0,E._)([(0,v.Cb)({readOnly:!0,type:Number})],U.prototype,"size",null),(0,E._)([(0,v.Cb)({constructOnly:!0,type:Number})],U.prototype,"cacheByteSize",void 0),(0,E._)([(0,v.Cb)({constructOnly:!0})],U.prototype,"layer",void 0),(0,E._)([(0,v.Cb)({constructOnly:!0})],U.prototype,"request",void 0),U=M=(0,E._)([(0,i.j)("esri.layers.support.TilemapCache")],U)},91309:(H,W,e)=>{e.d(W,{B:()=>B});var C,s=e(17626),E=e(86810),S=e(58817),g=e(77712),I=(e(90912),e(76898));let B=C=class extends E.wq{constructor(O){super(O)}clone(){return new C({customLayerParameters:(0,S.d9)(this.customLayerParameters),customParameters:(0,S.d9)(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};(0,s._)([(0,g.Cb)({json:{type:Object,write:!0}})],B.prototype,"customLayerParameters",void 0),(0,s._)([(0,g.Cb)({json:{type:Object,write:!0}})],B.prototype,"customParameters",void 0),(0,s._)([(0,g.Cb)({type:String,json:{write:!0}})],B.prototype,"layerIdentifier",void 0),(0,s._)([(0,g.Cb)({type:String,json:{write:!0}})],B.prototype,"tileMatrixSet",void 0),(0,s._)([(0,g.Cb)({type:String,json:{write:!0}})],B.prototype,"url",void 0),B=C=(0,s._)([(0,I.j)("esri.layer.support.WMTSLayerInfo")],B)},98686:(H,W,e)=>{e.d(W,{CS:()=>v,Cw:()=>A,Yu:()=>a,j5:()=>c,lm:()=>d});var s=e(15861),E=e(59318),S=e(24263),g=e(73281),j=e(84792),I=e(58817),C=e(21726),B=e(65234),O=e(5548),x=e(32442),p=e(33474),h=e(17253);const m={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function A(P){const M=P.folders||[],U=M.slice(),u=new Map,D=new Map,L=new Map,R=new Map,K=new Map,o={esriGeometryPoint:D,esriGeometryPolyline:L,esriGeometryPolygon:R};(P.featureCollection&&P.featureCollection.layers||[]).forEach(l=>{const y=(0,I.d9)(l);y.featureSet.features=[];const T=l.featureSet.geometryType;u.set(T,y);const w=l.layerDefinition.objectIdField;"esriGeometryPoint"===T?f(D,w,l.featureSet.features):"esriGeometryPolyline"===T?f(L,w,l.featureSet.features):"esriGeometryPolygon"===T&&f(R,w,l.featureSet.features)}),P.groundOverlays&&P.groundOverlays.forEach(l=>{K.set(l.id,l)}),M.forEach(l=>{l.networkLinkIds.forEach(y=>{const T=function n(P,M,U){const u=function i(P,M){let U;return M.some(u=>u.id===P&&(U=u,!0)),U}(P,U);return u&&(u.parentFolderId=M,u.networkLink=u),u}(y,l.id,P.networkLinks);T&&U.push(T)})}),U.forEach(l=>{if(l.featureInfos){l.points=(0,I.d9)(u.get("esriGeometryPoint")),l.polylines=(0,I.d9)(u.get("esriGeometryPolyline")),l.polygons=(0,I.d9)(u.get("esriGeometryPolygon")),l.mapImages=[];for(const y of l.featureInfos)switch(y.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":{const T=o[y.type].get(y.id);T&&l[m[y.type]].featureSet.features.push(T);break}case"GroundOverlay":{const T=K.get(y.id);T&&l.mapImages.push(T);break}}l.fullExtent=d([l])}});const b=d(U);return{folders:M,sublayers:U,extent:b}}function v(P,M,U,u){const D=S.id&&S.id.findCredential(P);return P=(0,C.fl)(P,{token:D&&D.token}),(0,j.default)(E.Z.kmlServiceUrl,{query:{url:P,model:"simple",folders:"",refresh:0!==U||void 0,outSR:JSON.stringify(M)},responseType:"json",signal:u})}function c(P,M,U=null,u=[]){const D=[],L={},R=M.sublayers,K=M.folders.map(o=>o.id);return R.forEach(o=>{const b=new P;if(U?b.read(o,U):b.read(o),u.length&&K.includes(b.id)&&(b.visible=u.includes(b.id)),L[o.id]=b,null!=o.parentFolderId&&-1!==o.parentFolderId){const l=L[o.parentFolderId];l.sublayers||(l.sublayers=[]),l.sublayers?.unshift(b)}else D.unshift(b)}),D}function f(P,M,U){U.forEach(u=>{P.set(u.attributes[M],u)})}function a(P){return _.apply(this,arguments)}function _(){return(_=(0,s.Z)(function*(P){const M=h.Z.fromJSON(P.featureSet).features,u=(0,p.i)(P.layerDefinition.drawingInfo.renderer),D=g.Z.fromJSON(P.popupInfo),L=[];for(const R of M){const K=yield u.getSymbolAsync(R);R.symbol=K,R.popupTemplate=D,R.visible=!0,L.push(R)}return L})).apply(this,arguments)}function d(P){const M=(0,O.Ue)(O.Gv),U=(0,O.Ue)(O.Gv);for(const u of P){if(u.polygons&&u.polygons.featureSet&&u.polygons.featureSet.features)for(const D of u.polygons.featureSet.features)(0,x.Yg)(M,D.geometry),(0,O.TC)(U,M);if(u.polylines&&u.polylines.featureSet&&u.polylines.featureSet.features)for(const D of u.polylines.featureSet.features)(0,x.Yg)(M,D.geometry),(0,O.TC)(U,M);if(u.points&&u.points.featureSet&&u.points.featureSet.features)for(const D of u.points.featureSet.features)(0,x.Yg)(M,D.geometry),(0,O.TC)(U,M);if(u.mapImages)for(const D of u.mapImages)(0,x.Yg)(M,D.extent),(0,O.TC)(U,M)}return(0,O.fS)(U,O.Gv)?void 0:{xmin:U[0],ymin:U[1],zmin:U[2],xmax:U[3],ymax:U[4],zmax:U[5],spatialReference:B.Z.WGS84}}},61068:(H,W,e)=>{e.d(W,{OE:()=>h,Gc:()=>v,Qg:()=>m,Rq:()=>B,gX:()=>A,z2:()=>O,ET:()=>x,Vx:()=>f}),e(29132);var E=e(62208),g=e(28594),j=e(72642);const I=new Map,C=new class S{constructor(n=15e3,a=5e3){this._timer=null,this._cachedBlocks=new Map,this._size=-1,this._duration=n,this._interval=Math.min(n,a)}decreaseRefCount(n,a){const _=n+"/"+a,d=this._cachedBlocks;if(d.has(_)){const P=d.get(_);return P.refCount--,P.refCount<=0&&(d.delete(_),P.controller&&P.controller.abort()),P.refCount}return 0}getBlock(n,a){const _=n+"/"+a,d=this._cachedBlocks;if(d.has(_)){const P=d.get(_);return P.ts=Date.now(),P.refCount++,d.delete(_),d.set(_,P),P.block}return null}putBlock(n,a,_,d){const P=this._cachedBlocks,M=n+"/"+a;if(P.has(M)){const U=P.get(M);U.ts=Date.now(),U.refCount++}else P.set(M,{block:_,ts:Date.now(),refCount:1,controller:d});this._trim(),this._updateTimer()}deleteBlock(n,a){const _=this._cachedBlocks,d=n+"/"+a;_.has(d)&&_.delete(d)}updateMaxSize(n){this._size=n,this._trim()}empty(){this._cachedBlocks.clear(),this._clearTimer()}getCurrentSize(){return this._cachedBlocks.size}_updateTimer(){if(null!=this._timer)return;const n=this._cachedBlocks;this._timer=setInterval(()=>{const a=Array.from(n),_=Date.now();for(let d=0;d<a.length&&a[d][1].ts<=_-this._duration;d++)n.delete(a[d][0]);0===n.size&&this._clearTimer()},this._interval)}_trim(){const n=this._cachedBlocks;if(-1===this._size||this._size>=n.size)return;const a=Array.from(n);for(let _=0;_<a.length-this._size;_++)n.delete(a[_][0])}_clearTimer(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)}};function B(i,n){return null==n?i:`${i}?sliceId=${n}`}function O(i,n){const a={extent:null,rasterInfo:n,cache:new Map},_=I.get(i);return _?(_.push(a),_.length-1):(I.set(i,[a]),0)}function x(i,n){const a=I.get(i);a&&(a[n]=null,a.some(_=>null!=_)||I.delete(i))}function h(i,n,a){const _=I.get(i);if(!_)return null==n?C.decreaseRefCount(i,a):0;if(null==n||null==_[n])return C.decreaseRefCount(i,a);const d=_[n]?.cache,P=d?.get(a);if(d&&P){if(P.refCount--,0===P.refCount){d.delete(a);for(let M=0;M<_.length;M++)_[M]?.cache.delete(a);P.controller&&P.controller.abort()}return P.refCount}return 0}function m(i,n,a){const _=I.get(i);if(!_)return null==n?C.getBlock(i,a):null;if(null==n||null==_[n]){for(let P=0;P<_.length;P++){const M=_[P]?.cache.get(a);if(M)return M.refCount++,M.block}return C.getBlock(i,a)}const d=_[n]?.cache.get(a);if(d)return d.refCount++,d.block;for(let P=0;P<_.length;P++){if(P===n||!_[P])continue;const M=_[P]?.cache,U=M?.get(a);if(M&&U)return U.refCount++,M.set(a,U),U.block}return null}function A(i,n,a,_,d=null){const P=I.get(i);if(!P)return void(null==n&&C.putBlock(i,a,_,d));if(null==n||null==P[n])return void C.putBlock(i,a,_,d);const M={refCount:1,block:_,isResolved:!1,isRejected:!1,controller:d};_.then(()=>M.isResolved=!0).catch(()=>M.isRejected=!0),P[n]?.cache.set(a,M)}function v(i,n,a){const _=I.get(i);_?null!=n&&null!=_[n]?_[n]?.cache.delete(a):C.deleteBlock(i,a):null==n&&C.deleteBlock(i,a)}function f(i,n,a,_,d,P,M=null){const U=function c(i,n){const a=I.get(i);return a?a[n]??null:null}(i,n);if(!U)return;const u=U.extent,{cache:D,rasterInfo:L}=U;if(u&&u.xmin===a.xmin&&u.xmax===a.xmax&&u.ymin===a.ymin&&u.ymax===a.ymax)return;_=_??0;const R=a.clone().normalize(),{spatialReference:K,transform:o}=L,b=new Set;for(let l=0;l<R.length;l++){const y=R[l];if(y.xmax-y.xmin<=_||y.ymax-y.ymin<=_)continue;let T=(0,g.tB)(y,K,M);(0,E.pC)(o)&&(T=o.inverseTransform(T));const w=new j.Z({x:_,y:_,spatialReference:y.spatialReference});if(null==d&&!(d=(0,g.VO)(w,K,y,M)))return;const{pyramidLevel:F,pyramidResolution:N,excessiveReading:V}=(0,g.kr)(d,L,P||"closest");if(V)return;const{storageInfo:$}=L,{origin:J}=$,Y={x:Math.max(0,Math.floor((T.xmin-J.x)/N.x)),y:Math.max(0,Math.floor((J.y-T.ymax)/N.y))},G=Math.ceil((T.xmax-T.xmin)/N.x-.1),Z=Math.ceil((T.ymax-T.ymin)/N.y-.1),z=F>0?$.pyramidBlockWidth:$.blockWidth,k=F>0?$.pyramidBlockHeight:$.blockHeight,X=1,Q=Math.max(0,Math.floor(Y.x/z)-X),q=Math.max(0,Math.floor(Y.y/k)-X),re=Math.floor((Y.x+G-1)/z)+X,se=Math.floor((Y.y+Z-1)/k)+X;for(let ee=q;ee<=se;ee++)for(let te=Q;te<=re;te++)b.add(`${F}/${ee}/${te}`)}D.forEach((l,y)=>{if(!b.has(y)){const T=D.get(y);(null==T||T.isResolved||T.isRejected)&&D.delete(y)}}),U.extent={xmin:a.xmin,ymin:a.ymin,xmax:a.xmax,ymax:a.ymax}}},51026:(H,W,e)=>{e.d(W,{d:()=>S,h:()=>E});var s=e(2584);const E={type:s.Z,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:S}}}}};function S(g,j,I,C){if(!g)return null;const{minScale:B,maxScale:O,minLOD:x,maxLOD:p}=j;if(null!=x&&null!=p)return s.Z.fromJSON(C&&C.ignoreMinMaxLOD?g:{...g,lods:g.lods.filter(({level:h})=>null!=h&&h>=x&&h<=p)});if(0!==B&&0!==O){const h=v=>Math.round(1e4*v)/1e4,m=B?h(B):1/0,A=O?h(O):-1/0;return s.Z.fromJSON({...g,lods:g.lods.filter(v=>{const c=h(v.scale);return c<=m&&c>=A})})}return s.Z.fromJSON(g)}},82911:(H,W,e)=>{e.r(W),e.d(W,{getGeometryServiceURL:()=>a,projectGeometry:()=>d});var s=e(15861),E=e(59318),S=e(26584),g=e(84687),j=e(84792),I=e(90912),C=e(91179),B=e(2618),O=e(10920),x=e(17626),p=e(86810),h=e(77712),A=(e(85931),e(76898));let v=class extends p.wq{constructor(M){super(M),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const M=this.geometries.map(D=>D.toJSON()),U=this.geometries[0],u={};return u.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),u.inSR=U.spatialReference.wkid||JSON.stringify(U.spatialReference.toJSON()),u.geometries=JSON.stringify({geometryType:(0,C.Ji)(U),geometries:M}),this.transformation&&(u.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(u.transformForward=this.transformForward),u}};(0,x._)([(0,h.Cb)()],v.prototype,"geometries",void 0),(0,x._)([(0,h.Cb)({json:{read:{source:"outSR"}}})],v.prototype,"outSpatialReference",void 0),(0,x._)([(0,h.Cb)()],v.prototype,"transformation",void 0),(0,x._)([(0,h.Cb)()],v.prototype,"transformForward",void 0),v=(0,x._)([(0,A.j)("esri.rest.support.ProjectParameters")],v);const c=v,f=(0,I.se)(c);function i(M,U,u){return n.apply(this,arguments)}function n(){return(n=(0,s.Z)(function*(M,U,u){U=f(U);const D=(0,B.en)(M),L={...D.query,f:"json",...U.toJSON()},R=U.outSpatialReference,K=(0,C.Ji)(U.geometries[0]),o=(0,B.lA)(L,u);return(0,j.default)(D.path+"/project",o).then(({data:{geometries:b}})=>(0,O.o)(b,K,R))})).apply(this,arguments)}function a(){return _.apply(this,arguments)}function _(){return(_=(0,s.Z)(function*(M=null,U){if(E.Z.geometryServiceUrl)return E.Z.geometryServiceUrl;if(!M)throw new S.Z("internal:geometry-service-url-not-configured");let u;u="portal"in M?M.portal||g.Z.getDefault():M,yield u.load({signal:U});const D=u.helperServices?.geometry?.url;if(!D)throw new S.Z("internal:geometry-service-url-not-configured");return D})).apply(this,arguments)}function d(M,U){return P.apply(this,arguments)}function P(){return(P=(0,s.Z)(function*(M,U,u=null,D){const L=yield a(u,D),R=new c;R.geometries=[M],R.outSpatialReference=U;const K=yield i(L,R,{signal:D});if(K&&Array.isArray(K)&&1===K.length)return K[0];throw new S.Z("internal:geometry-service-projection-failed")})).apply(this,arguments)}},61556:(H,W,e)=>{e.d(W,{B:()=>E});var s=e(21726);function E(O){return j[function S(O){return O instanceof Blob?O.type:function g(O){const x=(0,s.Ml)(O);return B[x]||I}(O.url)}(O)]||C}const j={},I="text/plain",C=j[I],B={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const O in B)j[B[O]]=O},53776:(H,W,e)=>{e.d(W,{Z:()=>c});var p,s=e(17626),E=e(58817),S=e(77712),g=e(90912),j=e(55342),I=e(76898),C=e(80573),B=e(10914),O=e(91558),x=e(86810);let h=p=class extends x.wq{constructor(){super(...arguments),this.description=null,this.label=null,this.minValue=0,this.maxValue=0,this.color=null}clone(){return new p({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,color:(0,E.d9)(this.color)})}};(0,s._)([(0,S.Cb)({type:String,json:{write:!0}})],h.prototype,"description",void 0),(0,s._)([(0,S.Cb)({type:String,json:{write:!0}})],h.prototype,"label",void 0),(0,s._)([(0,S.Cb)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],h.prototype,"minValue",void 0),(0,s._)([(0,S.Cb)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],h.prototype,"maxValue",void 0),(0,s._)([(0,S.Cb)({type:O.Z,json:{type:[g.z8],write:!0}})],h.prototype,"color",void 0),h=p=(0,s._)([(0,I.j)("esri.renderers.support.pointCloud.ColorClassBreakInfo")],h);const m=h;var A;let v=A=class extends C.Z{constructor(f){super(f),this.type="point-cloud-class-breaks",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.colorClassBreakInfos=null}clone(){return new A({...this.cloneProperties(),field:this.field,fieldTransformType:this.fieldTransformType,colorClassBreakInfos:(0,E.d9)(this.colorClassBreakInfos),legendOptions:(0,E.d9)(this.legendOptions)})}};(0,s._)([(0,j.J)({pointCloudClassBreaksRenderer:"point-cloud-class-breaks"})],v.prototype,"type",void 0),(0,s._)([(0,S.Cb)({json:{write:!0},type:String})],v.prototype,"field",void 0),(0,s._)([(0,S.Cb)({type:B.I,json:{write:!0}})],v.prototype,"legendOptions",void 0),(0,s._)([(0,S.Cb)({type:C.Z.fieldTransformTypeKebabDict.apiValues,json:{type:C.Z.fieldTransformTypeKebabDict.jsonValues,read:C.Z.fieldTransformTypeKebabDict.read,write:C.Z.fieldTransformTypeKebabDict.write}})],v.prototype,"fieldTransformType",void 0),(0,s._)([(0,S.Cb)({type:[m],json:{write:!0}})],v.prototype,"colorClassBreakInfos",void 0),v=A=(0,s._)([(0,I.j)("esri.renderers.PointCloudClassBreaksRenderer")],v);const c=v},80573:(H,W,e)=>{e.d(W,{Z:()=>U});var O,s=e(17626),E=e(2076),S=e(86810),g=e(58817),j=e(77712),C=(e(90912),e(76898));e(85931);let x=O=class extends S.wq{constructor(){super(...arguments),this.field=null,this.minValue=0,this.maxValue=255}clone(){return new O({field:this.field,minValue:this.minValue,maxValue:this.maxValue})}};(0,s._)([(0,j.Cb)({type:String,json:{write:!0}})],x.prototype,"field",void 0),(0,s._)([(0,j.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],x.prototype,"minValue",void 0),(0,s._)([(0,j.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],x.prototype,"maxValue",void 0),x=O=(0,s._)([(0,C.j)("esri.renderers.support.pointCloud.ColorModulation")],x);const p=x,h=new E.X({pointCloudFixedSizeAlgorithm:"fixed-size",pointCloudSplatAlgorithm:"splat"});let m=class extends S.wq{};(0,s._)([(0,j.Cb)({type:h.apiValues,readOnly:!0,nonNullable:!0,json:{type:h.jsonValues,read:!1,write:h.write}})],m.prototype,"type",void 0),m=(0,s._)([(0,C.j)("esri.renderers.support.pointCloud.PointSizeAlgorithm")],m);const A=m;var c,v=e(55342);let f=c=class extends A{constructor(){super(...arguments),this.type="fixed-size",this.size=0,this.useRealWorldSymbolSizes=null}clone(){return new c({size:this.size,useRealWorldSymbolSizes:this.useRealWorldSymbolSizes})}};(0,s._)([(0,v.J)({pointCloudFixedSizeAlgorithm:"fixed-size"})],f.prototype,"type",void 0),(0,s._)([(0,j.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],f.prototype,"size",void 0),(0,s._)([(0,j.Cb)({type:Boolean,json:{write:!0}})],f.prototype,"useRealWorldSymbolSizes",void 0),f=c=(0,s._)([(0,C.j)("esri.renderers.support.pointCloud.PointSizeFixedSizeAlgorithm")],f);const i=f;var n;let a=n=class extends A{constructor(){super(...arguments),this.type="splat",this.scaleFactor=1}clone(){return new n({scaleFactor:this.scaleFactor})}};(0,s._)([(0,v.J)({pointCloudSplatAlgorithm:"splat"})],a.prototype,"type",void 0),(0,s._)([(0,j.Cb)({type:Number,value:1,nonNullable:!0,json:{write:!0}})],a.prototype,"scaleFactor",void 0),a=n=(0,s._)([(0,C.j)("esri.renderers.support.pointCloud.PointSizeSplatAlgorithm")],a);const d={key:"type",base:A,typeMap:{"fixed-size":i,splat:a}},P=(0,E.w)()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks",pointCloudRGBRenderer:"point-cloud-rgb",pointCloudStretchRenderer:"point-cloud-stretch",pointCloudUniqueValueRenderer:"point-cloud-unique-value"});let M=class extends S.wq{constructor(u){super(u),this.type=void 0,this.pointSizeAlgorithm=null,this.colorModulation=null,this.pointsPerInch=10}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}cloneProperties(){return{pointSizeAlgorithm:(0,g.d9)(this.pointSizeAlgorithm),colorModulation:(0,g.d9)(this.colorModulation),pointsPerInch:(0,g.d9)(this.pointsPerInch)}}};(0,s._)([(0,j.Cb)({type:P.apiValues,readOnly:!0,nonNullable:!0,json:{type:P.jsonValues,read:!1,write:P.write}})],M.prototype,"type",void 0),(0,s._)([(0,j.Cb)({types:d,json:{write:!0}})],M.prototype,"pointSizeAlgorithm",void 0),(0,s._)([(0,j.Cb)({type:p,json:{write:!0}})],M.prototype,"colorModulation",void 0),(0,s._)([(0,j.Cb)({json:{write:!0},nonNullable:!0,type:Number})],M.prototype,"pointsPerInch",void 0),M=(0,s._)([(0,C.j)("esri.renderers.PointCloudRenderer")],M),(M||(M={})).fieldTransformTypeKebabDict=new E.X({none:"none",lowFourBit:"low-four-bit",highFourBit:"high-four-bit",absoluteValue:"absolute-value",moduloTen:"modulo-ten"});const U=M},23899:(H,W,e)=>{e.d(W,{Z:()=>h});var x,s=e(17626),E=e(58817),S=e(77712),j=(e(90912),e(55342)),I=e(76898),C=e(80573),B=e(10914),O=e(8029);let p=x=class extends C.Z{constructor(m){super(m),this.type="point-cloud-stretch",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.stops=null}clone(){return new x({...this.cloneProperties(),field:(0,E.d9)(this.field),fieldTransformType:(0,E.d9)(this.fieldTransformType),stops:(0,E.d9)(this.stops),legendOptions:(0,E.d9)(this.legendOptions)})}};(0,s._)([(0,j.J)({pointCloudStretchRenderer:"point-cloud-stretch"})],p.prototype,"type",void 0),(0,s._)([(0,S.Cb)({json:{write:!0},type:String})],p.prototype,"field",void 0),(0,s._)([(0,S.Cb)({type:B.I,json:{write:!0}})],p.prototype,"legendOptions",void 0),(0,s._)([(0,S.Cb)({type:C.Z.fieldTransformTypeKebabDict.apiValues,json:{type:C.Z.fieldTransformTypeKebabDict.jsonValues,read:C.Z.fieldTransformTypeKebabDict.read,write:C.Z.fieldTransformTypeKebabDict.write}})],p.prototype,"fieldTransformType",void 0),(0,s._)([(0,S.Cb)({type:[O.Z],json:{write:!0}})],p.prototype,"stops",void 0),p=x=(0,s._)([(0,I.j)("esri.renderers.PointCloudStretchRenderer")],p);const h=p},98610:(H,W,e)=>{e.d(W,{Z:()=>c});var p,s=e(17626),E=e(58817),S=e(77712),g=e(90912),j=e(55342),I=e(76898),C=e(80573),B=e(10914),O=e(91558),x=e(86810);let h=p=class extends x.wq{constructor(){super(...arguments),this.description=null,this.label=null,this.values=null,this.color=null}clone(){return new p({description:this.description,label:this.label,values:(0,E.d9)(this.values),color:(0,E.d9)(this.color)})}};(0,s._)([(0,S.Cb)({type:String,json:{write:!0}})],h.prototype,"description",void 0),(0,s._)([(0,S.Cb)({type:String,json:{write:!0}})],h.prototype,"label",void 0),(0,s._)([(0,S.Cb)({type:[String],json:{write:!0}})],h.prototype,"values",void 0),(0,s._)([(0,S.Cb)({type:O.Z,json:{type:[g.z8],write:!0}})],h.prototype,"color",void 0),h=p=(0,s._)([(0,I.j)("esri.renderers.support.pointCloud.ColorUniqueValueInfo")],h);const m=h;var A;let v=A=class extends C.Z{constructor(f){super(f),this.type="point-cloud-unique-value",this.field=null,this.fieldTransformType=null,this.colorUniqueValueInfos=null,this.legendOptions=null}clone(){return new A({...this.cloneProperties(),field:(0,E.d9)(this.field),fieldTransformType:(0,E.d9)(this.fieldTransformType),colorUniqueValueInfos:(0,E.d9)(this.colorUniqueValueInfos),legendOptions:(0,E.d9)(this.legendOptions)})}};(0,s._)([(0,j.J)({pointCloudUniqueValueRenderer:"point-cloud-unique-value"})],v.prototype,"type",void 0),(0,s._)([(0,S.Cb)({json:{write:!0},type:String})],v.prototype,"field",void 0),(0,s._)([(0,S.Cb)({type:C.Z.fieldTransformTypeKebabDict.apiValues,json:{type:C.Z.fieldTransformTypeKebabDict.jsonValues,read:C.Z.fieldTransformTypeKebabDict.read,write:C.Z.fieldTransformTypeKebabDict.write}})],v.prototype,"fieldTransformType",void 0),(0,s._)([(0,S.Cb)({type:[m],json:{write:!0}})],v.prototype,"colorUniqueValueInfos",void 0),(0,s._)([(0,S.Cb)({type:B.I,json:{write:!0}})],v.prototype,"legendOptions",void 0),v=A=(0,s._)([(0,I.j)("esri.renderers.PointCloudUniqueValueRenderer")],v);const c=v},72581:(H,W,e)=>{e.d(W,{IJ:()=>p,m5:()=>v,vB:()=>f,w7:()=>m});var s=e(15861),E=e(84792),S=e(62208),g=e(21726),j=e(91179),I=e(93555),C=e(76391),B=e(61515);const O="Layer does not support extent calculation.";function x(n,a){const _=n.geometry,d=n.toJSON(),P=d;if((0,S.pC)(_)&&(P.geometry=JSON.stringify(_),P.geometryType=(0,j.Ji)(_),P.inSR=_.spatialReference.wkid||JSON.stringify(_.spatialReference)),d.topFilter?.groupByFields&&(P.topFilter.groupByFields=d.topFilter.groupByFields.join(",")),d.topFilter?.orderByFields&&(P.topFilter.orderByFields=d.topFilter.orderByFields.join(",")),d.topFilter&&(P.topFilter=JSON.stringify(P.topFilter)),d.objectIds&&(P.objectIds=d.objectIds.join(",")),d.orderByFields&&(P.orderByFields=d.orderByFields.join(",")),d.outFields&&!(a?.returnCountOnly||a?.returnExtentOnly||a?.returnIdsOnly)?P.outFields=d.outFields.includes("*")?"*":d.outFields.join(","):delete P.outFields,d.outSR?P.outSR=d.outSR.wkid||JSON.stringify(d.outSR):_&&d.returnGeometry&&(P.outSR=P.inSR),d.returnGeometry&&delete d.returnGeometry,d.timeExtent){const M=d.timeExtent,{start:U,end:u}=M;null==U&&null==u||(P.time=U===u?U:`${U??"null"},${u??"null"}`),delete d.timeExtent}return P}function p(n,a,_,d){return h.apply(this,arguments)}function h(){return(h=(0,s.Z)(function*(n,a,_,d){const P=yield i(n,a,"json",d);return(0,B.p)(a,_,P.data),P})).apply(this,arguments)}function m(n,a,_){return A.apply(this,arguments)}function A(){return(A=(0,s.Z)(function*(n,a,_){return(0,S.pC)(a.timeExtent)&&a.timeExtent.isEmpty?{data:{objectIds:[]}}:i(n,a,"json",_,{returnIdsOnly:!0})})).apply(this,arguments)}function v(n,a,_){return c.apply(this,arguments)}function c(){return(c=(0,s.Z)(function*(n,a,_){return(0,S.pC)(a.timeExtent)&&a.timeExtent.isEmpty?{data:{count:0,extent:null}}:i(n,a,"json",_,{returnExtentOnly:!0,returnCountOnly:!0}).then(d=>{const P=d.data;if(P.hasOwnProperty("extent"))return d;if(P.features)throw new Error(O);if(P.hasOwnProperty("count"))throw new Error(O);return d})})).apply(this,arguments)}function f(n,a,_){return(0,S.pC)(a.timeExtent)&&a.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):i(n,a,"json",_,{returnIdsOnly:!0,returnCountOnly:!0})}function i(n,a,_,d={},P={}){const M="string"==typeof n?(0,g.mN)(n):n,U=a.geometry?[a.geometry]:[];return d.responseType="pbf"===_?"array-buffer":"json",(0,I.aX)(U,null,d).then(u=>{const D=u&&u[0];(0,S.pC)(D)&&((a=a.clone()).geometry=D);const L=(0,C.A)({...M.query,f:_,...P,...x(a,P)});return(0,E.default)((0,g.v_)(M.path,"queryTopFeatures"),{...d,query:{...L,...d.query}})})}},45e3:(H,W,e)=>{e.d(W,{G:()=>S});var s=e(44589),E=e(67969);class S extends s.Z{constructor(){super(...arguments),this._prevFBO=void 0,this.requiresDedicatedFBO=!1}dispose(){}doRender(j){const I=this.createRenderParams(j),{context:C,painter:B,profiler:O}=I;this._prevFBO=C.getBoundFramebufferObject(),O.recordContainerStart(this.name);const x=this._getFbo(I),p=B.getRenderTarget();C.bindFramebuffer(x),B.setRenderTarget(x),C.setDepthWriteEnabled(!0),C.setColorMask(!0,!0,!0,!0),C.setClearColor(0,0,0,0),C.setClearDepth(1),C.clear(C.gl.COLOR_BUFFER_BIT|C.gl.DEPTH_BUFFER_BIT),C.setDepthWriteEnabled(!1);for(const h of this.children)h.beforeRender(j);for(const h of this.children)h.processRender(I);for(const h of this.children)h.afterRender(j);B.setRenderTarget(p),B.releaseFbo(x),C.bindFramebuffer(this._prevFBO),B.beforeRenderLayer(I,this._clippingInfos?255:0,this.computedOpacity),x.colorTexture&&(C.setStencilTestEnabled(!1),C.setStencilWriteMask(0),B.blitTexture(C,x.colorTexture,E.cw.NEAREST)),B.compositeLayer(I,this.computedOpacity),O.recordContainerEnd()}createRenderParams(j){return{...super.createRenderParams(j),blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:1}}_getFbo(j){const{context:I,painter:C}=j,{width:B,height:O}=I.getViewport();return C.acquireFbo(B,O)}}},55746:(H,W,e)=>{e.d(W,{k:()=>m,p:()=>A});var s=e(65389),E=e(61885),g=(e(8314),e(62208)),j=e(76279),I=e(5548),C=e(16669),B=e(52397);const O=(0,I.Ue)();function x(v,c){return v<<16|c}function p(v){return(4294901760&v)>>>16}function h(v){return 65535&v}const m={getObjectId:v=>v.getObjectId(),getAttributes:v=>v.readAttributes(),getAttribute:(v,c)=>v.readAttribute(c),cloneWithGeometry:(v,c)=>v,getGeometry:v=>v.readHydratedGeometry(),getCentroid:(v,c)=>v.readCentroid()};class A extends C.J{constructor(c,f,i){super(c,f),this.featureAdapter=m,this.events=new E.Z,this._featureSetsByInstance=new Map,this._objectIdToDisplayId=new Map,this._spatialIndexInvalid=!0,this._indexSearchCache=new s.Z(50),this._index=(0,j.r)(9,n=>({minX:this._storage.getXMin(n),minY:this._storage.getYMin(n),maxX:this._storage.getXMax(n),maxY:this._storage.getYMax(n)})),this.mode=i}get storeStatistics(){let c=0,f=0,i=0;return this.forEach(n=>{const a=n.readGeometry();a&&(f+=a.isPoint?1:a.lengths.reduce((_,d)=>_+d,0),i+=a.isPoint?1:a.lengths.length,c+=1)}),{featureCount:c,vertexCount:f,ringCount:i}}hasInstance(c){return this._featureSetsByInstance.has(c)}onTileData(c,f){if((0,g.Wi)(f.addOrUpdate))return f;if(f.addOrUpdate.attachStorage(this._storage),"snapshot"===this.mode){const n=f.addOrUpdate.getCursor();for(;n.next();){const a=n.getDisplayId();this.setComputedAttributes(this._storage,n,a,c.scale)}return f}this._featureSetsByInstance.set(f.addOrUpdate.instance,f.addOrUpdate);const i=f.addOrUpdate.getCursor();for(;i.next();)this._insertFeature(i,c.scale);return this._spatialIndexInvalid=!0,this.events.emit("changed"),f}search(c){this._rebuildIndex();const f=c.id,i=this._indexSearchCache.find(d=>d.tileId===f);if((0,g.pC)(i))return i.readers;const n=new Map,a=this._searchIndex(c.bounds),_=[];for(const d of a){const P=this._storage.getInstanceId(d),M=p(P),U=h(P);n.has(M)||n.set(M,[]),n.get(M).push(U)}return n.forEach((d,P)=>{const M=this._featureSetsByInstance.get(P);_.push(B.t.from(M,d))}),this._indexSearchCache.enqueue({tileId:f,readers:_}),_}insert(c){const f=c.getCursor(),i=this._storage;for(;f.next();){const n=x(f.instance,f.getIndex()),a=f.getObjectId(),_=this._objectIdToDisplayId.get(a)??this._storage.createDisplayId();f.setDisplayId(_),i.setInstanceId(_,n),this._objectIdToDisplayId.set(a,_)}this._featureSetsByInstance.set(c.instance,c),this._spatialIndexInvalid=!0}remove(c){const f=this._objectIdToDisplayId.get(c);if(!f)return;const i=this._storage.getInstanceId(f),n=h(i),a=p(i),_=this._featureSetsByInstance.get(a);this._objectIdToDisplayId.delete(c),this._storage.releaseDisplayId(f),_.removeAtIndex(n),_.isEmpty&&this._featureSetsByInstance.delete(a),this._spatialIndexInvalid=!0}forEach(c){this._objectIdToDisplayId.forEach(f=>{const i=this._storage.getInstanceId(f),n=this._lookupFeature(i);c(n)})}forEachUnsafe(c){this._objectIdToDisplayId.forEach(f=>{const i=this._storage.getInstanceId(f),n=p(i),a=h(i),_=this._getFeatureSet(n);_.setIndex(a),c(_)})}forEachInBounds(c,f){const i=this._searchIndex(c);for(const n of i){const a=this.lookupFeatureByDisplayId(n,this._storage);f((0,g.Wg)(a))}}forEachBounds(c,f){this._rebuildIndex();for(const i of c){if(!i.readGeometry())continue;const n=i.getDisplayId();(0,I.bZ)(O,this._storage.getXMin(n),this._storage.getYMin(n),this._storage.getXMax(n),this._storage.getYMax(n)),f(O)}}sweepFeatures(c,f,i){this._spatialIndexInvalid=!0,this._objectIdToDisplayId.forEach((n,a)=>{c.has(n)||(f.releaseDisplayId(n),i&&i.unsetAttributeData(n),this._objectIdToDisplayId.delete(a))}),this.events.emit("changed")}sweepFeatureSets(c){this._spatialIndexInvalid=!0,this._featureSetsByInstance.forEach((f,i)=>{c.has(i)||this._featureSetsByInstance.delete(i)})}lookupObjectId(c,f){const i=this.lookupFeatureByDisplayId(c,f);return(0,g.Wi)(i)?null:i.getObjectId()}lookupDisplayId(c){return this._objectIdToDisplayId.get(c)}lookupFeatureByDisplayId(c,f){const i=f.getInstanceId(c);return this._lookupFeature(i)}lookupByDisplayIdUnsafe(c){const f=this._storage.getInstanceId(c),i=p(f),n=h(f),a=this._getFeatureSet(i);return a?(a.setIndex(n),a):null}_insertFeature(c,f){const i=this._storage,n=c.getObjectId(),a=x(c.instance,c.getIndex());i.getInstanceId(c.getDisplayId());let _=this._objectIdToDisplayId.get(n);_||(_=i.createDisplayId(),this._objectIdToDisplayId.set(n,_),this._spatialIndexInvalid=!0),c.setDisplayId(_),i.setInstanceId(_,a),this.setComputedAttributes(i,c,_,f)}_searchIndex(c){return this._rebuildIndex(),this._index.search({minX:c[0],minY:c[1],maxX:c[2],maxY:c[3]})}_rebuildIndex(){if(!this._spatialIndexInvalid)return;const c=[];"snapshot"===this.mode?this._featureSetsByInstance.forEach(f=>{const i=f.getCursor();for(;i.next();){const n=i.getDisplayId();this._storage.setBounds(n,i)&&c.push(n)}}):this._objectIdToDisplayId.forEach(f=>{const i=this._storage.getInstanceId(f);this._storage.setBounds(f,this._lookupFeature(i))&&c.push(f)}),this._index.clear(),this._index.load(c),this._indexSearchCache.clear(),this._spatialIndexInvalid=!1}_lookupFeature(c){const f=p(c),i=this._getFeatureSet(f);if(!i)return;const n=i.getCursor(),a=h(c);return n.setIndex(a),n}_getFeatureSet(c){return this._featureSetsByInstance.get(c)}}},16669:(H,W,e)=>{e.d(W,{J:()=>O});var s=e(15861),E=e(8314),S=e(62208),g=e(84682),j=e(46679),I=e(63290);const B=e.e(2445).then(e.bind(e,22445));class O{constructor(p,h){this._canCacheExpressionValue=!1,this._sourceInfo=p,this._storage=h,this._bitsets={computed:h.getBitset(h.createBitset())}}get storage(){return this._storage}invalidate(){this._bitsets.computed.clear()}updateSchema(p,h){var m=this;return(0,s.Z)(function*(){const A=(0,g.Hg)(m._schema,h);if(m._schema=h,!h||(0,S.Wi)(A)||!(0,g.uD)(A,"attributes"))return;(0,E.Z)("esri-2d-update-debug")&&console.debug("Applying Update - Store:",A),m._bitsets.computed.clear(),p.targets[h.name]=!0;const v=h.attributes,c=[],f=[];for(const i in v){const n=v[i];switch(n.type){case"field":break;case"expression":c.push(m._createArcadeComputedField(n));break;case"label-expression":c.push(m._createLabelArcadeComputedField(n));break;case"statistic":f.push(n)}}m._computedFields=yield Promise.all(c),m._canCacheExpressionValue=!m._computedFields.some(i=>"expression"===i.type&&(0,S.pC)(i.expression)&&i.expression.referencesScale()),m._statisticFields=f})()}setComputedAttributes(p,h,m,A){const v=this._bitsets.computed;if(!this._canCacheExpressionValue||!v.has(m)){v.set(m);for(const c of this._computedFields){const f=this._evaluateField(h,c,A);switch(c.resultType){case"numeric":p.setComputedNumericAtIndex(m,c.fieldIndex,f);break;case"string":p.setComputedStringAtIndex(m,c.fieldIndex,f)}}}}_createArcadeComputedField(p){var h=this;return(0,s.Z)(function*(){const m=h._sourceInfo.spatialReference,A=h._sourceInfo.fieldsIndex;return{...p,expression:yield(0,j.Yi)(p.valueExpression,m,A)}})()}_createLabelArcadeComputedField(p){var h=this;return(0,s.Z)(function*(){const m=h._sourceInfo.spatialReference,A=h._sourceInfo.fieldsIndex,{createLabelFunction:v}=yield B,c=yield v(p.label,A,m);return{...p,builder:c}})()}_evaluateField(p,h,m){switch(h.type){case"label-expression":{const A=p.readArcadeFeature();return h.builder.evaluate(A)||""}case"expression":{const{expression:A}=h;return function C(x,p,h){if((0,S.Wi)(x))return null;const m=p.readArcadeFeature();try{return x.evaluate({...h,$feature:m})}catch(A){return I.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",A),null}}(A,p,{$view:{scale:m}})}}}}},13112:(H,W,e)=>{e.d(W,{Z:()=>B});var s=e(17626),E=e(80542),S=e(77712),I=(e(90912),e(85931),e(76898));let C=class extends E.r{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const O=this.get("tileStore.tileScheme.spatialReference");return O&&O.toJSON()||null}};(0,s._)([(0,S.Cb)({readOnly:!0})],C.prototype,"supportsTileUpdates",null),(0,s._)([(0,S.Cb)({constructOnly:!0})],C.prototype,"remoteClient",void 0),(0,s._)([(0,S.Cb)({constructOnly:!0})],C.prototype,"service",void 0),(0,s._)([(0,S.Cb)()],C.prototype,"spatialReference",null),(0,s._)([(0,S.Cb)({constructOnly:!0})],C.prototype,"tileInfo",void 0),(0,s._)([(0,S.Cb)({constructOnly:!0})],C.prototype,"tileStore",void 0),C=(0,s._)([(0,I.j)("esri.views.2d.layers.features.processors.BaseProcessor")],C);const B=C},52397:(H,W,e)=>{e.d(W,{t:()=>E});var s=e(25208);class E extends s.s{static from(g,j){return new E(g.copy(),j)}constructor(g,j){super(s.s.createInstance(),g.fullSchema()),this._currentIndex=-1,this._reader=g,this._indices=j}get hasNext(){return this._currentIndex+1<this._indices.length}getSize(){return this._indices.length}getCursor(){return this.copy()}copy(){const g=new E(this._reader.copy(),this._indices);return g._currentIndex=this._currentIndex,g}next(){for(;this._nextIndex()&&!this._reader._getExists(););return this._currentIndex<this._indices.length}_nextIndex(){return++this._currentIndex<this._indices.length&&(this._reader.setIndex(this._indices[this._currentIndex]),!0)}setArcadeSpatialReference(g){this._reader.setArcadeSpatialReference(g)}attachStorage(g){this._reader.attachStorage(g)}get geometryType(){return this._reader.geometryType}get hasFeatures(){return this._reader.hasFeatures}get exceededTransferLimit(){return this._reader.exceededTransferLimit}get hasZ(){return this._reader.hasZ}get hasM(){return this._reader.hasM}getStorage(){return this._reader.getStorage()}getComputedNumeric(g){return this._reader.getComputedNumericAtIndex(0)}setComputedNumeric(g,j){return this._reader.setComputedNumericAtIndex(j,0)}getComputedString(g){return this._reader.getComputedStringAtIndex(0)}setComputedString(g,j){return this._reader.setComputedStringAtIndex(0,j)}getComputedNumericAtIndex(g){return this._reader.getComputedNumericAtIndex(g)}setComputedNumericAtIndex(g,j){this._reader.setComputedNumericAtIndex(g,j)}getComputedStringAtIndex(g){return this._reader.getComputedStringAtIndex(g)}setComputedStringAtIndex(g,j){return this._reader.setComputedStringAtIndex(g,j)}transform(g,j,I,C){const B=this.copy();return B._reader=this._reader.transform(g,j,I,C),B}readAttribute(g,j=!1){return this._reader.readAttribute(g,j)}readAttributes(){return this._reader.readAttributes()}joinAttributes(g){return this._reader.joinAttributes(g)}readArcadeFeature(){return this._reader.readArcadeFeature()}geometry(){return this._reader.geometry()}field(g){return this.readAttribute(g,!0)}hasField(g){return this._reader.hasField(g)}setField(g,j){return this._reader.setField(g,j)}keys(){return this._reader.keys()}castToText(g=!1){return this._reader.castToText(g)}getQuantizationTransform(){return this._reader.getQuantizationTransform()}getFieldNames(){return this._reader.getFieldNames()}getAttributeHash(){return this._reader.getAttributeHash()}getObjectId(){return this._reader.getObjectId()}getDisplayId(){return this._reader.getDisplayId()}setDisplayId(g){return this._reader.setDisplayId(g)}getGroupId(){return this._reader.getGroupId()}setGroupId(g){return this._reader.setGroupId(g)}getXHydrated(){return this._reader.getXHydrated()}getYHydrated(){return this._reader.getYHydrated()}getX(){return this._reader.getX()}getY(){return this._reader.getY()}setIndex(g){return this._reader.setIndex(g)}getIndex(){return this._reader.getIndex()}readLegacyFeature(){return this._reader.readLegacyFeature()}readOptimizedFeature(){return this._reader.readOptimizedFeature()}readLegacyPointGeometry(){return this._reader.readLegacyPointGeometry()}readLegacyGeometry(){return this._reader.readLegacyGeometry()}readLegacyCentroid(){return this._reader.readLegacyCentroid()}readGeometryArea(){return this._reader.readGeometryArea()}readUnquantizedGeometry(){return this._reader.readUnquantizedGeometry()}readHydratedGeometry(){return this._reader.readHydratedGeometry()}readGeometry(){return this._reader.readGeometry()}readCentroid(){return this._reader.readCentroid()}_readAttribute(g,j){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}_readAttributes(){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}}},84225:(H,W,e)=>{e.d(W,{Z:()=>B});var s=e(17626),E=e(80542),S=e(77712),I=(e(90912),e(85931),e(76898));let C=class extends E.r{constructor(O){super(O),this.tiles=new Map}destroy(){this.tiles.clear(),this.layer=this.layerView=this.tileInfoView=this.tiles=null}get updating(){return this.isUpdating()}acquireTile(O){const x=this.createTile(O);return x.once("isReady",()=>this.notifyChange("updating")),this.tiles.set(O.id,x),x}forceAttributeTextureUpload(){}forEachTile(O){this.tiles.forEach(O)}releaseTile(O){this.tiles.delete(O.key.id),this.disposeTile(O)}isUpdating(){let O=!0;return this.tiles.forEach(x=>{O=O&&x.isReady}),!O}setHighlight(){}invalidateLabels(){}requestUpdate(){this.layerView.requestUpdate()}};(0,s._)([(0,S.Cb)()],C.prototype,"layer",void 0),(0,s._)([(0,S.Cb)()],C.prototype,"layerView",void 0),(0,s._)([(0,S.Cb)()],C.prototype,"tileInfoView",void 0),(0,s._)([(0,S.Cb)()],C.prototype,"updating",null),C=(0,s._)([(0,I.j)("esri.views.2d.layers.features.tileRenderers.BaseTileRenderer")],C);const B=C},67802:(H,W,e)=>{e.d(W,{Z:()=>U});var s=e(15861),E=e(17626),S=e(14517),j=(e(8314),e(10699)),I=e(77712),O=(e(90912),e(85931),e(76898)),x=e(65401),p=e(37053),h=e(2584);const m=Math.PI/180;var f=e(90301),i=e(9598),n=e(58098);const a=(0,x.Ue)(),_=[0,0],d=new n.Z(0,0,0,0);let M=class extends S.Z{constructor(u){var D;super(u),D=this,this._imagePromise=null,this.bitmaps=[],this.hidpi=false,this.imageMaxWidth=2048,this.imageMaxHeight=2048,this.imageRotationSupported=false,this.imageNormalizationSupported=false,this.update=(0,j.Ds)(function(){var L=(0,s.Z)(function*(R,K){if((0,j.k_)(K),!R.stationary||D.destroyed)return;const o=R.state,b=(0,p.C5)(o.spatialReference),l=D.hidpi?R.pixelRatio:1,y=D.imageNormalizationSupported&&o.worldScreenWidth&&o.worldScreenWidth<o.size[0],T=D.imageMaxWidth??0,w=D.imageMaxHeight??0;y?(_[0]=o.worldScreenWidth,_[1]=o.size[1]):D.imageRotationSupported?(_[0]=o.size[0],_[1]=o.size[1]):function v(u,D){const L=function A(u){return u*m}(D.rotation),R=Math.abs(Math.cos(L)),K=Math.abs(Math.sin(L)),[o,b]=D.size;return u[0]=Math.round(b*K+o*R),u[1]=Math.round(b*R+o*K),u}(_,o);const F=Math.floor(_[0]*l)>T||Math.floor(_[1]*l)>w,V=!D.imageNormalizationSupported&&b&&(o.extent.xmin<b.valid[0]||o.extent.xmax>b.valid[1]),$=!F&&!V,J=D.imageRotationSupported?o.rotation:0,Y=D.container.children.slice();if($){const G=y?o.paddedViewState.center:o.center;D._imagePromise&&console.error("Image promise was not defined!"),D._imagePromise=D._singleExport(o,_,G,o.resolution,J,l,K)}else{let G=Math.min(T,w);V&&(G=Math.min(o.worldScreenWidth,G)),D._imagePromise=D._tiledExport(o,G,l,K)}try{const G=(yield D._imagePromise)??[];(0,j.k_)(K);const Z=[];if(D._imagePromise=null,D.destroyed)return;D.bitmaps=G;for(const z of Y)G.includes(z)||Z.push(z.fadeOut().then(()=>{z.remove(),z.destroy()}));for(const z of G)Z.push(z.fadeIn());yield Promise.all(Z)}catch(G){D._imagePromise=null,(0,j.r9)(G)}});return function(R,K){return L.apply(this,arguments)}}(),5e3),this.updateExports=(0,j.Ds)(function(){var L=(0,s.Z)(function*(R){const K=[];for(const o of D.container.children){if(!o.visible||!o.stage)return;K.push(R(o).then(()=>{o.invalidateTexture(),o.requestRender()}))}D._imagePromise=(0,j.as)(K).then(()=>D._imagePromise=null),yield D._imagePromise});return function(R){return L.apply(this,arguments)}}())}destroy(){this.bitmaps.forEach(u=>u.destroy()),this.bitmaps=[]}get updating(){return!this.destroyed&&null!==this._imagePromise}_export(u,D,L,R,K,o){var b=this;return(0,s.Z)(function*(){const l=yield b.fetchSource(u,Math.floor(D*K),Math.floor(L*K),{rotation:R,pixelRatio:K,signal:o});(0,j.k_)(o);const y=new f.eY(null,{immutable:!0,requestRenderOnSourceChangedEnabled:!0});return y.x=u.xmin,y.y=u.ymax,y.resolution=u.width/D,y.rotation=R,y.pixelRatio=K,y.opacity=0,b.container.addChild(y),yield y.setSourceAsync(l,o),(0,j.k_)(o),y})()}_singleExport(u,D,L,R,K,o,b){var l=this;return(0,s.Z)(function*(){!function c(u,D,L,R){const[K,o]=D,[b,l]=R,y=.5*L;u[0]=K-y*b,u[1]=o-y*l,u[2]=K+y*b,u[3]=o+y*l}(a,L,R,D);const y=(0,x.HH)(a,u.spatialReference);return[yield l._export(y,D[0],D[1],K,o,b)]})()}_tiledExport(u,D,L,R){const K=h.Z.create({size:D,spatialReference:u.spatialReference,scales:[u.scale]}),o=new i.Z(K),b=o.getTileCoverage(u);if(!b)return null;const l=[];return b.forEach((y,T,w,F)=>{d.set(y,T,w,0),o.getTileBounds(a,d);const N=(0,x.HH)(a,u.spatialReference);l.push(this._export(N,D,D,0,L,R).then(V=>(0!==F&&(d.set(y,T,w,F),o.getTileBounds(a,d),V.x=a[0],V.y=a[3]),V)))}),Promise.all(l)}};(0,E._)([(0,I.Cb)()],M.prototype,"_imagePromise",void 0),(0,E._)([(0,I.Cb)()],M.prototype,"bitmaps",void 0),(0,E._)([(0,I.Cb)()],M.prototype,"container",void 0),(0,E._)([(0,I.Cb)()],M.prototype,"fetchSource",void 0),(0,E._)([(0,I.Cb)()],M.prototype,"hidpi",void 0),(0,E._)([(0,I.Cb)()],M.prototype,"imageMaxWidth",void 0),(0,E._)([(0,I.Cb)()],M.prototype,"imageMaxHeight",void 0),(0,E._)([(0,I.Cb)()],M.prototype,"imageRotationSupported",void 0),(0,E._)([(0,I.Cb)()],M.prototype,"imageNormalizationSupported",void 0),(0,E._)([(0,I.Cb)()],M.prototype,"requestUpdate",void 0),(0,E._)([(0,I.Cb)()],M.prototype,"updating",null),M=(0,E._)([(0,O.j)("esri.views.2d.layers.support.ExportStrategy")],M);const U=M},2975:(H,W,e)=>{e.d(W,{HL:()=>S,aj:()=>g});var s=e(60479),E=e(19625);function S(p,h){return h.push(p.buffer),{buffer:p.buffer,layout:j(p.layout)}}function g(p){return function I(p){const h=(0,E.U$)();return h.stride=p.stride,h.fieldNames=p.fieldNames,p.fields.forEach(m=>h.fields.set(m[0],{...m[1],constructor:O(m[1].constructor)})),h}(p.layout).createView(p.buffer)}function j(p){const h=new Array;return p.fields.forEach((m,A)=>{const v={...m,constructor:B(m.constructor)};h.push([A,v])}),{stride:p.stride,fields:h,fieldNames:p.fieldNames}}const C=[s.ly,s.Eu,s.ct,s.ek,s.gK,s.bj,s.oS,s.q6,s.fP,s.Cd,s.ey,s.O1,s.D_,s.xA,s.ne,s.mc,s.av,s.TS,s.mw,s.v6,s.Nu,s.qt,s.G5,s.hu,s.Hz,s.Vs,s.P_,s.ir,s.o7,s.or,s.n1,s.zO,s.Jj,s.wA,s.PP,s.TN];function B(p){return`${p.ElementType}_${p.ElementCount}`}function O(p){return x.get(p)}const x=new Map;C.forEach(p=>x.set(B(p),p))},9119:(H,W,e)=>{e.r(W),e.d(W,{default:()=>b});var s=e(17626),S=(e(20383),e(61885)),g=e(72392),j=e(58817),I=e(62208),C=e(32917),B=e(77712),x=(e(90912),e(76898)),p=e(51470),h=e(36073),m=e(49621),A=e(10228);class v{constructor(y,T,w,F,N){this.graphic=y,this.index=T,this.x=w,this.y=F,this.viewEvent=N,this.type="graphic-click"}}class c{constructor(y,T,w,F,N){this.graphic=y,this.index=T,this.x=w,this.y=F,this.viewEvent=N,this.type="graphic-double-click"}}class f{constructor(y,T,w,F,N,V,$,J,Y,G){this.graphic=y,this.allGraphics=T,this.index=w,this.x=F,this.y=N,this.dx=V,this.dy=$,this.totalDx=J,this.totalDy=Y,this.viewEvent=G,this.defaultPrevented=!1,this.type="graphic-move-start"}preventDefault(){this.defaultPrevented=!0}}class i{constructor(y,T,w,F,N,V,$,J,Y,G){this.graphic=y,this.allGraphics=T,this.index=w,this.x=F,this.y=N,this.dx=V,this.dy=$,this.totalDx=J,this.totalDy=Y,this.viewEvent=G,this.defaultPrevented=!1,this.type="graphic-move"}preventDefault(){this.defaultPrevented=!0}}class n{constructor(y,T,w,F,N,V,$,J,Y,G){this.graphic=y,this.allGraphics=T,this.index=w,this.x=F,this.y=N,this.dx=V,this.dy=$,this.totalDx=J,this.totalDy=Y,this.viewEvent=G,this.defaultPrevented=!1,this.type="graphic-move-stop"}preventDefault(){this.defaultPrevented=!0}}class a{constructor(y,T,w,F,N){this.graphic=y,this.index=T,this.x=w,this.y=F,this.viewEvent=N,this.type="graphic-pointer-over"}}class _{constructor(y,T,w,F,N){this.graphic=y,this.index=T,this.x=w,this.y=F,this.viewEvent=N,this.type="graphic-pointer-out"}}class d{constructor(y,T,w,F,N){this.graphic=y,this.index=T,this.x=w,this.y=F,this.viewEvent=N,this.type="graphic-pointer-down"}}class P{constructor(y,T,w,F,N){this.graphic=y,this.index=T,this.x=w,this.y=F,this.viewEvent=N,this.type="graphic-pointer-up"}}var M=e(18547),U=e(90585),u=e(41900),D=e(57213),L=e(52068),R=e(88493);const K="indicator-symbols";let o=class extends S.Z.EventedAccessor{constructor(l){super(l),this._activeGraphic=null,this._dragEvent=null,this._handles=new g.Z,this._hoverGraphic=null,this._indicators=[],this._initialDragGeometry=null,this._viewHandles=new g.Z,this._manipulators=[],this._layerViews=null,this.type="graphic-mover",this.callbacks={onGraphicClick(){},onGraphicDoubleClick(){},onGraphicMoveStart(){},onGraphicMove(){},onGraphicMoveStop(){},onGraphicPointerOver(){},onGraphicPointerOut(){},onGraphicPointerDown(){},onGraphicPointerUp(){}},this.enableMoveAllGraphics=!1,this.graphics=[],this.indicatorsEnabled=!1,this.layer=new p.Z({listMode:"hide",internal:!0,title:"GraphicMover highlight layer"}),this.view=null}initialize(){(0,A.p)(this.view,this.layer),this._highlightHelper=new m.Z({view:this.view}),this.refresh(),this._handles.add([(0,C.YP)(()=>[this.graphics,this.graphics?.length],()=>this.refresh()),(0,C.gx)(()=>this.view?.ready,()=>{this._viewHandles.add([this.view.on("immediate-click",l=>this._clickHandler(l),M.f.TOOL),this.view.on("double-click",l=>this._doubleClickHandler(l),M.f.TOOL),this.view.on("pointer-down",l=>this._pointerDownHandler(l),M.f.TOOL),this.view.on("pointer-move",l=>this._pointerMoveHandler(l),M.f.TOOL),this.view.on("pointer-up",l=>this._pointerUpHandler(l),M.f.TOOL),this.view.on("drag",l=>this._dragHandler(l),M.f.TOOL),this.view.on("key-down",l=>this._keyDownHandler(l),M.f.TOOL)])},{once:!0,initial:!0}),(0,C.YP)(()=>this.view,l=>{this._highlightHelper.removeAll(),this._highlightHelper.view=l})])}destroy(){this._removeIndicators(),this.view.map?.remove(this.layer),this.layer.destroy(),this.reset(),this._manipulators.forEach(l=>l.destroy()),this._manipulators=null,this._handles=(0,I.SC)(this._handles),this._viewHandles=(0,I.SC)(this._viewHandles)}set highlightsEnabled(l){this._highlightHelper?.removeAll(),this._set("highlightsEnabled",l),l&&this._highlightHelper?.add(this.graphics)}get state(){const l=!!this.get("view.ready"),y=!!this.get("graphics.length");return l&&y?this._activeGraphic?"moving":"active":l?"ready":"disabled"}refresh(){this.reset(),this._setup()}reset(){this._activeGraphic=null,this._hoverGraphic=null,this._dragEvent=null,this._highlightHelper.removeAll()}updateGeometry(l,y){const T=this.graphics[l];T&&(T.set("geometry",y),this._setUpIndicators())}_setup(){this._setUpHighlights(),this._setUpIndicators(),this._setUpManipulators(),this._syncLayerViews()}_clickHandler(l){const y=this._findTargetGraphic((0,u.vT)(l));if(y){const T=new v(y,this.graphics.indexOf(y),l.x,l.y,l);this.emit("graphic-click",T),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(T)}}_doubleClickHandler(l){const y=this._findTargetGraphic((0,u.vT)(l));if(y){const T=new c(y,this.graphics.indexOf(y),l.x,l.y,l);this.emit("graphic-double-click",T),this.callbacks.onGraphicDoubleClick&&this.callbacks.onGraphicDoubleClick(T)}}_pointerDownHandler(l){const y=this._findTargetGraphic((0,u.vT)(l));if(y){this._activeGraphic=y;const{x:T,y:w}=l,F=new d(y,this.graphics.indexOf(y),T,w,l);this.emit("graphic-pointer-down",F),this.callbacks.onGraphicPointerDown&&this.callbacks.onGraphicPointerDown(F)}else this._activeGraphic=null}_pointerUpHandler(l){if(this._activeGraphic){const{x:y,y:T}=l,w=this.graphics.indexOf(this._activeGraphic),F=new P(this._activeGraphic,w,y,T,l);this.emit("graphic-pointer-up",F),this.callbacks.onGraphicPointerUp&&this.callbacks.onGraphicPointerUp(F)}}_pointerMoveHandler(l){if(this._dragEvent)return;const y=this._findTargetGraphic((0,u.vT)(l));if(y){const{x:T,y:w}=l;if(this._hoverGraphic){if(this._hoverGraphic===y)return;const V=this.graphics.indexOf(this._hoverGraphic),$=new _(this.graphics[V],V,T,w,l);this._hoverGraphic=null,this.emit("graphic-pointer-out",$),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut($)}const F=this.graphics.indexOf(y),N=new a(y,F,T,w,l);return this._hoverGraphic=y,this.emit("graphic-pointer-over",N),void(this.callbacks.onGraphicPointerOver&&this.callbacks.onGraphicPointerOver(N))}if(this._hoverGraphic){const{x:T,y:w}=l,F=this.graphics.indexOf(this._hoverGraphic),N=new _(this.graphics[F],F,T,w,l);this._hoverGraphic=null,this.emit("graphic-pointer-out",N),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(N)}}_dragHandler(l){if("start"!==l.action&&!this._dragEvent||!this._activeGraphic||!this._activeGraphic.geometry)return;"start"===l.action&&this._removeIndicators(),l.stopPropagation();const{action:y,x:T,y:w}=l,F=this.graphics.indexOf(this._activeGraphic),N=this._dragEvent?T-this._dragEvent.x:0,V=this._dragEvent?w-this._dragEvent.y:0,$=T-l.origin.x,J=w-l.origin.y,Y="start"===y?this._activeGraphic.geometry:this._initialDragGeometry,G=(0,h.e7)(Y,$,J,this.view);if(this._activeGraphic.geometry=G,this.enableMoveAllGraphics&&this.graphics.forEach(Z=>{Z!==this._activeGraphic&&(Z.geometry=(0,h.e7)(Z.geometry,N,V,this.view))}),this._dragEvent=l,"start"===y){this._initialDragGeometry=(0,j.d9)(Y);const Z=new f(this._activeGraphic,this.graphics,F,T,w,N,V,$,J,l);this.emit("graphic-move-start",Z),this.callbacks.onGraphicMoveStart&&this.callbacks.onGraphicMoveStart(Z),Z.defaultPrevented&&this._activeGraphic.set("geometry",Y)}else if("update"===y){const Z=new i(this._activeGraphic,this.graphics,F,T,w,N,V,$,J,l);this.emit("graphic-move",Z),this.callbacks.onGraphicMove&&this.callbacks.onGraphicMove(Z),Z.defaultPrevented&&(this._activeGraphic.geometry=Y)}else{const Z=new n(this._activeGraphic,this.graphics,F,T,w,N,V,$,J,l);this._dragEvent=null,this._activeGraphic=null,this._setUpIndicators(),this.emit("graphic-move-stop",Z),this.callbacks.onGraphicMoveStop&&this.callbacks.onGraphicMoveStop(Z),Z.defaultPrevented&&(this.graphics[F].set("geometry",this._initialDragGeometry),this._setUpIndicators()),this._initialDragGeometry=null}}_keyDownHandler(l){"a"!==l.key&&"d"!==l.key&&"n"!==l.key||"moving"!==this.state||l.stopPropagation()}_findTargetGraphic(l){const y=this.view.toMap(l);let T=null,w=Number.MAX_VALUE;this._syncLayerViews();const F=this._layerViews.flatMap(N=>"graphicsViews"in N?Array.from(N.graphicsViews(),V=>V.hitTest(y)).flat():N.graphicsView.hitTest(y)).filter(N=>this.graphics.includes(N));return F.length?F[0]:(this._manipulators.forEach(N=>{const V=N.intersectionDistance(l);(0,I.pC)(V)&&V<w&&(w=V,T=N.graphic)}),T)}_syncLayerViews(){this._layerViews=[];const l=new Set;for(const y of this.graphics){const T=(0,A.j)(this.view,y.layer);T&&l.add(T)}this._layerViews=[...l]}_setUpManipulators(){const{graphics:l,view:y}=this;this._manipulators.forEach(T=>T.destroy()),this._manipulators=l?.length?l.map(T=>new U.L({graphic:T,view:y})):[]}_setUpHighlights(){this.highlightsEnabled&&this._highlightHelper.add(this.graphics)}_setUpIndicators(){if(this._removeIndicators(),this.indicatorsEnabled){for(const l of this.graphics){const y=l.clone();y.symbol=this._getSymbolForIndicator(l),this._indicators.push(y),this._handles.add((0,C.YP)(()=>l.symbol,()=>this._setUpIndicators()),K)}this.layer.addMany(this._indicators)}}_removeIndicators(){this._handles.remove(K),this._indicators.length&&(this.layer.removeMany(this._indicators),this._indicators.forEach(l=>l.destroy()),this._indicators=[])}_getSymbolForIndicator(l){if((0,I.Wi)(l.symbol))return null;switch(l.symbol.type){case"cim":return new D.Z({style:"circle",size:12,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}});case"picture-marker":{const{xoffset:T,yoffset:w,height:F,width:N}=l.symbol,V=F===N?N:Math.max(F,N);return new D.Z({xoffset:T,yoffset:w,size:V,style:"square",color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}case"simple-marker":{const{xoffset:T,yoffset:w,size:F,style:N}=l.symbol;return new D.Z({xoffset:T,yoffset:w,style:"circle"===N?"circle":"square",size:F+2,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}case"simple-fill":return new R.Z({color:[0,0,0,0],outline:{style:"dash",color:[255,127,0,1],width:1}});case"simple-line":return new L.Z({color:[255,127,0,1],style:"dash",width:1});case"text":{const{xoffset:T,yoffset:w}=l.symbol;return new D.Z({xoffset:T,yoffset:w,size:12,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}default:return null}}};(0,s._)([(0,B.Cb)()],o.prototype,"_activeGraphic",void 0),(0,s._)([(0,B.Cb)({readOnly:!0})],o.prototype,"type",void 0),(0,s._)([(0,B.Cb)()],o.prototype,"callbacks",void 0),(0,s._)([(0,B.Cb)()],o.prototype,"enableMoveAllGraphics",void 0),(0,s._)([(0,B.Cb)()],o.prototype,"graphics",void 0),(0,s._)([(0,B.Cb)({value:!1})],o.prototype,"highlightsEnabled",null),(0,s._)([(0,B.Cb)()],o.prototype,"indicatorsEnabled",void 0),(0,s._)([(0,B.Cb)()],o.prototype,"layer",void 0),(0,s._)([(0,B.Cb)({readOnly:!0})],o.prototype,"state",null),(0,s._)([(0,B.Cb)()],o.prototype,"view",void 0),o=(0,s._)([(0,x.j)("esri.views.draw.support.GraphicMover")],o);const b=o},49621:(H,W,e)=>{e.d(W,{Z:()=>x});var s=e(17626),E=e(80542),S=e(77712),I=(e(90912),e(85931),e(76898)),C=e(10228),B=e(93579);let O=class extends E.r{constructor(p){super(p),this.view=null}get count(){return this.handles.size}add(p){const h=Array.isArray(p)?p:[p];null!=p&&h&&h.length&&h.forEach(m=>this._highlight(m))}remove(p){const h=Array.isArray(p)?p:[p];null!=p&&h&&h.length&&h.forEach(m=>this._unhighlight(m))}removeAll(){this.handles.removeAll()}_highlight(p){const h=(0,C.j)(this.view,p.layer);(0,B.tl)(h)&&this.handles.add(h.highlight(p),`feature-${p.getObjectId()}`)}_unhighlight(p){p&&this.handles.remove(`feature-${p.getObjectId()}`)}};(0,s._)([(0,S.Cb)({readOnly:!0})],O.prototype,"count",null),(0,s._)([(0,S.Cb)()],O.prototype,"view",void 0),(0,s._)([(0,S.Cb)()],O.prototype,"add",null),O=(0,s._)([(0,I.j)("esri.views.draw.support.HighlightHelper")],O);const x=O},70211:(H,W,e)=>{e.d(W,{x:()=>g});var s=e(33351),E=e(97979),S=e(19038);class g extends E.a{constructor(I){super({...I,constraint:new s.Hk(I.targetPoint)})}get hints(){return[new S.n(this.targetPoint,this.isDraped,this.domain)]}}},9218:(H,W,e)=>{e.d(W,{X:()=>B,g:()=>O});var s=e(62208),E=e(28093),S=e(59550),g=e(61430),j=e(75897),I=e(70211);function C({x,y:p,z:h}){return(0,S.uc)((0,E.f)(x,p,h??0))}function B(x,p){switch(x.type){case"edge":return x.draped?new g.k({edgeStart:C(x.start),edgeEnd:C(x.end),targetPoint:C(x.target),objectId:x.objectId,getGroundElevation:p}):new j.L({edgeStart:C(x.start),edgeEnd:C(x.end),targetPoint:C(x.target),objectId:x.objectId,isDraped:!1});case"vertex":return new I.x({targetPoint:C(x.target),objectId:x.objectId,isDraped:!1})}}function O(x){return(0,s.pC)(x)&&"3d"===x.type?(p,h,m)=>x.elevationProvider.getElevation(p,h,m??0,x.spatialReference,"ground"):()=>null}},17936:(H,W,e)=>{e.d(W,{p:()=>O});var s=e(15861),S=(e(8314),e(93961)),g=e(88159),j=e(62208),I=e(10699),C=e(16730),B=e(29505);function O(c=!1,f){if(c){const{elevationInfo:i,alignPointsInFeatures:n,spatialReference:a}=f;return new h(i,n,a)}return new x}class x{alignCandidates(f,i){return(0,s.Z)(function*(){return f})()}notifyElevationSourceChange(){}}class h{constructor(f,i,n){this._elevationInfo=f,this._alignPointsInFeatures=i,this.spatialReference=n,this._alignmentsCache=new S.Z(1024),this._cacheVersion=0,this._metersPerVerticalUnit=(0,C._R)(n)}alignCandidates(f,i){var n=this;return(0,s.Z)(function*(){const a=n._elevationInfo;return(0,j.pC)(a)&&"absolute-height"===a.mode&&!a.featureExpressionInfo?(n._alignAbsoluteElevationCandidates(f,a),f):n._alignComputedElevationCandidates(f,i)})()}notifyElevationSourceChange(){this._alignmentsCache.clear(),this._cacheVersion++}_alignAbsoluteElevationCandidates(f,i){const{offset:n,unit:a}=i;if((0,j.Wi)(n))return;const _=n*((0,B.Z7)(a??"meters")/this._metersPerVerticalUnit);for(const d of f)switch(d.type){case"edge":d.start.z+=_,d.end.z+=_;continue;case"vertex":d.target.z+=_;continue}}_alignComputedElevationCandidates(f,i){var n=this;return(0,s.Z)(function*(){const a=new Map;for(const L of f)(0,g.s1)(a,L.objectId,v).push(L);const[_,d,P]=n._prepareQuery(a),M=yield n._alignPointsInFeatures(_,i);if((0,I.k_)(i),P!==n._cacheVersion)return n._alignComputedElevationCandidates(f,i);n._applyCacheAndResponse(_,M,d);const{drapedObjectIds:U,failedObjectIds:u}=M,D=[];for(const L of f){const{objectId:R}=L;U.has(R)&&"edge"===L.type&&(L.draped=!0),u.has(R)||D.push(L)}return D})()}_prepareQuery(f){const i=[],n=[];for(const[a,_]of f){const d=[];for(const P of _)this._addToQueriesOrCachedResult(a,P.target,d,n),"edge"===P.type&&(this._addToQueriesOrCachedResult(a,P.start,d,n),this._addToQueriesOrCachedResult(a,P.end,d,n));0!==d.length&&i.push({objectId:a,points:d})}return[i,n,this._cacheVersion]}_addToQueriesOrCachedResult(f,i,n,a){const _=A(f,i),d=this._alignmentsCache.get(_);(0,j.pC)(d)?a.push(new m(i,d)):n.push(i)}_applyCacheAndResponse(f,{elevations:i,drapedObjectIds:n,failedObjectIds:a},_){for(const M of _)M.apply();let d=0;const P=this._alignmentsCache;for(const{objectId:M,points:U}of f){if(a.has(M)){d+=U.length;continue}const u=!n.has(M);for(const D of U){const L=A(M,D),R=i[d++];D.z=R,u&&P.put(L,R,1)}}}}class m{constructor(f,i){this.point=f,this.z=i}apply(){this.point.z=this.z}}function A(c,{x:f,y:i,z:n}){return`${c}-${f}-${i}-${n??0}}`}function v(){return[]}},1520:(H,W,e)=>{e.d(W,{c:()=>j}),e(8314);class E{filter(h,m){return m}notifyElevationSourceChange(){}}class S{filter(h,m){const{point:A,distance:v}=h,{z:c}=A;if(null==c||0===m.length)return m;const f=function O(p){return"number"==typeof p?{x:p,y:p,z:p}:p}(v),i=this._updateCandidatesTo3D(m,A,f).filter(g);return i.sort(x),i}_updateCandidatesTo3D(h,m,A){for(const v of h)switch(v.type){case"edge":I(v,m,A);continue;case"vertex":B(v,m,A);continue}return h}}function g(p){return p.distance<=1}function j(p=!1){return p?new S:new E}function I(p,h,{x:m,y:A,z:v}){const{start:c,end:f,target:i}=p;p.draped||function C(p,h,m,A){const v=A.x-m.x,c=A.y-m.y,f=A.z-m.z,a=Math.min(1,Math.max(0,((h.x-m.x)*v+(h.y-m.y)*c+f*(h.z-m.z))/(v*v+c*c+f*f))),d=m.y+c*a,P=m.z+f*a;p.x=m.x+v*a,p.y=d,p.z=P}(i,h,c,f);const n=(h.x-i.x)/m,a=(h.y-i.y)/A,_=(h.z-i.z)/v;p.distance=Math.sqrt(n*n+a*a+_*_)}function B(p,h,{x:m,y:A,z:v}){const{target:c}=p,f=(h.x-c.x)/m,i=(h.y-c.y)/A,n=(h.z-c.z)/v,a=Math.sqrt(f*f+i*i+n*n);p.distance=a}function x(p,h){return p.distance-h.distance}},83010:(H,W,e)=>{e.d(W,{k:()=>C});var s=e(15861),S=(e(8314),e(58817)),g=e(93961),j=e(10699),I=e(77275);function C(h=!1,m){return h?new x(m):new B}class B{fetch(){return(0,s.Z)(function*(){return[]})()}notifySymbologyChange(){}}class x{constructor(m){this._getSymbologyCandidates=m,this._candidatesCache=new g.Z(1024),this._cacheVersion=0}fetch(m,A){var v=this;return(0,s.Z)(function*(){if(0===m.length)return[];const c=[],f=[],i=v._candidatesCache;for(const M of m){const U=p(M),u=i.get(U);if(u)for(const D of u)f.push((0,S.d9)(D));else c.push(M),i.put(U,[],1)}if(0===c.length)return f;const n=v._cacheVersion,{candidates:a,sourceCandidateIndices:_}=yield v._getSymbologyCandidates(c,A);if((0,j.k_)(A),n!==v._cacheVersion)return v.fetch(m,A);const d=[],{length:P}=a;for(let M=0;M<P;++M){const U=a[M],u=p(c[_[M]]),D=i.get(u);D.push(U),i.put(u,D,D.length),d.push((0,S.d9)(U))}return f.concat(d)})()}notifySymbologyChange(){this._candidatesCache.clear(),this._cacheVersion++}}function p(h){switch(h.type){case"vertex":{const{objectId:m,target:A}=h;return(0,I.hP)(`${m}-vertex-${A.x}-${A.y}-${A.z??0}`).toString()}case"edge":{const{objectId:m,start:A,end:v}=h;return(0,I.hP)(`${m}-edge-${A.x}-${A.y}-${A.z??0}-to-${v.x}-${v.y}-${v.z??0}`).toString()}default:return""}}},51810:(H,W,e)=>{e.d(W,{c:()=>I,p:()=>C});var s=e(17626),E=e(15572),S=e(77712),g=e(76898),j=e(62980);let I=class extends j.h{constructor(B){super(B),this.type="extent-rotate",this.angle=0}};(0,s._)([(0,S.Cb)()],I.prototype,"type",void 0),(0,s._)([(0,S.Cb)()],I.prototype,"angle",void 0),I=(0,s._)([(0,g.j)("esri.views.interactive.tooltip.ExtentRotateTooltipInfo")],I);let C=class extends j.h{constructor(B){super(B),this.type="extent-scale",this.xScale=0,this.yScale=0,this.xSize=E.yP,this.ySize=E.yP}};(0,s._)([(0,S.Cb)()],C.prototype,"type",void 0),(0,s._)([(0,S.Cb)()],C.prototype,"xScale",void 0),(0,s._)([(0,S.Cb)()],C.prototype,"yScale",void 0),(0,s._)([(0,S.Cb)()],C.prototype,"xSize",void 0),(0,s._)([(0,S.Cb)()],C.prototype,"ySize",void 0),C=(0,s._)([(0,g.j)("esri.views.interactive.tooltip.ExtentScaleTooltipInfo")],C)},31712:(H,W,e)=>{e.d(W,{$E:()=>I,QW:()=>C,c1:()=>p,in:()=>B,j:()=>x,nk:()=>O});var s=e(17626),E=e(15572),S=e(77712),g=e(76898),j=e(62980);let I=class extends j.h{constructor(h){super(h),this.type="translate-graphic",this.distance=E.yP}};(0,s._)([(0,S.Cb)()],I.prototype,"type",void 0),(0,s._)([(0,S.Cb)()],I.prototype,"distance",void 0),I=(0,s._)([(0,g.j)("esri.views.interactive.tooltip.TranslateGraphicTooltipInfo")],I);let C=class extends j.h{constructor(h){super(h),this.type="translate-graphic-z",this.distance=E.yP}};(0,s._)([(0,S.Cb)()],C.prototype,"type",void 0),(0,s._)([(0,S.Cb)()],C.prototype,"distance",void 0),C=(0,s._)([(0,g.j)("esri.views.interactive.tooltip.TranslateGraphicZTooltipInfo")],C);let B=class extends j.h{constructor(h){super(h),this.type="translate-graphic-xy",this.distance=E.yP}};(0,s._)([(0,S.Cb)()],B.prototype,"type",void 0),(0,s._)([(0,S.Cb)()],B.prototype,"distance",void 0),B=(0,s._)([(0,g.j)("esri.views.interactive.tooltip.TranslateGraphicXYTooltipInfo")],B);let O=class extends j.h{constructor(h){super(h),this.type="translate-vertex",this.distance=E.yP,this.elevation=null,this.area=null,this.totalLength=null}};(0,s._)([(0,S.Cb)()],O.prototype,"type",void 0),(0,s._)([(0,S.Cb)()],O.prototype,"distance",void 0),(0,s._)([(0,S.Cb)()],O.prototype,"elevation",void 0),(0,s._)([(0,S.Cb)()],O.prototype,"area",void 0),(0,s._)([(0,S.Cb)()],O.prototype,"totalLength",void 0),O=(0,s._)([(0,g.j)("esri.views.interactive.tooltip.TranslateVertexTooltipInfo")],O);let x=class extends j.h{constructor(h){super(h),this.type="translate-vertex-z",this.distance=E.yP,this.elevation=null}};(0,s._)([(0,S.Cb)()],x.prototype,"type",void 0),(0,s._)([(0,S.Cb)()],x.prototype,"distance",void 0),(0,s._)([(0,S.Cb)()],x.prototype,"elevation",void 0),x=(0,s._)([(0,g.j)("esri.views.interactive.tooltip.TranslateVertexZTooltipInfo")],x);let p=class extends j.h{constructor(h){super(h),this.type="translate-vertex-xy",this.distance=E.yP,this.elevation=null,this.area=null,this.totalLength=null}};(0,s._)([(0,S.Cb)()],p.prototype,"type",void 0),(0,s._)([(0,S.Cb)()],p.prototype,"distance",void 0),(0,s._)([(0,S.Cb)()],p.prototype,"elevation",void 0),(0,s._)([(0,S.Cb)()],p.prototype,"area",void 0),(0,s._)([(0,S.Cb)()],p.prototype,"totalLength",void 0),p=(0,s._)([(0,g.j)("esri.views.interactive.tooltip.TranslateVertexXYTooltipInfo")],p)},85453:(H,W,e)=>{e.d(W,{EX:()=>B});var s=e(91558);function B(O){const{r:x,g:p,b:h}=function C(O){let{r:x,g:p,b:h,a:m}=O;return m<1&&(x=Math.round(m*x+255*(1-m)),p=Math.round(m*p+255*(1-m)),h=Math.round(m*h+255*(1-m))),new s.Z({r:x,g:p,b:h})}(O);return.2126*x+.7152*p+.0722*h}},38982:(H,W,e)=>{e.d(W,{Br:()=>C,Fm:()=>m,N9:()=>v,RA:()=>c,Tc:()=>O,Ue:()=>x,iC:()=>B,s9:()=>I,v:()=>A,xW:()=>h,zS:()=>p});var s=e(62208),E=e(99770),S=e(57596),g=e(67969),j=e(55086);function I(i,n,a="nearest",_=!1){const d=!(_&&"u8"===n.pixelType),P=d?g.Br.FLOAT:g.Br.UNSIGNED_BYTE,M=null==n.pixels||0===n.pixels.length?null:d?n.getAsRGBAFloat():n.getAsRGBA(),U=i.capabilities.textureFloat?.textureFloatLinear;return new j.x(i,{width:n.width,height:n.height,target:g.No.TEXTURE_2D,pixelFormat:g.VI.RGBA,internalFormat:i.type===S.zO.WEBGL2&&d?g.lP.RGBA32F:g.VI.RGBA,samplingMode:!U||"bilinear"!==a&&"cubic"!==a?g.cw.NEAREST:g.cw.LINEAR,dataType:P,wrapMode:g.e8.CLAMP_TO_EDGE,flipped:!1},M)}function C(i,n){const{spacing:a,offsets:_,coefficients:d,size:[P,M]}=n,U=a[0]>1,u={width:U?4*P:P,height:M,target:g.No.TEXTURE_2D,pixelFormat:g.VI.RGBA,internalFormat:i.type===S.zO.WEBGL2?g.lP.RGBA32F:g.VI.RGBA,dataType:g.Br.FLOAT,samplingMode:g.cw.NEAREST,wrapMode:g.e8.CLAMP_TO_EDGE,flipped:!1},D=new Float32Array(U?P*M*16:2*_.length);if(U&&null!=d)for(let L=0,R=0;L<d.length;L++)D[R++]=d[L],L%3==2&&(D[R++]=1);else for(let L=0;L<M;L++)for(let R=0;R<P;R++){const K=4*(L*P+R),o=2*(R*M+L);D[K]=_[o],D[K+1]=_[o+1],D[K+3]=-1===_[o]?0:1}return new j.x(i,u,D)}function B(i,n){return new j.x(i,{width:n.length/4,height:1,target:g.No.TEXTURE_2D,pixelFormat:g.VI.RGBA,internalFormat:g.VI.RGBA,dataType:g.Br.UNSIGNED_BYTE,samplingMode:g.cw.NEAREST,wrapMode:g.e8.CLAMP_TO_EDGE,flipped:!1},n)}function O(i,n,a,_=1,d=!0){return{u_flipY:d,u_applyTransform:!!i,u_opacity:_,u_transformSpacing:i?i.spacing:E.Z,u_transformGridSize:i?i.size:E.Z,u_targetImageSize:n,u_srcImageSize:a}}function x(i,n){return{u_colormapOffset:n||0,u_colormapMaxIndex:i?i.length/4-1:0}}function p(i,n){return{u_scale:i,u_offset:n}}function h(i){return{u_bandCount:i.bandCount,u_minOutput:i.outMin,u_maxOutput:i.outMax,u_minCutOff:i.minCutOff,u_maxCutOff:i.maxCutOff,u_factor:i.factor,u_useGamma:i.useGamma,u_gamma:i.gamma,u_gammaCorrection:i.gammaCorrection}}function m(i){return{u_hillshadeType:i.hillshadeType,u_sinZcosAs:i.sinZcosAs,u_sinZsinAs:i.sinZsinAs,u_cosZs:i.cosZs,u_weights:i.weights,u_factor:i.factor,u_minValue:i.minValue,u_maxValue:i.maxValue}}function A(i,n){const a=i.gl,_=n.glName,d=new Map;if((0,s.Wi)(_))return d;const P=a.getProgramParameter(_,a.ACTIVE_UNIFORMS);let M;for(let U=0;U<P;U++)M=a.getActiveUniform(_,U),M&&d.set(M.name,{location:a.getUniformLocation(_,M.name),info:M});return d}function v(i,n,a){Object.keys(a).forEach(_=>{const d=n.get(_)||n.get(_+"[0]");d&&function f(i,n,a,_){if(null===_||null==a)return!1;const{info:d}=_;switch(d.type){case g.Se.FLOAT:d.size>1?i.setUniform1fv(n,a):i.setUniform1f(n,a);break;case g.Se.FLOAT_VEC2:i.setUniform2fv(n,a);break;case g.Se.FLOAT_VEC3:i.setUniform3fv(n,a);break;case g.Se.FLOAT_VEC4:i.setUniform4fv(n,a);break;case g.Se.FLOAT_MAT3:i.setUniformMatrix3fv(n,a);break;case g.Se.FLOAT_MAT4:i.setUniformMatrix4fv(n,a);break;case g.Se.INT:d.size>1?i.setUniform1iv(n,a):i.setUniform1i(n,a);break;case g.Se.BOOL:i.setUniform1i(n,a?1:0);break;case g.Se.INT_VEC2:case g.Se.BOOL_VEC2:i.setUniform2iv(n,a);break;case g.Se.INT_VEC3:case g.Se.BOOL_VEC3:i.setUniform3iv(n,a);break;case g.Se.INT_VEC4:case g.Se.BOOL_VEC4:i.setUniform4iv(n,a);break;default:return!1}}(i,_,a[_],d)})}function c(i,n,a,_){a.length===_.length&&(_.some(d=>null==d)||a.some(d=>null==d)||a.forEach((d,P)=>{n.setUniform1i(d,P),i.bindTexture(_[P],P)}))}},60863:(H,W,e)=>{e.d(W,{d:()=>O});var s=e(15861),E=e(76210),S=e(23663),g=e(66554),j=e(85589);const B=(0,E.GH)(class extends E.mv{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.loading=!1,this.messages=void 0,this.messageOverrides=void 0,this.defaultMessages=void 0,this.effectiveLocale=""}onMessagesChange(){}effectiveLocaleChange(){(0,g.u)(this,this.effectiveLocale)}connectedCallback(){(0,S.c)(this),(0,g.c)(this)}componentWillLoad(){var x=this;return(0,s.Z)(function*(){yield(0,g.s)(x)})()}disconnectedCallback(){(0,S.d)(this),(0,g.d)(this)}render(){const{el:x,loading:p,messages:h}=this,m=x.innerHTML.trim().length>0,A=p?(0,E.h)("calcite-loader",{label:h.loading}):null,v=m?(0,E.h)("div",{class:"content"},(0,E.h)("slot",null)):null;return(0,E.h)("div",{class:"scrim"},A,v)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return"@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{position:absolute;inset:0px;z-index:700;display:flex;block-size:100%;inline-size:100%;flex-direction:column;align-items:stretch}@keyframes calcite-scrim-fade-in{0%{--tw-bg-opacity:0}100%{--tw-text-opacity:1}}.scrim{position:absolute;inset:0px;display:flex;flex-direction:column;align-content:center;align-items:center;justify-content:center;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background, var(--calcite-scrim-background-internal))}.content{padding:1rem}"}},[1,"calcite-scrim",{loading:[516],messages:[1040],messageOverrides:[1040],defaultMessages:[32],effectiveLocale:[32]}]);function O(){typeof customElements>"u"||["calcite-scrim","calcite-loader"].forEach(p=>{switch(p){case"calcite-scrim":customElements.get(p)||customElements.define(p,B);break;case"calcite-loader":customElements.get(p)||(0,j.d)()}})}O()},89251:(H,W,e)=>{e.d(W,{C:()=>E,I:()=>j,M:()=>g,S:()=>S,a:()=>x,g:()=>B,u:()=>O});var s=e(76210);const E={container:"container",containerBorderSelected:"container--border-selected",containerBorderUnselected:"container--border-unselected",contentContainer:"content-container",contentContainerSelectable:"content-container--selectable",contentContainerHasCenterContent:"content-container--has-center-content",nestedContainer:"nested-container",nestedContainerHidden:"nested-container--hidden",content:"content",customContent:"custom-content",actionsStart:"actions-start",contentStart:"content-start",label:"label",description:"description",contentEnd:"content-end",actionsEnd:"actions-end",selectionContainer:"selection-container",openContainer:"open-container"},S={actionsStart:"actions-start",contentStart:"content-start",content:"content",contentEnd:"content-end",actionsEnd:"actions-end"},g=5,j={selectedMultiple:"check-circle-f",selectedSingle:"circle-f",unselected:"blank",closedLTR:"caret-right",closedRTL:"caret-left",open:"caret-down",blank:"blank"},C="calcite-list-item";function B(p){const h=p.target.assignedElements({flatten:!0});return[...h.filter(v=>v?.matches("calcite-list-item-group")).map(v=>Array.from(v.querySelectorAll(C))).reduce((v,c)=>[...v,...c],[]),...h.filter(v=>v?.matches(C))]}function O(p){p.forEach(h=>{h.setPosition=p.indexOf(h)+1,h.setSize=p.length})}function x(p,h=!1){return s.Z5.isBrowser?document.evaluate(h?"ancestor::calcite-list-item | ancestor::calcite-list-item-group":"ancestor::calcite-list-item",p,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength:0}}}]);
"use strict";(self.webpackChunkparcel_app=self.webpackChunkparcel_app||[]).push([[805],{36161:(R,f,r)=>{r.d(f,{I:()=>u,v:()=>h});var M=r(21286);function u(a,n,t=0){const e=(0,M.uZ)(a,0,m);for(let o=0;o<4;o++)n[t+o]=Math.floor(256*P(e*c[o]))}function h(a,n=0){let t=0;for(let e=0;e<4;e++)t+=a[n+e]*E[e];return t}const c=[1,256,65536,16777216],E=[1/256,1/65536,1/16777216,1/4294967296],m=h(new Uint8ClampedArray([255,255,255,255]));function P(a){return a-Math.floor(a)}},27313:(R,f,r)=>{r.r(f),r.d(f,{previewCIMSymbol:()=>s});var M=r(15861),u=r(23841),h=r(35909),c=r(57068),E=r(80991),m=r(71131),P=r(34057);const a=new c.CIMSymbolRasterizer(null,!0),n=(0,u.Wz)(m.b_.size),t=(0,u.Wz)(m.b_.maxSize),e=(0,u.Wz)(m.b_.lineWidth);function l(_){const i=_?.size;return"number"==typeof i?{width:i,height:i}:{width:null!=i&&"object"==typeof i&&"width"in i?i.width:null,height:null!=i&&"object"==typeof i&&"height"in i?i.height:null}}function s(_){return y.apply(this,arguments)}function y(){return(y=(0,M.Z)(function*(_,i={}){const{node:b,opacity:T,symbolConfig:C}=i,K="object"==typeof C&&"isSquareFill"in C&&C.isSquareFill,A=i.cimOptions||i,p=A.geometryType||(0,E.JW)(_?.data?.symbol),d=l(i),{feature:B,fieldMap:G}=A;if(null==d.width||null==d.height){const g=yield h.E0.resolveSymbolOverrides(_.data,B,null,G,p);if(!g)return null;(_=_.clone()).data={type:"CIMSymbolReference",symbol:g},_.data.primitiveOverrides=void 0;const W=[];h.B$.fetchResources(g,a.resourceManager,W),W.length>0&&(yield Promise.all(W));const S=h.B$.getEnvelope(g,null,a.resourceManager),j=S?.width,L=S?.height;d.width="esriGeometryPolygon"===p?n:"esriGeometryPolyline"===p?e:null!=j&&isFinite(j)?Math.min(j,t):n,d.height="esriGeometryPolygon"===p?n:null!=L&&isFinite(L)?Math.max(Math.min(L,t),1):n}const w=yield a.rasterizeCIMSymbolAsync(_,B,d,K||"esriGeometryPolygon"!==p?c.GeometryStyle.Preview:c.GeometryStyle.Legend,G,p);if(!w)return null;const{width:z,height:F}=w,v=document.createElement("canvas");v.width=z,v.height=F,v.getContext("2d").putImageData(w,0,0);const I=(0,u.F2)(d.width),U=(0,u.F2)(d.height),O=new Image(I,U);O.src=v.toDataURL(),null!=T&&(O.style.opacity=`${T}`);let D=O;return null!=i.effectView&&(D=(0,P.wh)([[{shape:{type:"image",x:0,y:0,width:I,height:U,src:O.src},fill:null,stroke:null,offset:[0,0]}]],[I,U],{effectView:i.effectView})),b&&D&&b.appendChild(D),D})).apply(this,arguments)}},39236:(R,f,r)=>{r.d(f,{Z:()=>E});var M=r(26584),u=r(63290),h=r(62208),c=r(7848);function E(n,t,e,o,l){if((0,h.Wi)(n))return null;const s=n.referencesGeometry()&&l?function P(n,t,e){const{transform:o,hasZ:l,hasM:s}=e;m.has(t)||m.set(t,function a(n){const t={};switch(n){case"esriGeometryPoint":return(e,o,l,s)=>(0,c.U1)(o,t,e,l,s);case"esriGeometryPolygon":return(e,o,l,s)=>(0,c.Ie)(o,t,e,l,s);case"esriGeometryPolyline":return(e,o,l,s)=>(0,c.G6)(o,t,e,l,s);case"esriGeometryMultipoint":return(e,o,l,s)=>(0,c.J9)(o,t,e,l,s);default:return u.Z.getLogger("esri.views.2d.support.arcadeOnDemand").error(new M.Z("mapview-arcade",`Unable to handle geometryType: ${n}`)),e=>e}}(t));const y=m.get(t)(n.geometry,o,l,s);return{...n,geometry:y}}(t,o,l):t,y=n.repurposeFeature(s);try{return n.evaluate({...e,$feature:y})}catch(_){return u.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",_),null}}const m=new Map}}]);
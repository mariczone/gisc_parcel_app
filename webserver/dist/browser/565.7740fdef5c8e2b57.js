"use strict";(self.webpackChunkparcel_app=self.webpackChunkparcel_app||[]).push([[565],{78176:(M,v,e)=>{e.r(v),e.d(v,{FeatureCollectionSnappingSource:()=>r});var c=e(15861),i=e(17626),E=e(14517),p=e(62208),s=e(10699),y=e(32917),a=e(77712),f=(e(90912),e(85931),e(76898)),A=e(60507),h=e(44725),C=e(9218),D=e(17936),I=e(1520),P=e(83010);let r=class extends E.Z{get availability(){return 1}get updating(){return this.layerSource.updating}get _snappingElevationAligner(){const{view:n}=this,{layer:t}=this.layerSource,o=(0,p.pC)(n)&&"3d"===n.type;if(!o||"subtype-group"===t.type)return(0,D.p)();const _=function(){var l=(0,c.Z)(function*(u,g){return(yield(0,s.Hl)(n.whenLayerView(t),g)).elevationAlignPointsInFeatures(u,g)});return function(g,O){return l.apply(this,arguments)}}();return(0,D.p)(o,{elevationInfo:t.elevationInfo,alignPointsInFeatures:_,spatialReference:n.spatialReference})}get _snappingElevationFilter(){const{view:n}=this,t=(0,p.pC)(n)&&"3d"===n.type&&"subtype-group"!==this.layerSource.layer.type;return(0,I.c)(t)}get _symbologySnappingFetcher(){const{view:n}=this,{layer:t}=this.layerSource;return(0,p.pC)(n)&&"3d"===n.type&&"subtype-group"!==t.type?(0,P.k)(this._symbologySnappingSupported,function(){var o=(0,c.Z)(function*(_,l){const u=yield n.whenLayerView(t);return(0,s.k_)(l),u.queryForSymbologySnapping({candidates:_,spatialReference:n.spatialReference},l)});return function(_,l){return o.apply(this,arguments)}}()):(0,P.k)()}get _symbologySnappingSupported(){return(0,p.pC)(this._layerView3D)&&this._layerView3D.symbologySnappingSupported}initialize(){const{view:n}=this,{layer:t}=this.layerSource;(0,p.pC)(n)&&"3d"===n.type&&"subtype-group"!==t.type&&(n.whenLayerView(t).then(o=>this._layerView3D=o),this.addHandles([n.elevationProvider.on("elevation-change",({context:o})=>{const{elevationInfo:_}=t;(0,A.W_)(o,_)&&this._snappingElevationAligner.notifyElevationSourceChange()}),(0,y.YP)(()=>t.elevationInfo,()=>this._snappingElevationAligner.notifyElevationSourceChange(),y.nn),(0,y.YP)(()=>(0,p.pC)(this._layerView3D)?this._layerView3D.processor?.renderer:null,()=>this._symbologySnappingFetcher.notifySymbologyChange(),y.nn),(0,y.on)(()=>(0,p.WG)(this._layerView3D)?.layer,["edits","apply-edits","graphic-update"],()=>this._symbologySnappingFetcher.notifySymbologyChange())]))}constructor(n){super(n),this.view=null,this._layerView3D=null}refresh(){}fetchCandidates(n,t){var o=this;return(0,c.Z)(function*(){const{layer:_}=o.layerSource,l=_.source;if(!l?.querySnapping)return[];const u=(0,h.ML)(_),g=(0,h.rh)(n,(0,p.Wg)(o.view)?.type??"2d",u),O=yield l.querySnapping(g,{signal:t});(0,s.k_)(t);const d=yield o._snappingElevationAligner.alignCandidates(O.candidates,t);(0,s.k_)(t);const S=yield o._symbologySnappingFetcher.fetch(d,t);(0,s.k_)(t);const m=0===S.length?d:[...d,...S],U=o._snappingElevationFilter.filter(g,m),L=o._getGroundElevation;return U.map(R=>(0,C.X)(R,L))})()}get _getGroundElevation(){return(0,C.g)(this.view)}};(0,i._)([(0,a.Cb)({constructOnly:!0})],r.prototype,"layerSource",void 0),(0,i._)([(0,a.Cb)({constructOnly:!0})],r.prototype,"view",void 0),(0,i._)([(0,a.Cb)()],r.prototype,"_snappingElevationAligner",null),(0,i._)([(0,a.Cb)()],r.prototype,"_snappingElevationFilter",null),(0,i._)([(0,a.Cb)()],r.prototype,"_symbologySnappingFetcher",null),(0,i._)([(0,a.Cb)()],r.prototype,"_layerView3D",void 0),(0,i._)([(0,a.Cb)()],r.prototype,"_symbologySnappingSupported",null),(0,i._)([(0,a.Cb)()],r.prototype,"_getGroundElevation",null),r=(0,i._)([(0,f.j)("esri.views.interactive.snapping.featureSources.FeatureCollectionSnappingSource")],r)},19038:(M,v,e)=>{e.d(v,{n:()=>E});var c=e(84161),i=e(5286);class E extends i.r{constructor(s,y,a){super(y,a),this.point=s}equals(s){return s instanceof E&&(0,c.k)(this.point,s.point)}}}}]);
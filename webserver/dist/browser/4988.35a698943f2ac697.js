"use strict";(self.webpackChunkparcel_app=self.webpackChunkparcel_app||[]).push([[4988],{91365:(Ie,pe,j)=>{j.d(pe,{Qn:()=>O,iG:()=>ee});var w,X=j(25919),S=j(21837);class V{}V.instance=new S.vF("Etc/UTC"),(w||(w={})).TimeZoneNotRecognised="TimeZoneNotRecognised";const D={[w.TimeZoneNotRecognised]:"Timezone identifier has not been recognised."};class Y extends Error{constructor(N,K){super((0,X.Hy)(D[N],K)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,Y)}}class ee{constructor(N){this._date=N,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(N=0,K=1,T=1,Z=0,te=0,k=0,L=0,b){if(isNaN(N)||isNaN(K)||isNaN(T)||isNaN(Z)||isNaN(te)||isNaN(k)||isNaN(L))return null;let M=0;const x=S.ou.local(N,K).daysInMonth;T<1&&(M=T-1,T=1),T>x&&(M=T-x,T=x);let f=0;K>12?(f=K-12,K=12):K<1&&(f=K-1,K=1);let F=0;te>59?(F=te-59,te=59):te<0&&(F=te,te=0);let y=0;k>59?(y=k-59,k=59):k<0&&(y=k,k=0);let C=0;L>999?(C=L-999,L=999):L<0&&(C=L,L=0);let z=S.ou.fromObject({day:T,year:N,month:K,hour:Z,minute:te,second:k,millisecond:L},{zone:O(b)});return 0!==f&&(z=z.plus({months:f})),0!==M&&(z=z.plus({days:M})),0!==F&&(z=z.plus({minutes:F})),0!==y&&(z=z.plus({seconds:y})),0!==C&&(z=z.plus({milliseconds:C})),new ee(z)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(N,K){const T=O(K);return N.isUnknownTimeZone||T===V.instance?ee.fromParts(N.year,N.monthJS+1,N.day,N.hour,N.minute,N.second,N.millisecond,T):new ee(N._date.setZone(K))}static dateJSToArcadeDate(N){return new ee(S.ou.fromJSDate(N,{zone:"system"}))}static dateJSAndZoneToArcadeDate(N,K="system"){return new ee(S.ou.fromJSDate(N,{zone:K}))}static unknownEpochToArcadeDate(N){return new ee(S.ou.fromMillis(N,{zone:V.instance}))}static unknownDateJSToArcadeDate(N){return new ee(S.ou.fromMillis(N.getTime(),{zone:V.instance}))}static epochToArcadeDate(N,K="system"){return new ee(S.ou.fromMillis(N,{zone:K}))}static dateTimeToArcadeDate(N){return new ee(N)}changeTimeZone(N){const K=O(N);return ee.dateTimeToArcadeDate(this._date.setZone(K))}static dateTimeAndZoneToArcadeDate(N,K){const T=O(K);return N.zone===V.instance||T===V.instance?ee.fromParts(N.year,N.month,N.day,N.hour,N.minute,N.second,N.millisecond,T):new ee(N.setZone(T))}static nowToArcadeDate(N){return new ee(S.ou.fromJSDate(new Date,{zone:N}))}static nowUTCToArcadeDate(){return new ee(S.ou.utc())}get isSystem(){return"system"===this.timeZone||this.timeZone===ee.systemTimeZoneCanonicalName}equals(N){return this.isSystem&&N.isSystem?this.toNumber()===N.toNumber():this.isUnknownTimeZone===N.isUnknownTimeZone&&this._date.equals(N._date)}get isUnknownTimeZone(){return this._date.zone===V.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let N=this._date.weekday;return N>6&&(N=0),N}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";const N=this.zone;return"fixed"===N.type?0===N.fixed?"utc":N.formatOffset(0,"short"):N.name}stringify(){return JSON.stringify(this.toJSDate())}plus(N){return new ee(this._date.plus(N))}diff(N,K="milliseconds"){return this._date.diff(N._date,K)[K]}toISOString(N){return this._date.toISO(N?{suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}:{includeOffset:!this.isUnknownTimeZone})}toFormat(N,K){return this._date.toFormat(N,K)}toJSDate(){return this._date.toJSDate()}toSQLString(){return"timestamp '"+this._date.toFormat("yyyy-LL-dd HH:mm:ss")+"'"}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new ee(this._date.toUTC())}toLocal(){return new ee(this._date.toLocal())}toString(){return this.toISOString(!0)}}function O(U){if(U instanceof S.ld)return U;if("system"===U.toLowerCase())return"system";if("utc"===U.toLowerCase())return"utc";if("unknown"===U.toLowerCase())return V.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(U)){const K=S.Qf.parseSpecifier("UTC"+(U.startsWith("+")||U.startsWith("-")?"":"+")+U);if(K)return K}const N=S.vF.create(U);if(!N.isValid)throw new Y(w.TimeZoneNotRecognised);return N}},78778:(Ie,pe,j)=>{j.d(pe,{P:()=>X});class X{constructor(V){this.source=V}}},9288:(Ie,pe,j)=>{j.d(pe,{s:()=>X});class X{constructor(V,w){this._moduleSingletons=V,this._syntaxModules=w}loadLibrary(V){if(null==this._syntaxModules)return null;const w=this._syntaxModules[V.toLowerCase()];return w?{syntax:w.script,uri:w.uri}:null}}},37780:(Ie,pe,j)=>{j.d(pe,{Z:()=>S});var X=j(6729);class S extends X.Z{constructor(w){super(),this.declaredClass="esri.arcade.Portal",this.immutable=!1,this.setField("url",w),this.immutable=!0}}},22386:(Ie,pe,j)=>{j.d(pe,{Z:()=>S});var X=j(6729);class S extends X.Z{constructor(w,D,Y,ee,O,U){super(),this.attachmentUrl=O,this.declaredClass="esri.arcade.Attachment",this.immutable=!1,this.setField("id",w),this.setField("name",D),this.setField("contenttype",Y),this.setField("size",ee),this.setField("exifinfo",U),this.immutable=!0}}},6729:(Ie,pe,j)=>{j.d(pe,{Z:()=>O});var X=j(15861),S=j(91365),V=j(25919),w=j(98362),D=j(47562),Y=j(21674);function ee(U,N,K=!1){if(null==U)return null;if((0,D.b)(U))return(0,D.g)(U);if((0,D.a)(U))return(0,D.h)(U);if((0,D.c)(U))return(0,D.j)(U);if((0,D.k)(U))return(0,D.l)(U,N);if((0,D.m)(U)){const Z=[];for(const te of U)Z.push(ee(te,N,K));return Z}const T=new O;T.immutable=!1;for(const Z of Object.keys(U)){const te=U[Z];void 0!==te&&T.setField(Z,ee(te,N,K))}return T.immutable=K,T}class O{constructor(N){this.declaredClass="esri.arcade.Dictionary",this.attributes=null,this.plain=!1,this.immutable=!0,this.attributes=N instanceof O?N.attributes:N??{}}field(N){const K=N.toLowerCase(),T=this.attributes[N];if(void 0!==T)return T;for(const Z in this.attributes)if(Z.toLowerCase()===K)return this.attributes[Z];throw new V.aV(null,V.rH.FieldNotFound,null,{key:N})}setField(N,K){if(this.immutable)throw new V.aV(null,V.rH.Immutable,null);if((0,D.i)(K))throw new V.aV(null,V.rH.NoFunctionInDictionary,null);const T=N.toLowerCase();if(K instanceof Date&&(K=S.iG.dateJSToArcadeDate(K)),void 0===this.attributes[N]){for(const Z in this.attributes)if(Z.toLowerCase()===T)return void(this.attributes[Z]=K);this.attributes[N]=K}else this.attributes[N]=K}hasField(N){const K=N.toLowerCase();if(void 0!==this.attributes[N])return!0;for(const T in this.attributes)if(T.toLowerCase()===K)return!0;return!1}keys(){let N=[];for(const K in this.attributes)N.push(K);return N=N.sort(),N}castToText(N=!1){let K="";for(const T in this.attributes){""!==K&&(K+=",");const Z=this.attributes[T];null==Z?K+=JSON.stringify(T)+":null":(0,D.a)(Z)||(0,D.b)(Z)||(0,D.c)(Z)?K+=JSON.stringify(T)+":"+JSON.stringify(Z):Z instanceof Y.Z?K+=JSON.stringify(T)+":"+(0,D.t)(Z):Z instanceof w.Z||Z instanceof Array?K+=JSON.stringify(T)+":"+(0,D.t)(Z,null,N):Z instanceof S.iG?K+=N?JSON.stringify(T)+":"+JSON.stringify(Z.getTime()):JSON.stringify(T)+":"+Z.stringify():null!==Z&&"object"==typeof Z&&void 0!==Z.castToText&&(K+=JSON.stringify(T)+":"+Z.castToText(N))}return"{"+K+"}"}static convertObjectToArcadeDictionary(N,K,T=!0){const Z=new O;Z.immutable=!1;for(const te in N){const k=N[te];void 0!==k&&Z.setField(te.toString(),ee(k,K))}return Z.immutable=T,Z}static convertJsonToArcade(N,K,T=!1){return ee(N,K,T)}castAsJson(N=null){const K={};for(let T in this.attributes){const Z=this.attributes[T];void 0!==Z&&(N?.keyTranslate&&(T=N.keyTranslate(T)),K[T]=(0,D.d)(Z,N))}return K}castDictionaryValueAsJsonAsync(N,K,T,Z=null,te){return(0,X.Z)(function*(){const k=yield(0,D.e)(T,Z,te);return N[K]=k,k})()}castAsJsonAsync(N=null,K=null){var T=this;return(0,X.Z)(function*(){const Z={},te=[];for(let k in T.attributes){const L=T.attributes[k];K?.keyTranslate&&(k=K.keyTranslate(k)),void 0!==L&&((0,D.f)(L)||L instanceof Y.Z||L instanceof S.iG?Z[k]=(0,D.d)(L,K):te.push(T.castDictionaryValueAsJsonAsync(Z,k,L,N,K)))}return te.length>0&&(yield Promise.all(te)),Z})()}}},42275:(Ie,pe,j)=>{j.d(pe,{Z:()=>Z});var X=j(15861),S=j(6729),V=j(98362),w=j(47562),D=j(21674),Y=j(72642),ee=j(91179),O=j(82054),U=j(62208),N=j(91365),K=j(25919),T=j(29050);class Z{constructor(){this.arcadeDeclaredClass="esri.arcade.Feature",this._optimizedGeomDefinition=null,this._geometry=null,this.attributes=null,this._layer=null,this._datesfixed=!0,this.dateTimeReferenceFieldIndex=null,this.contextTimeReference=null,this.immutable=!0,this._datefields=null,this.immutable=!0}static createFromGraphic(k,L){const b=new Z;return b.contextTimeReference=L??null,b._geometry=(0,U.pC)(k.geometry)?k.geometry:null,b.attributes=null==k.attributes?{}:k.attributes,k._sourceLayer?(b._layer=k._sourceLayer,b._datesfixed=!1):k._layer?(b._layer=k._layer,b._datesfixed=!1):k.layer&&"fields"in k.layer?(b._layer=k.layer,b._datesfixed=!1):k.sourceLayer&&"fields"in k.sourceLayer&&(b._layer=k.sourceLayer,b._datesfixed=!1),b._layer&&!1===b._datesfixed&&(b.dateTimeReferenceFieldIndex=void 0!==b._layer.dateTimeReferenceFieldIndex?b._layer.dateTimeReferenceFieldIndex:T.nu.createFromLayer(b._layer)),b}static createFromArcadeFeature(k){const L=new Z;return L._datesfixed=k._datesfixed,L.attributes=k.attributes,L._geometry=k._geometry,L._optimizedGeomDefinition=k._optimizedGeomDefinition,k._layer&&(L._layer=k._layer),L.dateTimeReferenceFieldIndex=k.dateTimeReferenceFieldIndex,L.contextTimeReference=k.contextTimeReference,L}static createFromOptimisedFeature(k,L,b){const M=new Z;return M._geometry=k.geometry?{geometry:k.geometry}:null,M._optimizedGeomDefinition=b,M.attributes=k.attributes||{},M._layer=L,M._datesfixed=!1,M}static createFromArcadeDictionary(k){const L=new Z;return L.attributes=k.field("attributes"),null!==L.attributes&&L.attributes instanceof S.Z?(L.attributes=L.attributes.attributes,null===L.attributes&&(L.attributes={})):L.attributes={},L._geometry=k.field("geometry"),null!==L._geometry&&(L._geometry instanceof S.Z?L._geometry=Z.parseGeometryFromDictionary(L._geometry):L._geometry instanceof D.Z||(L._geometry=null)),L}static createFromGraphicLikeObject(k,L,b=null,M){const x=new Z;return x.contextTimeReference=M??null,null===L&&(L={}),x.attributes=L,x._geometry=(0,U.pC)(k)?k:null,x._layer=b,x._layer&&(x._datesfixed=!1,x.dateTimeReferenceFieldIndex=void 0!==x._layer.dateTimeReferenceFieldIndex?x._layer.dateTimeReferenceFieldIndex:T.nu.createFromLayer(x._layer)),x}repurposeFromGraphicLikeObject(k,L,b=null){null===L&&(L={}),this.attributes=L,this._geometry=k||null,this._layer=b,this._datesfixed=!this._layer}get layerPreferredTimeZone(){return this.dateTimeReferenceFieldIndex?.layerPreferredTimeZone??""}fieldSourceTimeZone(k){return this.dateTimeReferenceFieldIndex?.fieldTimeZone(k)??""}castToText(k=!1){let L="";!1===this._datesfixed&&this._fixDates();for(const b in this.attributes){""!==L&&(L+=",");const M=this.attributes[b];null==M?L+=JSON.stringify(b)+":null":(0,w.a)(M)||(0,w.b)(M)||(0,w.c)(M)?L+=JSON.stringify(b)+":"+JSON.stringify(M):M instanceof D.Z?L+=JSON.stringify(b)+":"+(0,w.t)(M):M instanceof V.Z||M instanceof Array?L+=JSON.stringify(b)+":"+(0,w.t)(M,null,k):M instanceof N.iG?L+=k?JSON.stringify(b)+":"+JSON.stringify(M.getTime()):JSON.stringify(b)+":"+M.stringify():null!==M&&"object"==typeof M&&void 0!==M.castToText&&(L+=JSON.stringify(b)+":"+M.castToText(k))}return'{"geometry":'+(null===this.geometry()?"null":(0,w.t)(this.geometry()))+',"attributes":{'+L+"}}"}_fixDates(){if(null!==this._datefields)return this._datefields.length>0&&this._fixDateFields(this._datefields),void(this._datesfixed=!0);const k=[],L=this._layer.fields;for(let b=0;b<L.length;b++){const M=L[b],x=M.type;"date"!==x&&"esriFieldTypeDate"!==x||k.push(M.name)}this._datefields=k,k.length>0&&this._fixDateFields(k),this._datesfixed=!0}isUnknownDateTimeField(k){return"unknown"===this.dateTimeReferenceFieldIndex?.fieldTimeZone(k)}_fixDateFields(k){this.attributes={...this.attributes};const L=this.contextTimeReference?.timeZone??"system";for(let b=0;b<k.length;b++){let M=this.attributes[k[b]];if(null!==M)if(void 0===M){for(const x in this.attributes)if(x.toLowerCase()===k[b].toLowerCase()){if(M=this.attributes[x],null!==M){const f=this.isUnknownDateTimeField(x);this.attributes[x]=(0,w.k)(M)?M:M instanceof Date?f?N.iG.unknownDateJSToArcadeDate(M):N.iG.dateJSAndZoneToArcadeDate(M,L):f?N.iG.unknownEpochToArcadeDate(M):N.iG.epochToArcadeDate(M,L)}break}}else{const x=this.isUnknownDateTimeField(k[b]);this.attributes[k[b]]=(0,w.k)(M)?M:M instanceof Date?x?N.iG.unknownDateJSToArcadeDate(M):N.iG.dateJSAndZoneToArcadeDate(M,L):x?N.iG.unknownEpochToArcadeDate(M):N.iG.epochToArcadeDate(M,L)}}}geometry(){return null===this._geometry||this._geometry instanceof D.Z||(this._optimizedGeomDefinition?(this._geometry=(0,U.Wg)((0,ee.im)((0,O.di)(this._geometry,this._optimizedGeomDefinition.geometryType,this._optimizedGeomDefinition.hasZ,this._optimizedGeomDefinition.hasM))),this._geometry.spatialReference=this._optimizedGeomDefinition.spatialReference):this._geometry=(0,U.Wg)((0,ee.im)(this._geometry))),this._geometry}field(k){!1===this._datesfixed&&this._fixDates();const L=this.attributes[k];if(void 0!==L)return L;const b=k.toLowerCase();for(const M in this.attributes)if(M.toLowerCase()===b)return this.attributes[M];if(this._hasFieldDefinition(b))return null;throw new K.aV(null,K.rH.FieldNotFound,null,{key:k})}_hasFieldDefinition(k){if(null===this._layer)return!1;for(let L=0;L<this._layer.fields.length;L++)if(this._layer.fields[L].name.toLowerCase()===k)return!0;return!1}setField(k,L){if(this.immutable)throw new K.aV(null,K.rH.Immutable,null);if(L instanceof Date&&(L=this.isUnknownDateTimeField(k)?N.iG.unknownDateJSToArcadeDate(L):N.iG.dateJSToArcadeDate(L)),!1===(0,w.f)(L))throw new K.aV(null,K.rH.TypeNotAllowedInFeature,null);const b=k.toLowerCase();if(void 0===this.attributes[k]){for(const M in this.attributes)if(M.toLowerCase()===b)return void(this.attributes[M]=L);this.attributes[k]=L}else this.attributes[k]=L}hasField(k){const L=k.toLowerCase();if(void 0!==this.attributes[k])return!0;for(const b in this.attributes)if(b.toLowerCase()===L)return!0;return!!this._hasFieldDefinition(L)}keys(){let k=[];const L={};for(const b in this.attributes)k.push(b),L[b.toLowerCase()]=1;if(null!==this._layer)for(let b=0;b<this._layer.fields.length;b++){const M=this._layer.fields[b];1!==L[M.name.toLowerCase()]&&k.push(M.name)}return k=k.sort(),k}static parseGeometryFromDictionary(k){const L=Z._convertDictionaryToJson(k,!0);return void 0!==L.hasm&&(L.hasM=L.hasm,delete L.hasm),void 0!==L.hasz&&(L.hasZ=L.hasz,delete L.hasz),void 0!==L.spatialreference&&(L.spatialReference=L.spatialreference,delete L.spatialreference),void 0!==L.rings&&(L.rings=this._fixPathArrays(L.rings,!0===L.hasZ,!0===L.hasZ)),void 0!==L.paths&&(L.paths=this._fixPathArrays(L.paths,!0===L.hasZ,!0===L.hasM)),void 0!==L.points&&(L.points=this._fixPointArrays(L.points,!0===L.hasZ,!0===L.hasM)),(0,ee.im)(L)}static _fixPathArrays(k,L,b){const M=[];if(k instanceof Array)for(let x=0;x<k.length;x++)M.push(this._fixPointArrays(k[x],L,b));else if(k instanceof V.Z)for(let x=0;x<k.length();x++)M.push(this._fixPointArrays(k.get(x),L,b));return M}static _fixPointArrays(k,L,b){const M=[];if(k instanceof Array)for(let x=0;x<k.length;x++){const f=k[x];M.push(f instanceof Y.Z?L&&b?[f.x,f.y,f.z,f.m]:L?[f.x,f.y,f.z]:b?[f.x,f.y,f.m]:[f.x,f.y]:f instanceof V.Z?f.toArray():f)}else if(k instanceof V.Z)for(let x=0;x<k.length();x++){const f=k.get(x);M.push(f instanceof Y.Z?L&&b?[f.x,f.y,f.z,f.m]:L?[f.x,f.y,f.z]:b?[f.x,f.y,f.m]:[f.x,f.y]:f instanceof V.Z?f.toArray():f)}return M}static _convertDictionaryToJson(k,L=!1){const b={};for(const M in k.attributes){let x=k.attributes[M];x instanceof S.Z&&(x=Z._convertDictionaryToJson(x)),L?b[M.toLowerCase()]=x:b[M]=x}return b}static parseAttributesFromDictionary(k){const L={};for(const b in k.attributes){const M=k.attributes[b];if(!(0,w.f)(M))throw new K.aV(null,K.rH.InvalidParameter,null);L[b]=M}return L}static fromJson(k,L){let b=null;null!=k.geometry&&(b=(0,ee.im)(k.geometry));const M={};if(null!=k.attributes)for(const x in k.attributes){const f=k.attributes[x];if(null===f)M[x]=f;else{if(!((0,w.c)(f)||(0,w.b)(f)||(0,w.a)(f)||(0,w.k)(f)))throw new K.aV(null,K.rH.InvalidParameter,null);M[x]=f}}return Z.createFromGraphicLikeObject(b,M,null,L??null)}fullSchema(){return this._layer}gdbVersion(){if(null===this._layer)return"";const k=this._layer.gdbVersion;return void 0===k?"":""===k&&this._layer.capabilities&&this._layer.capabilities.isVersioned?"SDE.DEFAULT":k}castAsJson(k){const L={attributes:{},geometry:!0===k?.keepGeometryType?this.geometry():this.geometry()?.toJSON()??null};for(const b in this.attributes){const M=this.attributes[b];void 0!==M&&(L.attributes[b]=(0,w.d)(M,k))}return L}castAsJsonAsync(k=null,L){var b=this;return(0,X.Z)(function*(){return b.castAsJson(L)})()}}},7652:(Ie,pe,j)=>{j.d(pe,{Bx:()=>w,Rm:()=>S,Vg:()=>D,aq:()=>V});var X=j(10699);class S{constructor(){}}function V(Y,ee,O){if(Y instanceof S&&!(Y instanceof D)){const U=new D;return U.fn=Y,U.parameterEvaluator=O,U.context=ee,U}return Y}class w extends S{constructor(ee){super(),this.fn=ee}createFunction(ee){return(...O)=>this.fn(ee,{preparsed:!0,arguments:O})}call(ee,O){return this.fn(ee,O)}marshalledCall(ee,O,U,N){return N(ee,O,(K,T,Z)=>{Z=Z.map(k=>k instanceof S&&!(k instanceof D)?V(k,ee,N):k);const te=this.call(U,{args:Z});return(0,X.y8)(te)?te.then(k=>V(k,U,N)):te})}}class D extends S{constructor(){super(...arguments),this.fn=null,this.context=null}createFunction(ee){return this.fn.createFunction(this.context)}call(ee,O){return this.fn.marshalledCall(ee,O,this.context,this.parameterEvaluator)}marshalledCall(ee,O,U){return this.fn.marshalledCall(ee,O,this.context,this.parameterEvaluator)}}},98362:(Ie,pe,j)=>{j.d(pe,{Z:()=>X});class X{constructor(V=[]){this._elements=V}length(){return this._elements.length}get(V){return this._elements[V]}toArray(){const V=[];for(let w=0;w<this.length();w++)V.push(this.get(w));return V}}},5371:(Ie,pe,j)=>{j.d(pe,{Z:()=>V});var X=j(98362),S=j(26685);class V extends X.Z{constructor(D,Y,ee,O,U){super(D),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=ee,this._hasM=O,this._spRef=Y,this._cacheId=U}get(D){if(void 0===this._lazyPath[D]){const Y=this._elements[D];if(void 0===Y)return;this._lazyPath[D]=new S.Z(Y,this._spRef,this._hasZ,this._hasM,this._cacheId,D)}return this._lazyPath[D]}equalityTest(D){return D===this||null!==D&&D instanceof V&&D.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}},26685:(Ie,pe,j)=>{j.d(pe,{Z:()=>V});var X=j(98362),S=j(72642);class V extends X.Z{constructor(D,Y,ee,O,U,N){super(D),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=Y,this._hasZ=ee,this._hasM=O,this._cacheId=U,this._partId=N}get(D){if(void 0===this._lazyPt[D]){const Y=this._elements[D];if(void 0===Y)return;const ee=this._hasZ,O=this._hasM;let U=null;U=ee&&!O?new S.Z(Y[0],Y[1],Y[2],void 0,this._spRef):O&&!ee?new S.Z(Y[0],Y[1],void 0,Y[2],this._spRef):ee&&O?new S.Z(Y[0],Y[1],Y[2],Y[3],this._spRef):new S.Z(Y[0],Y[1],this._spRef),U.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+D.toString(),this._lazyPt[D]=U}return this._lazyPt[D]}equalityTest(D){return D===this||null!==D&&D instanceof V&&D.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}}},29050:(Ie,pe,j)=>{j.d(pe,{nu:()=>U}),j(91365);var S=j(60466),D=(j(41039),j(21837),j(60194));class U{constructor(){this.dateTimeReferenceMetaData=null,this._fieldTimeZoneIndex={},this._fieldIndex=null,this._ianaPreferred=null,this._ianaTimeInfo=null,this._ianaEditFields=null,this._ianaLayerDateFields=null}static create(K,T){const Z=new U;return Z.dateTimeReferenceMetaData=T,Z._fieldIndex=K instanceof S.Z?K:new S.Z(K),Z}static createFromLayer(K){if(!K)return null;if(!K.fieldsIndex)return!K.declaredClass&&K.fields?U.create(K.fields,K):null;const T=new U;return T._fieldIndex=K.fieldsIndex,T.dateTimeReferenceMetaData={timeInfo:K?.timeInfo?.toJSON()??null,editFieldsInfo:K?.editFieldsInfo?.toJSON()??null,dateFieldsTimeReference:K?.dateFieldsTimeReference?.toJSON()??null,preferredTimeReference:K?.preferredTimeReference?.toJSON()??null,datesInUnknownTimezone:!0===K?.datesInUnknownTimezone},T}fieldTimeZone(K){const T=this._fieldIndex?.get(K);if(!T||"date"!==T.type&&"esriFieldTypeDate"!==T.type)return null;const Z=this._fieldTimeZoneIndex[T.name];if(void 0!==Z)return Z;const te=[{field:this.dateTimeReferenceMetaData?.editFieldsInfo?.creationDateField,timeReference:this.dateTimeReferenceMetaData?.editFieldsInfo?.dateFieldsTimeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone},{field:this.dateTimeReferenceMetaData?.editFieldsInfo?.editDateField,timeReference:this.dateTimeReferenceMetaData?.editFieldsInfo?.dateFieldsTimeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone},{field:this.dateTimeReferenceMetaData?.timeInfo?.startTimeField,timeReference:this.dateTimeReferenceMetaData?.timeInfo?.timeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone},{field:this.dateTimeReferenceMetaData?.timeInfo?.endTimeField,timeReference:this.dateTimeReferenceMetaData?.timeInfo?.timeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone}];for(const L of te)if(L.field===T.name){const b=this.convertToIANA(L.timeReference,L.isunknown);return this._fieldTimeZoneIndex[T.name]=b,b}const k=this.convertToIANA(this.dateTimeReferenceMetaData?.dateFieldsTimeReference,this.dateTimeReferenceMetaData?.datesInUnknownTimezone);return this._fieldTimeZoneIndex[T.name]=k,k}convertToIANA(K,T){return T?"unknown":function O(N){return N?.timeZoneIANA?N?.timeZoneIANA:N?.timeZone?(0,D.G)(N,""):""}(K)}get layerPreferredTimeZone(){if(null!==this._ianaPreferred)return this._ianaPreferred;this._ianaPreferred="";const K=this.dateTimeReferenceMetaData?.preferredTimeReference;return this._ianaPreferred=this.convertToIANA(K,!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone),this._ianaPreferred}get layerTimeInfoTimeZone(){if(null!==this._ianaTimeInfo)return this._ianaTimeInfo;this._ianaTimeInfo="";const K=this.dateTimeReferenceMetaData?.timeInfo?.timeReference;return this._ianaTimeInfo=this.convertToIANA(K,!1),this._ianaTimeInfo}get layerEditFieldsTimeZone(){if(null!==this._ianaEditFields)return this._ianaEditFields;this._ianaEditFields="";const K=this.dateTimeReferenceMetaData?.editFieldsInfo?.dateFieldsTimeReference;return this._ianaEditFields=this.convertToIANA(K,this.dateTimeReferenceMetaData?.datesInUnknownTimezone),this._ianaEditFields}get layerDateFieldsTimeZone(){if(null!==this._ianaLayerDateFields)return this._ianaLayerDateFields;this._ianaLayerDateFields="";const K=this.dateTimeReferenceMetaData?.dateFieldsTimeReference;return this._ianaLayerDateFields=this.convertToIANA(K,!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone),this._ianaLayerDateFields}}},77132:(Ie,pe,j)=>{j.d(pe,{Bj:()=>w,EI:()=>L,HD:()=>O,JW:()=>Y,J_:()=>T,Lz:()=>M,NP:()=>Z,Qk:()=>C,SV:()=>b,Sh:()=>ee,US:()=>B,dj:()=>D,hd:()=>$,hj:()=>N,q2:()=>z,tI:()=>f,tt:()=>te,yE:()=>H});var w,D,G,X=j(91365),S=j(2004),V=j(36255);function Y(G){return V.Z.fromJSON(G.toJSON())}function ee(G){return G.toJSON?G.toJSON():G}function O(G){return"string"==typeof G||G instanceof String}function N(G){return"number"==typeof G}function T(G){return G instanceof Date}function Z(G){return G instanceof X.iG}function te(G,re){return G===re||!(!T(G)&&!Z(G)||!T(re)&&!Z(re))&&G.getTime()===re.getTime()}function L(G){if(null==G)return null;if("number"==typeof G)return G;switch(G.toLowerCase()){case"meters":case"meter":return 109404;case"miles":case"mile":return 109439;case"kilometers":case"kilometer":case"km":return 109414}return null}function b(G){if(null==G)return null;switch(G.type){case"polygon":case"multipoint":case"polyline":return G.extent;case"point":return new S.Z({xmin:G.x,ymin:G.y,xmax:G.x,ymax:G.y,spatialReference:G.spatialReference});case"extent":return G}return null}function M(G){if(null==G)return null;if("number"==typeof G||"number"==typeof G)return G;switch(G.toLowerCase()){case"meters":case"meter":return 9001;case"miles":case"mile":return 9093;case"kilometers":case"kilometer":case"km":return 9036}return null}(G=w||(w={}))[G.Standardised=0]="Standardised",G[G.StandardisedNoInterval=1]="StandardisedNoInterval",G[G.SqlServer=2]="SqlServer",G[G.Oracle=3]="Oracle",G[G.Postgres=4]="Postgres",G[G.PGDB=5]="PGDB",G[G.FILEGDB=6]="FILEGDB",G[G.NotEvaluated=7]="NotEvaluated",function(G){G[G.InFeatureSet=0]="InFeatureSet",G[G.NotInFeatureSet=1]="NotInFeatureSet",G[G.Unknown=2]="Unknown"}(D||(D={}));const f=1e3,C={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},z={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},H={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};function B(G){return void 0===G?"":G=(G=(G=G.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function $(G,re){re||(re={}),"function"==typeof re&&(re={cmp:re});const oe="boolean"==typeof re.cycles&&re.cycles,ce=re.cmp&&(Te=re.cmp,function(de){return function(ne,me){return Te({key:ne,value:de[ne]},{key:me,value:de[me]})}});var Te;const ge=[];return function de(ne){if(ne&&ne.toJSON&&"function"==typeof ne.toJSON&&(ne=ne.toJSON()),void 0===ne)return;if("number"==typeof ne)return isFinite(ne)?""+ne:"null";if("object"!=typeof ne)return JSON.stringify(ne);let me,we;if(Array.isArray(ne)){for(we="[",me=0;me<ne.length;me++)me&&(we+=","),we+=de(ne[me])||"null";return we+"]"}if(null===ne)return"null";if(ge.includes(ne)){if(oe)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const _e=ge.push(ne)-1,$e=Object.keys(ne).sort(ce&&ce(ne));for(we="",me=0;me<$e.length;me++){const Ye=$e[me],Le=de(ne[Ye]);Le&&(we&&(we+=","),we+=JSON.stringify(Ye)+":"+Le)}return ge.splice(_e,1),"{"+we+"}"}(G)}},85692:(Ie,pe,j)=>{j.d(pe,{AW:()=>V,Ay:()=>Z,B9:()=>x,Es:()=>y,RI:()=>M,_R:()=>Y,nB:()=>z,s9:()=>T,ws:()=>F});var X=j(72642),S=j(11519);function V(H,h,B){return Math.sqrt((H[0]-h[0])**2+(H[1]-h[1])**2+(void 0!==H[2]&&void 0!==h[2]?(H[2]*B-h[2]*B)**2:0))}const w=[];for(const H of[[9002,56146130,6131,6132,8050,8051,8228],[9003,5702,6358,6359,6360,8052,8053],[9095,5754]]){const h=H[0];for(let B=1;B<H.length;B++)w[H[B]]=h}const D=[];function Y(H){return H.vcsWkid&&void 0!==w[H.vcsWkid]?D[w[H.vcsWkid]]:H.latestVcsWkid&&void 0!==w[H.latestVcsWkid]?D[w[H.latestVcsWkid]]:1}function ee(H,h,B){const $={x:0,y:0};h&&($.z=0),B&&($.m=0);let G=0,re=H[0];for(let oe=0;oe<H.length;oe++){const ce=H[oe];if(!1===K(ce,re)){const Te=N(re,ce,h),ge=O(re,ce,h,B);ge.x*=Te,ge.y*=Te,$.x+=ge.x,$.y+=ge.y,h&&(ge.z*=Te,$.z+=ge.z),B&&(ge.m*=Te,$.m+=ge.m),G+=Te,re=ce}}return G>0?($.x/=G,$.y/=G,h&&($.z/=G),B&&($.m/=G)):($.x=H[0][0],$.y=H[0][1],h&&($.z=H[0][2]),B&&h?$.m=H[0][3]:B&&($.m=H[0][2])),$}function O(H,h,B,$){const G={x:(H[0]+h[0])/2,y:(H[1]+h[1])/2};return B&&(G.z=(H[2]+h[2])/2),B&&$?G.m=(H[3]+h[3])/2:$&&(G.m=(H[2]+h[2])/2),G}function U(H,h){if(H.length<=1)return 0;let B=0;for(let $=1;$<H.length;$++)B+=N(H[$-1],H[$],h);return B}function N(H,h,B){const $=h[0]-H[0],G=h[1]-H[1];if(B){const re=h[2]-h[2];return Math.sqrt($*$+G*G+re*re)}return Math.sqrt($*$+G*G)}function K(H,h){if(H.length!==h.length)return!1;for(let B=0;B<H.length;B++)if(H[B]!==h[B])return!1;return!0}function T(H){const h={x:0,y:0,spatialReference:H.spatialReference.toJSON()},B={x:0,y:0,spatialReference:H.spatialReference.toJSON()};let $=0,G=0;for(let re=0;re<H.paths.length;re++){if(0===H.paths[re].length)continue;const oe=U(H.paths[re],!0===H.hasZ);if(0===oe){const ce=ee(H.paths[re],!0===H.hasZ,!0===H.hasM);h.x+=ce.x,h.y+=ce.y,!0===H.hasZ&&(h.z+=ce.z),!0===H.hasM&&(h.m+=ce.m),++$}else{const ce=ee(H.paths[re],!0===H.hasZ,!0===H.hasM);B.x+=ce.x*oe,B.y+=ce.y*oe,!0===H.hasZ&&(B.z+=ce.z*oe),!0===H.hasM&&(B.m+=ce.m*oe),G+=oe}}return G>0?(B.x/=G,B.y/=G,!0===H.hasZ&&(B.z/=G),!0===H.hasM&&(B.m/=G),new X.Z(B)):$>0?(h.x/=$,h.y/=$,!0===H.hasZ&&(B.z/=$),!0===H.hasM&&(h.m/=$),new X.Z(h)):null}function Z(H){if(0===H.points.length)return null;let h=0,B=0,$=0,G=0;for(let oe=0;oe<H.points.length;oe++){const ce=H.getPoint(oe);!0===ce.hasZ&&($+=ce.z),!0===ce.hasM&&(G+=ce.m),h+=ce.x,B+=ce.y,G+=ce.m}const re={x:h/H.points.length,y:B/H.points.length,spatialReference:null};return re.spatialReference=H.spatialReference.toJSON(),!0===H.hasZ&&(re.z=$/H.points.length),!0===H.hasM&&(re.m=G/H.points.length),new X.Z(re)}function L(H,h,B=0){for(;H<B;)H+=h;const $=B+h;for(;H>=$;)H-=h;return H}function b(H,h){return Math.atan2(h.y-H.y,h.x-H.x)}function M(H,h){return L(b(H,h),2*Math.PI)*(180/Math.PI)}function x(H,h){return L(Math.PI/2-b(H,h),2*Math.PI)*(180/Math.PI)}function f(H,h,B){const $={x:H.x-h.x,y:H.y-h.y},G={x:B.x-h.x,y:B.y-h.y};return Math.atan2(function k(H,h){return H.x*h.y-h.x*H.y}($,G),function te(H,h){return H.x*h.x+H.y*h.y}($,G))}function F(H,h,B){return L(f(H,h,B),2*Math.PI)*(180/Math.PI)}function y(H,h,B){return L(-1*f(H,h,B),2*Math.PI)*(180/Math.PI)}D[9002]=.3048,D[9003]=.3048006096012192,D[9095]=.3048007491;const C=[0,0];function z(H){for(let h=0;h<H.length;h++){const B=H[h];for(let G=0;G<B.length-1;G++){const re=B[G],oe=B[G+1];for(let ce=h+1;ce<H.length;ce++)for(let Te=0;Te<H[ce].length-1;Te++){const ge=H[ce][Te],de=H[ce][Te+1];if((0,S.UT)(re,oe,ge,de,C)&&!(C[0]===re[0]&&C[1]===re[1]||C[0]===ge[0]&&C[1]===ge[1]||C[0]===oe[0]&&C[1]===oe[1]||C[0]===de[0]&&C[1]===de[1]))return!0}}const $=B.length;if(!($<3))for(let G=0;G<=$-2;G++){const re=B[G],oe=B[G+1];for(let ce=G+2;ce<=$-2;ce++){const Te=B[ce],ge=B[ce+1];if((0,S.UT)(re,oe,Te,ge,C)&&!(C[0]===re[0]&&C[1]===re[1]||C[0]===Te[0]&&C[1]===Te[1]||C[0]===oe[0]&&C[1]===oe[1]||C[0]===ge[0]&&C[1]===ge[1]))return!0}}}return!1}},84228:(Ie,pe,j)=>{j.d(pe,{r:()=>T});var X=j(91365),S=j(47562),V=j(25919),w=j(56683),D=j(21837);const O=[0,31,59,90,120,151,181,212,243,273,304,334],U=[0,31,60,91,121,152,182,213,244,274,305,335];function N(Z){return null===Z?Z:!1===Z.isValid?null:Z}function K(Z,te){return""===Z||"default"===Z.toLowerCase().trim()?(0,S.C)(te):Z}function T(Z,te){Z.today=function(k,L){return te(k,L,(b,M,x)=>{(0,S.y)(x,0,0,k,L);const f=new Date;return f.setHours(0,0,0,0),X.iG.dateJSAndZoneToArcadeDate(f,(0,S.C)(k))})},Z.changetimezone=function(k,L){return te(k,L,(b,M,x)=>{(0,S.y)(x,2,2,k,L);const f=(0,S.l)(x[0],(0,S.C)(k));if(null===f)return null;const F=X.iG.arcadeDateAndZoneToArcadeDate(f,K((0,S.j)(x[1]),k));return!1===F.isValid?null:F})},Z.timezone=function(k,L){return te(k,L,(b,M,x)=>{(0,S.y)(x,1,2,k,L);const f=(0,S.l)(x[0],(0,S.C)(k));if(null===f)return null;const F=f.timeZone;return"system"===F?X.iG.systemTimeZoneCanonicalName:F})},Z.timezoneoffset=function(k,L){return te(k,L,(b,M,x)=>{(0,S.y)(x,1,1,k,L);const f=(0,S.l)(x[0],(0,S.C)(k));return null===f?null:f.timeZoneOffset})},Z.now=function(k,L){return te(k,L,(b,M,x)=>{(0,S.y)(x,0,0,k,L);const f=X.iG.nowToArcadeDate((0,S.C)(k));return!1===f.isValid?null:f})},Z.timestamp=function(k,L){return te(k,L,(b,M,x)=>{(0,S.y)(x,0,0,k,L);const f=X.iG.nowUTCToArcadeDate();return!1===f.isValid?null:f})},Z.toutc=function(k,L){return te(k,L,(b,M,x)=>{(0,S.y)(x,1,1,k,L);const f=(0,S.l)(x[0],(0,S.C)(k));return null===f?null:f.toUTC()})},Z.tolocal=function(k,L){return te(k,L,(b,M,x)=>{(0,S.y)(x,1,1,k,L);const f=(0,S.l)(x[0],(0,S.C)(k));return null===f?null:f.toLocal()})},Z.day=function(k,L){return te(k,L,(b,M,x)=>{(0,S.y)(x,1,1,k,L);const f=(0,S.l)(x[0],(0,S.C)(k));return null===f?NaN:f.day})},Z.month=function(k,L){return te(k,L,(b,M,x)=>{(0,S.y)(x,1,1,k,L);const f=(0,S.l)(x[0],(0,S.C)(k));return null===f?NaN:f.monthJS})},Z.year=function(k,L){return te(k,L,(b,M,x)=>{(0,S.y)(x,1,1,k,L);const f=(0,S.l)(x[0],(0,S.C)(k));return null===f?NaN:f.year})},Z.hour=function(k,L){return te(k,L,(b,M,x)=>{(0,S.y)(x,1,1,k,L);const f=(0,S.l)(x[0],(0,S.C)(k));return null===f?NaN:f.hour})},Z.second=function(k,L){return te(k,L,(b,M,x)=>{(0,S.y)(x,1,1,k,L);const f=(0,S.l)(x[0],(0,S.C)(k));return null===f?NaN:f.second})},Z.millisecond=function(k,L){return te(k,L,(b,M,x)=>{(0,S.y)(x,1,1,k,L);const f=(0,S.l)(x[0],(0,S.C)(k));return null===f?NaN:f.millisecond})},Z.minute=function(k,L){return te(k,L,(b,M,x)=>{(0,S.y)(x,1,1,k,L);const f=(0,S.l)(x[0],(0,S.C)(k));return null===f?NaN:f.minute})},Z.week=function(k,L){return te(k,L,(b,M,x)=>{(0,S.y)(x,1,2,k,L);const f=(0,S.l)(x[0],(0,S.C)(k));if(null===f)return NaN;const F=(0,S.g)((0,S.A)(x[1],0));if(F<0||F>6)throw new V.aV(k,V.rH.InvalidParameter,L);const H=f.dayOfWeekJS,h=function Y(Z,te,k){return Z+(function ee(Z){return Z%4==0&&(Z%100!=0||Z%400==0)}(k)?U:O)[te]}(f.day,f.monthJS,f.year)-1,B=Math.floor(h/7);return H-F+(H-F<0?7:0)<h-7*B?B+1:B})},Z.weekday=function(k,L){return te(k,L,(b,M,x)=>{(0,S.y)(x,1,1,k,L);const f=(0,S.l)(x[0],(0,S.C)(k));return null===f?NaN:f.dayOfWeekJS})},Z.isoweekday=function(k,L){return te(k,L,(b,M,x)=>{(0,S.y)(x,1,1,k,L);const f=(0,S.l)(x[0],(0,S.C)(k));return null===f?NaN:f.dayOfWeekISO})},Z.isomonth=function(k,L){return te(k,L,(b,M,x)=>{(0,S.y)(x,1,1,k,L);const f=(0,S.l)(x[0],(0,S.C)(k));return null===f?NaN:f.monthISO})},Z.isoweek=function(k,L){return te(k,L,(b,M,x)=>{(0,S.y)(x,1,1,k,L);const f=(0,S.l)(x[0],(0,S.C)(k));return null===f?NaN:f.weekISO})},Z.isoyear=function(k,L){return te(k,L,(b,M,x)=>{(0,S.y)(x,1,1,k,L);const f=(0,S.l)(x[0],(0,S.C)(k));return null===f?NaN:f.yearISO})},Z.date=function(k,L){return te(k,L,(b,M,x)=>{if((0,S.y)(x,0,8,k,L),3===x.length)return N(X.iG.fromParts((0,S.g)(x[0]),(0,S.g)(x[1])+1,(0,S.g)(x[2]),0,0,0,0,(0,S.C)(k)));if(4===x.length)return N(X.iG.fromParts((0,S.g)(x[0]),(0,S.g)(x[1])+1,(0,S.g)(x[2]),(0,S.g)(x[3]),0,0,0,(0,S.C)(k)));if(5===x.length)return N(X.iG.fromParts((0,S.g)(x[0]),(0,S.g)(x[1])+1,(0,S.g)(x[2]),(0,S.g)(x[3]),(0,S.g)(x[4]),0,0,(0,S.C)(k)));if(6===x.length)return N(X.iG.fromParts((0,S.g)(x[0]),(0,S.g)(x[1])+1,(0,S.g)(x[2]),(0,S.g)(x[3]),(0,S.g)(x[4]),(0,S.g)(x[5]),0,(0,S.C)(k)));if(7===x.length)return N(X.iG.fromParts((0,S.g)(x[0]),(0,S.g)(x[1])+1,(0,S.g)(x[2]),(0,S.g)(x[3]),(0,S.g)(x[4]),(0,S.g)(x[5]),(0,S.g)(x[6]),(0,S.C)(k)));if(8===x.length)return N(X.iG.fromParts((0,S.g)(x[0]),(0,S.g)(x[1])+1,(0,S.g)(x[2]),(0,S.g)(x[3]),(0,S.g)(x[4]),(0,S.g)(x[5]),(0,S.g)(x[6]),K((0,S.j)(x[7]),k)));if(2===x.length){let f,F=(0,S.j)(x[1]);return""===F?null:(F=(0,S.D)(F),f="X"===F?D.ou.fromSeconds((0,S.g)(x[0])):"x"===F?D.ou.fromMillis((0,S.g)(x[0])):D.ou.fromFormat((0,S.j)(x[0]),F,{locale:(0,w.Kd)(),numberingSystem:"latn"}),f.isValid?X.iG.dateTimeToArcadeDate(f):null)}if(1===x.length){if((0,S.c)(x[0])){if(""===x[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(x[0]))return(0,S.l)(x[0]+"-01-01",(0,S.C)(k))}const f=(0,S.g)(x[0]);if(!1===isNaN(f)){const F=D.ou.fromMillis(f);return F.isValid?X.iG.dateTimeAndZoneToArcadeDate(F,(0,S.C)(k)):null}return(0,S.l)(x[0],(0,S.C)(k))}return 0===x.length?X.iG.nowToArcadeDate((0,S.C)(k)):null})},Z.datediff=function(k,L){return te(k,L,(b,M,x)=>{(0,S.y)(x,2,4,k,L);let f=(0,S.l)(x[0],(0,S.C)(k)),F=(0,S.l)(x[1],(0,S.C)(k));if(null===f||null===F)return NaN;let y=(0,S.A)(x[3],"");switch(""!==y&&null!==y?(y=(0,S.j)(y),f=X.iG.arcadeDateAndZoneToArcadeDate(f,y),F=X.iG.arcadeDateAndZoneToArcadeDate(F,y)):f.timeZone!==F.timeZone&&(f.isUnknownTimeZone?f=X.iG.arcadeDateAndZoneToArcadeDate(f,F.timeZone):F=X.iG.arcadeDateAndZoneToArcadeDate(F,f.timeZone)),(0,S.j)(x[2]).toLowerCase()){case"days":case"day":case"d":return f.diff(F,"days");case"months":case"month":return f.diff(F,"months");case"minutes":case"minute":case"m":return f.diff(F,"M"===x[2]?"months":"minutes");case"seconds":case"second":case"s":return f.diff(F,"seconds");case"milliseconds":case"millisecond":case"ms":default:return f.diff(F);case"hours":case"hour":case"h":return f.diff(F,"hours");case"years":case"year":case"y":return f.diff(F,"years")}})},Z.dateadd=function(k,L){return te(k,L,(b,M,x)=>{(0,S.y)(x,2,3,k,L);const f=(0,S.l)(x[0],(0,S.C)(k));if(null===f)return null;let F=(0,S.g)(x[1]);if(isNaN(F))return f;let y="milliseconds";switch((0,S.j)(x[2]).toLowerCase()){case"days":case"day":case"d":y="days",F=(0,S.E)(F);break;case"months":case"month":y="months",F=(0,S.E)(F);break;case"minutes":case"minute":case"m":y="M"===x[2]?"months":"minutes";break;case"seconds":case"second":case"s":y="seconds";break;case"milliseconds":case"millisecond":case"ms":y="milliseconds";break;case"hours":case"hour":case"h":y="hours";break;case"years":case"year":case"y":y="years"}return f.plus({[y]:F})})}}},50818:(Ie,pe,j)=>{j.d(pe,{t:()=>ee});var X=j(47562);function S(O){let U=0;for(let N=0;N<O.length;N++)U+=O[N];return U/O.length}function V(O){const U=S(O);let N=0;for(let K=0;K<O.length;K++)N+=(U-O[K])**2;return N/O.length}function ee(O,U,N=1e3){switch(O.toLowerCase()){case"distinct":return function D(O,U){const N=[],K={},T=[];for(let Z=0;Z<O.length;Z++){if(null!=O[Z]&&O[Z]!==X.v){const te=O[Z];if((0,X.b)(te)||(0,X.c)(te))void 0===K[te]&&(N.push(te),K[te]=1);else{let k=!1;for(let L=0;L<T.length;L++)!0===(0,X.s)(T[L],te)&&(k=!0);!1===k&&(T.push(te),N.push(te))}}if(N.length>=U&&-1!==U)return N}return N}(U,N);case"avg":case"mean":return S((0,X.V)(U));case"min":return Math.min.apply(Math,(0,X.V)(U));case"sum":return function w(O){let U=0;for(let N=0;N<O.length;N++)U+=O[N];return U}((0,X.V)(U));case"max":return Math.max.apply(Math,(0,X.V)(U));case"stdev":case"stddev":return Math.sqrt(V((0,X.V)(U)));case"var":case"variance":return V((0,X.V)(U));case"count":return U.length}return 0}},24499:(Ie,pe,j)=>{j.d(pe,{Z:()=>x,r:()=>b});var X=j(6729),S=j(42275),V=j(26685),w=j(47562),D=j(2004),Y=j(21674),ee=j(72854),O=j(72642),U=j(37118),N=j(55214),K=j(85692),T=j(91179),Z=j(25919),te=j(5371),k=j(25748);function L(f){return f&&"esri.arcade.Feature"===f.arcadeDeclaredClass}function b(f,F){f.ringisclockwise=function(y,C){return F(y,C,(z,H,h)=>{(0,w.y)(h,1,1,y,C);let B=[],$=!1,G=!1;if(null===h[0])return!1;if((0,w.m)(h[0])){for(const re of h[0]){if(!(re instanceof O.Z))throw new Z.aV(y,Z.rH.InvalidParameter,C);B.push(re.hasZ?re.hasM?[re.x,re.y,re.z,re.m]:[re.x,re.y,re.z]:[re.x,re.y])}B.length>0&&($=h[0][0].hasZ,G=h[0][0].hasM)}else if(h[0]instanceof V.Z)B=h[0]._elements,B.length>0&&($=h[0]._hasZ,G=h[0]._hasM);else{if(!(0,w.x)(h[0]))throw new Z.aV(y,Z.rH.InvalidParameter,C);for(const re of h[0].toArray()){if(!(re instanceof O.Z))throw new Z.aV(y,Z.rH.InvalidParameter,C);B.push(re.hasZ?re.hasM?[re.x,re.y,re.z,re.m]:[re.x,re.y,re.z]:[re.x,re.y])}B.length>0&&($=h[0].get(0).hasZ,G=h[0].get(0).hasM)}return!(B.length<3)&&(0,k.bu)(B,G,$)})},f.polygon=function(y,C){return F(y,C,(z,H,h)=>{(0,w.y)(h,1,1,y,C);let B=null;if(h[0]instanceof X.Z){if(B=(0,w.q)(S.Z.parseGeometryFromDictionary(h[0]),y.spatialReference),!(B instanceof U.Z))throw new Z.aV(y,Z.rH.InvalidParameter,C)}else B=h[0]instanceof U.Z?(0,T.im)(h[0].toJSON()):(0,w.q)(new U.Z(JSON.parse(h[0])),y.spatialReference);if(null!==B&&!1===B.spatialReference.equals(y.spatialReference))throw new Z.aV(y,Z.rH.WrongSpatialReference,C);return(0,w.F)(B)})},f.polyline=function(y,C){return F(y,C,(z,H,h)=>{(0,w.y)(h,1,1,y,C);let B=null;if(h[0]instanceof X.Z){if(B=(0,w.q)(S.Z.parseGeometryFromDictionary(h[0]),y.spatialReference),!(B instanceof N.Z))throw new Z.aV(y,Z.rH.InvalidParameter,C)}else B=h[0]instanceof N.Z?(0,T.im)(h[0].toJSON()):(0,w.q)(new N.Z(JSON.parse(h[0])),y.spatialReference);if(null!==B&&!1===B.spatialReference.equals(y.spatialReference))throw new Z.aV(y,Z.rH.WrongSpatialReference,C);return(0,w.F)(B)})},f.point=function(y,C){return F(y,C,(z,H,h)=>{(0,w.y)(h,1,1,y,C);let B=null;if(h[0]instanceof X.Z){if(B=(0,w.q)(S.Z.parseGeometryFromDictionary(h[0]),y.spatialReference),!(B instanceof O.Z))throw new Z.aV(y,Z.rH.InvalidParameter,C)}else B=h[0]instanceof O.Z?(0,T.im)(h[0].toJSON()):(0,w.q)(new O.Z(JSON.parse(h[0])),y.spatialReference);if(null!==B&&!1===B.spatialReference.equals(y.spatialReference))throw new Z.aV(y,Z.rH.WrongSpatialReference,C);return(0,w.F)(B)})},f.multipoint=function(y,C){return F(y,C,(z,H,h)=>{(0,w.y)(h,1,1,y,C);let B=null;if(h[0]instanceof X.Z){if(B=(0,w.q)(S.Z.parseGeometryFromDictionary(h[0]),y.spatialReference),!(B instanceof ee.Z))throw new Z.aV(y,Z.rH.InvalidParameter,C)}else B=h[0]instanceof ee.Z?(0,T.im)(h[0].toJSON()):(0,w.q)(new ee.Z(JSON.parse(h[0])),y.spatialReference);if(null!==B&&!1===B.spatialReference.equals(y.spatialReference))throw new Z.aV(y,Z.rH.WrongSpatialReference,C);return(0,w.F)(B)})},f.extent=function(y,C){return F(y,C,(z,H,h)=>{h=(0,w.G)(h),(0,w.y)(h,1,1,y,C);let B=null;if(h[0]instanceof X.Z)B=(0,w.q)(S.Z.parseGeometryFromDictionary(h[0]),y.spatialReference);else if(h[0]instanceof O.Z){const $={xmin:h[0].x,ymin:h[0].y,xmax:h[0].x,ymax:h[0].y,spatialReference:h[0].spatialReference.toJSON()},G=h[0];G.hasZ?($.zmin=G.z,$.zmax=G.z):G.hasM&&($.mmin=G.m,$.mmax=G.m),B=(0,T.im)($)}else B=h[0]instanceof U.Z||h[0]instanceof N.Z||h[0]instanceof ee.Z?(0,T.im)(h[0].extent?.toJSON()):h[0]instanceof D.Z?(0,T.im)(h[0].toJSON()):(0,w.q)(new D.Z(JSON.parse(h[0])),y.spatialReference);if(null!==B&&!1===B.spatialReference.equals(y.spatialReference))throw new Z.aV(y,Z.rH.WrongSpatialReference,C);return(0,w.F)(B)})},f.geometry=function(y,C){return F(y,C,(z,H,h)=>{(0,w.y)(h,1,1,y,C);let B=null;if(null===h[0])return null;if(B=L(h[0])?(0,w.q)(h[0].geometry(),y.spatialReference):(0,w.q)(h[0]instanceof X.Z?S.Z.parseGeometryFromDictionary(h[0]):(0,T.im)(JSON.parse(h[0])),y.spatialReference),null!==B&&!1===B.spatialReference.equals(y.spatialReference))throw new Z.aV(y,Z.rH.WrongSpatialReference,C);return(0,w.F)(B)})},f.setgeometry=function(y,C){return F(y,C,(z,H,h)=>{if((0,w.y)(h,2,2,y,C),!L(h[0]))throw new Z.aV(y,Z.rH.InvalidParameter,C);if(!0===h[0].immutable)throw new Z.aV(y,Z.rH.Immutable,C);if(!(h[1]instanceof Y.Z||null===h[1]))throw new Z.aV(y,Z.rH.InvalidParameter,C);return h[0]._geometry=h[1],w.v})},f.feature=function(y,C){return F(y,C,(z,H,h)=>{if(0===h.length)throw new Z.aV(y,Z.rH.WrongNumberOfParameters,C);let B=null;if(1===h.length)if((0,w.c)(h[0]))B=S.Z.fromJson(JSON.parse(h[0]),y.timeReference);else if(L(h[0]))B=S.Z.createFromArcadeFeature(h[0]);else if(h[0]instanceof Y.Z)B=S.Z.createFromGraphicLikeObject(h[0],null,null,y.timeReference);else{if(!(h[0]instanceof X.Z))throw new Z.aV(y,Z.rH.InvalidParameter,C);{let $=h[0].hasField("geometry")?h[0].field("geometry"):null,G=h[0].hasField("attributes")?h[0].field("attributes"):null;null!==$&&$ instanceof X.Z&&($=S.Z.parseGeometryFromDictionary($)),null!==G&&(G=S.Z.parseAttributesFromDictionary(G)),B=S.Z.createFromGraphicLikeObject($,G,null,y.timeReference)}}else if(2===h.length){let $=null,G=null;if(null!==h[0])if(h[0]instanceof Y.Z)$=h[0];else{if(!($ instanceof X.Z))throw new Z.aV(y,Z.rH.InvalidParameter,C);$=S.Z.parseGeometryFromDictionary(h[0])}if(null!==h[1]){if(!(h[1]instanceof X.Z))throw new Z.aV(y,Z.rH.InvalidParameter,C);G=S.Z.parseAttributesFromDictionary(h[1])}B=S.Z.createFromGraphicLikeObject($,G,null,y.timeReference)}else{let $=null;const G={};if(null!==h[0])if(h[0]instanceof Y.Z)$=h[0];else{if(!($ instanceof X.Z))throw new Z.aV(y,Z.rH.InvalidParameter,C);$=S.Z.parseGeometryFromDictionary(h[0])}for(let re=1;re<h.length;re+=2){const oe=(0,w.j)(h[re]),ce=h[re+1];if(!(null==ce||(0,w.c)(ce)||isNaN(ce)||(0,w.k)(ce)||(0,w.b)(ce)||(0,w.a)(ce)))throw new Z.aV(y,Z.rH.InvalidParameter,C);if((0,w.i)(ce)||!1===(0,w.f)(ce))throw new Z.aV(y,Z.rH.InvalidParameter,C);G[oe]=ce===w.v?null:ce}B=S.Z.createFromGraphicLikeObject($,G,null,y.timeReference)}return B._geometry=(0,w.q)(B.geometry(),y.spatialReference),B.immutable=!1,B})},f.dictionary=function(y,C){return F(y,C,(z,H,h)=>{if(0===h.length){const G=new X.Z;return G.immutable=!1,G}if(1===h.length&&(0,w.c)(h[0]))try{const G=JSON.parse(h[0]),re=X.Z.convertObjectToArcadeDictionary(G,(0,w.C)(y),!1);return re.immutable=!1,re}catch{throw new Z.aV(y,Z.rH.InvalidParameter,C)}if(h.length%2!=0)throw new Z.aV(y,Z.rH.WrongNumberOfParameters,C);const B={};for(let G=0;G<h.length;G+=2){const re=(0,w.j)(h[G]),oe=h[G+1];if(!(null==oe||(0,w.c)(oe)||isNaN(oe)||(0,w.k)(oe)||(0,w.b)(oe)||(0,w.a)(oe)||(0,w.m)(oe)||(0,w.x)(oe)))throw new Z.aV(y,Z.rH.InvalidParameter,C);if((0,w.i)(oe))throw new Z.aV(y,Z.rH.InvalidParameter,C);B[re]=oe===w.v?null:oe}const $=new X.Z(B);return $.immutable=!1,$})},f.haskey=function(y,C){return F(y,C,(z,H,h)=>{(0,w.y)(h,2,2,y,C);const B=(0,w.j)(h[1]);if(L(h[0])||h[0]instanceof X.Z)return h[0].hasField(B);if(h[0]instanceof Y.Z){const $=x(h[0],B,null,null,2);return!$||"notfound"!==$.keystate}throw new Z.aV(y,Z.rH.InvalidParameter,C)})},f.hasvalue=function(y,C){return F(y,C,(z,H,h)=>{if((0,w.y)(h,2,2,y,C),null===h[0]||null===h[1])return!1;const B=(0,w.j)(h[1]);return(0,w.w)(h[0])||h[0]instanceof X.Z?!!h[0].hasField(B)&&null!==h[0].field(B):h[0]instanceof Y.Z&&null!==x(h[0],B,null,null,0)})},f.indexof=function(y,C){return F(y,C,(z,H,h)=>{(0,w.y)(h,2,2,y,C);const B=h[1];if((0,w.m)(h[0])){for(let $=0;$<h[0].length;$++)if((0,w.s)(B,h[0][$]))return $;return-1}if((0,w.x)(h[0])){const $=h[0].length();for(let G=0;G<$;G++)if((0,w.s)(B,h[0].get(G)))return G;return-1}throw new Z.aV(y,Z.rH.InvalidParameter,C)})},f.angle=function(y,C){return F(y,C,(z,H,h)=>{if(h=(0,w.G)(h),(0,w.y)(h,2,3,y,C),!(h[0]instanceof O.Z))throw new Z.aV(y,Z.rH.InvalidParameter,C);if(!(h[1]instanceof O.Z))throw new Z.aV(y,Z.rH.InvalidParameter,C);if(h.length>2&&!(h[2]instanceof O.Z))throw new Z.aV(y,Z.rH.InvalidParameter,C);return 2===h.length?(0,K.RI)(h[0],h[1]):(0,K.ws)(h[0],h[1],h[2])})},f.bearing=function(y,C){return F(y,C,(z,H,h)=>{if(h=(0,w.G)(h),(0,w.y)(h,2,3,y,C),!(h[0]instanceof O.Z))throw new Z.aV(y,Z.rH.InvalidParameter,C);if(!(h[1]instanceof O.Z))throw new Z.aV(y,Z.rH.InvalidParameter,C);if(h.length>2&&!(h[2]instanceof O.Z))throw new Z.aV(y,Z.rH.InvalidParameter,C);return 2===h.length?(0,K.B9)(h[0],h[1]):(0,K.Es)(h[0],h[1],h[2])})},f.isselfintersecting=function(y,C){return F(y,C,(z,H,h)=>{h=(0,w.G)(h),(0,w.y)(h,1,1,y,C);let B=h[0];if(B instanceof U.Z)return B.isSelfIntersecting;if(B instanceof N.Z)return B=B.paths,(0,K.nB)(B);if(B instanceof ee.Z){const $=B.points;for(let G=0;G<$.length;G++)for(let re=0;re<$.length;re++)if(re!==G){let oe=!0;for(let ce=0;ce<$[G].length;ce++)if($[G][ce]!==$[re][ce]){oe=!1;break}if(!0===oe)return!0}}return!(!(0,w.m)(B)&&!(0,w.x)(B))&&(B=(0,w.H)(B,y.spatialReference),null!==B&&(B=B.paths),(0,K.nB)(B))})}}let M=0;function x(f,F,y,C,z=1){let H;switch(F=F.toLowerCase()){case"hasz":{const h=f.hasZ;return void 0!==h&&h}case"hasm":{const h=f.hasM;return void 0!==h&&h}case"spatialreference":{let h=f.spatialReference._arcadeCacheId;if(void 0===h){let $=!0;Object.freeze&&Object.isFrozen(f.spatialReference)&&($=!1),$&&(M++,f.spatialReference._arcadeCacheId=M,h=M)}const B=new X.Z({wkt:f.spatialReference.wkt,wkid:f.spatialReference.wkid});return void 0!==h&&(B._arcadeCacheId="SPREF"+h.toString()),B}}switch(f.type){case"extent":switch(F){case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":case"mmin":case"mmax":{const h=f[F];return void 0!==h?h:null}case"type":return"Extent"}break;case"polygon":switch(F){case"rings":return H=f.cache._arcadeCacheId,void 0===H&&(M++,H=M,f.cache._arcadeCacheId=H),new te.Z(f.rings,f.spatialReference,!0===f.hasZ,!0===f.hasM,H);case"type":return"Polygon"}break;case"point":switch(F){case"x":case"y":case"z":case"m":return void 0!==f[F]?f[F]:null;case"type":return"Point"}break;case"polyline":switch(F){case"paths":return H=f.cache._arcadeCacheId,void 0===H&&(M++,H=M,f.cache._arcadeCacheId=H),new te.Z(f.paths,f.spatialReference,!0===f.hasZ,!0===f.hasM,H);case"type":return"Polyline"}break;case"multipoint":switch(F){case"points":return H=f.cache._arcadeCacheId,void 0===H&&(M++,H=M,f.cache._arcadeCacheId=H),new V.Z(f.points,f.spatialReference,!0===f.hasZ,!0===f.hasM,H,1);case"type":return"Multipoint"}}if(1===z)throw new Z.aV(y,Z.rH.InvalidIdentifier,C);return 2===z?{keystate:"notfound"}:null}},63461:(Ie,pe,j)=>{j.r(pe),j.d(pe,{registerFunctions:()=>M,setGeometryEngine:()=>L});var X=j(24263),S=j(27187),V=j(47562),w=j(85692),D=j(2004),Y=j(21674),ee=j(72854),O=j(72642),U=j(37118),N=j(55214),K=j(91179),T=j(25919),Z=j(16730);let te=null;function k(x){return 0===X.i8.indexOf("4.")?U.Z.fromExtent(x):new U.Z({spatialReference:x.spatialReference,rings:[[[x.xmin,x.ymin],[x.xmin,x.ymax],[x.xmax,x.ymax],[x.xmax,x.ymin],[x.xmin,x.ymin]]]})}function L(x){te=x}function b(x,f){if("polygon"!==x.type&&"polyline"!==x.type&&"extent"!==x.type)return 0;let F=1;(x.spatialReference.vcsWkid||x.spatialReference.latestVcsWkid)&&(F=(0,w._R)(x.spatialReference)/(0,Z.c9)(x.spatialReference));let y=0;if("polyline"===x.type)for(const z of x.paths)for(let H=1;H<z.length;H++)y+=(0,w.AW)(z[H],z[H-1],F);else if("polygon"===x.type)for(const z of x.rings){for(let H=1;H<z.length;H++)y+=(0,w.AW)(z[H],z[H-1],F);(z[0][0]!==z[z.length-1][0]||z[0][1]!==z[z.length-1][1]||void 0!==z[0][2]&&z[0][2]!==z[z.length-1][2])&&(y+=(0,w.AW)(z[0],z[z.length-1],F))}else"extent"===x.type&&(y+=2*(0,w.AW)([x.xmin,x.ymin,0],[x.xmax,x.ymin,0],F),y+=2*(0,w.AW)([x.xmin,x.ymin,0],[x.xmin,x.ymax,0],F),y*=2,y+=4*Math.abs((0,V.A)(x.zmax,0)*F-(0,V.A)(x.zmin,0)*F));const C=new N.Z({hasZ:!1,hasM:!1,spatialReference:x.spatialReference,paths:[[0,0],[0,y]]});return te.planarLength(C,f)}function M(x,f){function F(y,C,z){if((0,V.y)(z,2,2,y,C),!(z[0]instanceof Y.Z&&z[1]instanceof Y.Z||z[0]instanceof Y.Z&&null===z[1]||z[1]instanceof Y.Z&&null===z[0]||null===z[0]&&null===z[1]))throw new T.aV(y,T.rH.InvalidParameter,C)}x.disjoint=function(y,C){return f(y,C,(z,H,h)=>(h=(0,V.G)(h),F(y,C,h),null===h[0]||null===h[1]||te.disjoint(h[0],h[1])))},x.intersects=function(y,C){return f(y,C,(z,H,h)=>(h=(0,V.G)(h),F(y,C,h),null!==h[0]&&null!==h[1]&&te.intersects(h[0],h[1])))},x.touches=function(y,C){return f(y,C,(z,H,h)=>(h=(0,V.G)(h),F(y,C,h),null!==h[0]&&null!==h[1]&&te.touches(h[0],h[1])))},x.crosses=function(y,C){return f(y,C,(z,H,h)=>(h=(0,V.G)(h),F(y,C,h),null!==h[0]&&null!==h[1]&&te.crosses(h[0],h[1])))},x.within=function(y,C){return f(y,C,(z,H,h)=>(h=(0,V.G)(h),F(y,C,h),null!==h[0]&&null!==h[1]&&te.within(h[0],h[1])))},x.contains=function(y,C){return f(y,C,(z,H,h)=>(h=(0,V.G)(h),F(y,C,h),null!==h[0]&&null!==h[1]&&te.contains(h[0],h[1])))},x.overlaps=function(y,C){return f(y,C,(z,H,h)=>(h=(0,V.G)(h),F(y,C,h),null!==h[0]&&null!==h[1]&&te.overlaps(h[0],h[1])))},x.equals=function(y,C){return f(y,C,(z,H,h)=>((0,V.y)(h,2,2,y,C),h[0]===h[1]||(h[0]instanceof Y.Z&&h[1]instanceof Y.Z?te.equals(h[0],h[1]):!(!(0,V.k)(h[0])||!(0,V.k)(h[1]))&&h[0].equals(h[1]))))},x.relate=function(y,C){return f(y,C,(z,H,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,3,3,y,C),h[0]instanceof Y.Z&&h[1]instanceof Y.Z)return te.relate(h[0],h[1],(0,V.j)(h[2]));if(h[0]instanceof Y.Z&&null===h[1]||h[1]instanceof Y.Z&&null===h[0]||null===h[0]&&null===h[1])return!1;throw new T.aV(y,T.rH.InvalidParameter,C)})},x.intersection=function(y,C){return f(y,C,(z,H,h)=>(h=(0,V.G)(h),F(y,C,h),null===h[0]||null===h[1]?null:te.intersect(h[0],h[1])))},x.union=function(y,C){return f(y,C,(z,H,h)=>{const B=[];if(0===(h=(0,V.G)(h)).length)throw new T.aV(y,T.rH.WrongNumberOfParameters,C);if(1===h.length)if((0,V.m)(h[0])){const $=(0,V.G)(h[0]);for(let G=0;G<$.length;G++)if(null!==$[G]){if(!($[G]instanceof Y.Z))throw new T.aV(y,T.rH.InvalidParameter,C);B.push($[G])}}else{if(!(0,V.x)(h[0])){if(h[0]instanceof Y.Z)return(0,V.q)((0,S.r1)(h[0]),y.spatialReference);if(null===h[0])return null;throw new T.aV(y,T.rH.InvalidParameter,C)}{const $=(0,V.G)(h[0].toArray());for(let G=0;G<$.length;G++)if(null!==$[G]){if(!($[G]instanceof Y.Z))throw new T.aV(y,T.rH.InvalidParameter,C);B.push($[G])}}}else for(let $=0;$<h.length;$++)if(null!==h[$]){if(!(h[$]instanceof Y.Z))throw new T.aV(y,T.rH.InvalidParameter,C);B.push(h[$])}return 0===B.length?null:te.union(B)})},x.difference=function(y,C){return f(y,C,(z,H,h)=>(h=(0,V.G)(h),F(y,C,h),null!==h[0]&&null===h[1]?(0,S.r1)(h[0]):null===h[0]?null:te.difference(h[0],h[1])))},x.symmetricdifference=function(y,C){return f(y,C,(z,H,h)=>(h=(0,V.G)(h),F(y,C,h),null===h[0]&&null===h[1]?null:null===h[0]?(0,S.r1)(h[1]):null===h[1]?(0,S.r1)(h[0]):te.symmetricDifference(h[0],h[1])))},x.clip=function(y,C){return f(y,C,(z,H,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,2,2,y,C),!(h[1]instanceof D.Z)&&null!==h[1])throw new T.aV(y,T.rH.InvalidParameter,C);if(null===h[0])return null;if(!(h[0]instanceof Y.Z))throw new T.aV(y,T.rH.InvalidParameter,C);return null===h[1]?null:te.clip(h[0],h[1])})},x.cut=function(y,C){return f(y,C,(z,H,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,2,2,y,C),!(h[1]instanceof N.Z)&&null!==h[1])throw new T.aV(y,T.rH.InvalidParameter,C);if(null===h[0])return[];if(!(h[0]instanceof Y.Z))throw new T.aV(y,T.rH.InvalidParameter,C);return null===h[1]?[(0,S.r1)(h[0])]:te.cut(h[0],h[1])})},x.area=function(y,C){return f(y,C,(z,H,h)=>{if((0,V.y)(h,1,2,y,C),null===(h=(0,V.G)(h))[0])return 0;if((0,V.m)(h[0])||(0,V.x)(h[0])){const B=(0,V.J)(h[0],y.spatialReference);return null===B?0:te.planarArea(B,(0,S.EI)((0,V.A)(h[1],-1)))}if(!(h[0]instanceof Y.Z))throw new T.aV(y,T.rH.InvalidParameter,C);return te.planarArea(h[0],(0,S.EI)((0,V.A)(h[1],-1)))})},x.areageodetic=function(y,C){return f(y,C,(z,H,h)=>{if((0,V.y)(h,1,2,y,C),null===(h=(0,V.G)(h))[0])return 0;if((0,V.m)(h[0])||(0,V.x)(h[0])){const B=(0,V.J)(h[0],y.spatialReference);return null===B?0:te.geodesicArea(B,(0,S.EI)((0,V.A)(h[1],-1)))}if(!(h[0]instanceof Y.Z))throw new T.aV(y,T.rH.InvalidParameter,C);return te.geodesicArea(h[0],(0,S.EI)((0,V.A)(h[1],-1)))})},x.length=function(y,C){return f(y,C,(z,H,h)=>{if((0,V.y)(h,1,2,y,C),null===(h=(0,V.G)(h))[0])return 0;if((0,V.m)(h[0])||(0,V.x)(h[0])){const B=(0,V.H)(h[0],y.spatialReference);return null===B?0:te.planarLength(B,(0,S.Lz)((0,V.A)(h[1],-1)))}if(!(h[0]instanceof Y.Z))throw new T.aV(y,T.rH.InvalidParameter,C);return te.planarLength(h[0],(0,S.Lz)((0,V.A)(h[1],-1)))})},x.length3d=function(y,C){return f(y,C,(z,H,h)=>{if((0,V.y)(h,1,2,y,C),null===(h=(0,V.G)(h))[0])return 0;if((0,V.m)(h[0])||(0,V.x)(h[0])){const B=(0,V.H)(h[0],y.spatialReference);return null===B?0:!0===B.hasZ?b(B,(0,S.Lz)((0,V.A)(h[1],-1))):te.planarLength(B,(0,S.Lz)((0,V.A)(h[1],-1)))}if(!(h[0]instanceof Y.Z))throw new T.aV(y,T.rH.InvalidParameter,C);return!0===h[0].hasZ?b(h[0],(0,S.Lz)((0,V.A)(h[1],-1))):te.planarLength(h[0],(0,S.Lz)((0,V.A)(h[1],-1)))})},x.lengthgeodetic=function(y,C){return f(y,C,(z,H,h)=>{if((0,V.y)(h,1,2,y,C),null===(h=(0,V.G)(h))[0])return 0;if((0,V.m)(h[0])||(0,V.x)(h[0])){const B=(0,V.H)(h[0],y.spatialReference);return null===B?0:te.geodesicLength(B,(0,S.Lz)((0,V.A)(h[1],-1)))}if(!(h[0]instanceof Y.Z))throw new T.aV(y,T.rH.InvalidParameter,C);return te.geodesicLength(h[0],(0,S.Lz)((0,V.A)(h[1],-1)))})},x.distance=function(y,C){return f(y,C,(z,H,h)=>{h=(0,V.G)(h),(0,V.y)(h,2,3,y,C);let B=h[0];((0,V.m)(h[0])||(0,V.x)(h[0]))&&(B=(0,V.K)(h[0],y.spatialReference));let $=h[1];if(((0,V.m)(h[1])||(0,V.x)(h[1]))&&($=(0,V.K)(h[1],y.spatialReference)),!(B instanceof Y.Z))throw new T.aV(y,T.rH.InvalidParameter,C);if(!($ instanceof Y.Z))throw new T.aV(y,T.rH.InvalidParameter,C);return te.distance(B,$,(0,S.Lz)((0,V.A)(h[2],-1)))})},x.distancegeodetic=function(y,C){return f(y,C,(z,H,h)=>{h=(0,V.G)(h),(0,V.y)(h,2,3,y,C);const B=h[0],$=h[1];if(!(B instanceof O.Z))throw new T.aV(y,T.rH.InvalidParameter,C);if(!($ instanceof O.Z))throw new T.aV(y,T.rH.InvalidParameter,C);const G=new N.Z({paths:[],spatialReference:B.spatialReference});return G.addPath([B,$]),te.geodesicLength(G,(0,S.Lz)((0,V.A)(h[2],-1)))})},x.densify=function(y,C){return f(y,C,(z,H,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,2,3,y,C),null===h[0])return null;if(!(h[0]instanceof Y.Z))throw new T.aV(y,T.rH.InvalidParameter,C);const B=(0,V.g)(h[1]);if(isNaN(B))throw new T.aV(y,T.rH.InvalidParameter,C);if(B<=0)throw new T.aV(y,T.rH.InvalidParameter,C);return h[0]instanceof U.Z||h[0]instanceof N.Z?te.densify(h[0],B,(0,S.Lz)((0,V.A)(h[2],-1))):h[0]instanceof D.Z?te.densify(k(h[0]),B,(0,S.Lz)((0,V.A)(h[2],-1))):h[0]})},x.densifygeodetic=function(y,C){return f(y,C,(z,H,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,2,3,y,C),null===h[0])return null;if(!(h[0]instanceof Y.Z))throw new T.aV(y,T.rH.InvalidParameter,C);const B=(0,V.g)(h[1]);if(isNaN(B))throw new T.aV(y,T.rH.InvalidParameter,C);if(B<=0)throw new T.aV(y,T.rH.InvalidParameter,C);return h[0]instanceof U.Z||h[0]instanceof N.Z?te.geodesicDensify(h[0],B,(0,S.Lz)((0,V.A)(h[2],-1))):h[0]instanceof D.Z?te.geodesicDensify(k(h[0]),B,(0,S.Lz)((0,V.A)(h[2],-1))):h[0]})},x.generalize=function(y,C){return f(y,C,(z,H,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,2,4,y,C),null===h[0])return null;if(!(h[0]instanceof Y.Z))throw new T.aV(y,T.rH.InvalidParameter,C);const B=(0,V.g)(h[1]);if(isNaN(B))throw new T.aV(y,T.rH.InvalidParameter,C);return te.generalize(h[0],B,(0,V.h)((0,V.A)(h[2],!0)),(0,S.Lz)((0,V.A)(h[3],-1)))})},x.buffer=function(y,C){return f(y,C,(z,H,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,2,3,y,C),null===h[0])return null;if(!(h[0]instanceof Y.Z))throw new T.aV(y,T.rH.InvalidParameter,C);const B=(0,V.g)(h[1]);if(isNaN(B))throw new T.aV(y,T.rH.InvalidParameter,C);return 0===B?(0,S.r1)(h[0]):te.buffer(h[0],B,(0,S.Lz)((0,V.A)(h[2],-1)))})},x.buffergeodetic=function(y,C){return f(y,C,(z,H,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,2,3,y,C),null===h[0])return null;if(!(h[0]instanceof Y.Z))throw new T.aV(y,T.rH.InvalidParameter,C);const B=(0,V.g)(h[1]);if(isNaN(B))throw new T.aV(y,T.rH.InvalidParameter,C);return 0===B?(0,S.r1)(h[0]):te.geodesicBuffer(h[0],B,(0,S.Lz)((0,V.A)(h[2],-1)))})},x.offset=function(y,C){return f(y,C,(z,H,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,2,6,y,C),null===h[0])return null;if(!(h[0]instanceof U.Z||h[0]instanceof N.Z))throw new T.aV(y,T.rH.InvalidParameter,C);const B=(0,V.g)(h[1]);if(isNaN(B))throw new T.aV(y,T.rH.InvalidParameter,C);const $=(0,V.g)((0,V.A)(h[4],10));if(isNaN($))throw new T.aV(y,T.rH.InvalidParameter,C);const G=(0,V.g)((0,V.A)(h[5],0));if(isNaN(G))throw new T.aV(y,T.rH.InvalidParameter,C);return te.offset(h[0],B,(0,S.Lz)((0,V.A)(h[2],-1)),(0,V.j)((0,V.A)(h[3],"round")).toLowerCase(),$,G)})},x.rotate=function(y,C){return f(y,C,(z,H,h)=>{h=(0,V.G)(h),(0,V.y)(h,2,3,y,C);let B=h[0];if(null===B)return null;if(!(B instanceof Y.Z))throw new T.aV(y,T.rH.InvalidParameter,C);B instanceof D.Z&&(B=U.Z.fromExtent(B));const $=(0,V.g)(h[1]);if(isNaN($))throw new T.aV(y,T.rH.InvalidParameter,C);const G=(0,V.A)(h[2],null);if(null===G)return te.rotate(B,$);if(G instanceof O.Z)return te.rotate(B,$,G);throw new T.aV(y,T.rH.InvalidParameter,C)})},x.centroid=function(y,C){return f(y,C,(z,H,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,1,1,y,C),null===h[0])return null;let B=h[0];if(((0,V.m)(h[0])||(0,V.x)(h[0]))&&(B=(0,V.K)(h[0],y.spatialReference)),null===B)return null;if(!(B instanceof Y.Z))throw new T.aV(y,T.rH.InvalidParameter,C);return B instanceof O.Z?(0,V.q)((0,S.r1)(h[0]),y.spatialReference):B instanceof U.Z?B.centroid:B instanceof N.Z?(0,w.s9)(B):B instanceof ee.Z?(0,w.Ay)(B):B instanceof D.Z?B.center:null})},x.multiparttosinglepart=function(y,C){return f(y,C,(z,H,h)=>{h=(0,V.G)(h),(0,V.y)(h,1,1,y,C);const B=[];if(null===h[0])return null;if(!(h[0]instanceof Y.Z))throw new T.aV(y,T.rH.InvalidParameter,C);if(h[0]instanceof O.Z)return[(0,V.q)((0,S.r1)(h[0]),y.spatialReference)];if(h[0]instanceof D.Z)return[(0,V.q)((0,S.r1)(h[0]),y.spatialReference)];const $=te.simplify(h[0]);if($ instanceof U.Z){const G=[],re=[];for(let oe=0;oe<$.rings.length;oe++)if($.isClockwise($.rings[oe])){const ce=(0,K.im)({rings:[$.rings[oe]],hasZ:!0===$.hasZ,hasM:!0===$.hasM,spatialReference:$.spatialReference.toJSON()});G.push(ce)}else re.push({ring:$.rings[oe],pt:$.getPoint(oe,0)});for(let oe=0;oe<re.length;oe++)for(let ce=0;ce<G.length;ce++)if(G[ce].contains(re[oe].pt)){G[ce].addRing(re[oe].ring);break}return G}if($ instanceof N.Z){const G=[];for(let re=0;re<$.paths.length;re++){const oe=(0,K.im)({paths:[$.paths[re]],hasZ:!0===$.hasZ,hasM:!0===$.hasM,spatialReference:$.spatialReference.toJSON()});G.push(oe)}return G}if(h[0]instanceof ee.Z){const G=(0,V.q)((0,S.r1)(h[0]),y.spatialReference);for(let re=0;re<G.points.length;re++)B.push(G.getPoint(re));return B}return null})},x.issimple=function(y,C){return f(y,C,(z,H,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,1,1,y,C),null===h[0])return!0;if(!(h[0]instanceof Y.Z))throw new T.aV(y,T.rH.InvalidParameter,C);return te.isSimple(h[0])})},x.simplify=function(y,C){return f(y,C,(z,H,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,1,1,y,C),null===h[0])return null;if(!(h[0]instanceof Y.Z))throw new T.aV(y,T.rH.InvalidParameter,C);return te.simplify(h[0])})},x.convexhull=function(y,C){return f(y,C,(z,H,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,1,1,y,C),null===h[0])return null;if(!(h[0]instanceof Y.Z))throw new T.aV(y,T.rH.InvalidParameter,C);return te.convexHull(h[0])})}}},53840:(Ie,pe,j)=>{j.d(pe,{r:()=>w});var X=j(47562),S=j(75327);function V(D,Y,ee){return void 0===ee||0==+ee?Math[D](Y):(Y=+Y,ee=+ee,isNaN(Y)||"number"!=typeof ee||ee%1!=0?NaN:(Y=Y.toString().split("e"),+((Y=(Y=Math[D](+(Y[0]+"e"+(Y[1]?+Y[1]-ee:-ee)))).toString().split("e"))[0]+"e"+(Y[1]?+Y[1]+ee:ee))))}function w(D,Y){function ee(O,U,N){const K=(0,X.g)(O);return isNaN(K)?K:isNaN(U)||isNaN(N)||U>N?NaN:K<U?U:K>N?N:K}D.number=function(O,U){return Y(O,U,(N,K,T)=>{(0,X.y)(T,1,2,O,U);const Z=T[0];if((0,X.b)(Z))return Z;if(null===Z)return 0;if((0,X.k)(Z))return Z.toNumber();if((0,X.a)(Z))return Number(Z);if((0,X.m)(Z))return NaN;if(""===Z||void 0===Z)return Number(Z);if((0,X.c)(Z)){if(void 0!==T[1]){let te=(0,X.L)(T[1],"\u2030","");return te=(0,X.L)(te,"\xa4",""),(0,S.Qc)(Z,{pattern:te})}return Number(Z.trim())}return Number(Z)})},D.abs=function(O,U){return Y(O,U,(N,K,T)=>((0,X.y)(T,1,1,O,U),Math.abs((0,X.g)(T[0]))))},D.acos=function(O,U){return Y(O,U,(N,K,T)=>((0,X.y)(T,1,1,O,U),Math.acos((0,X.g)(T[0]))))},D.asin=function(O,U){return Y(O,U,(N,K,T)=>((0,X.y)(T,1,1,O,U),Math.asin((0,X.g)(T[0]))))},D.atan=function(O,U){return Y(O,U,(N,K,T)=>((0,X.y)(T,1,1,O,U),Math.atan((0,X.g)(T[0]))))},D.atan2=function(O,U){return Y(O,U,(N,K,T)=>((0,X.y)(T,2,2,O,U),Math.atan2((0,X.g)(T[0]),(0,X.g)(T[1]))))},D.ceil=function(O,U){return Y(O,U,(N,K,T)=>{if((0,X.y)(T,1,2,O,U),2===T.length){let Z=(0,X.g)(T[1]);return isNaN(Z)&&(Z=0),V("ceil",(0,X.g)(T[0]),-1*Z)}return Math.ceil((0,X.g)(T[0]))})},D.round=function(O,U){return Y(O,U,(N,K,T)=>{if((0,X.y)(T,1,2,O,U),2===T.length){let Z=(0,X.g)(T[1]);return isNaN(Z)&&(Z=0),V("round",(0,X.g)(T[0]),-1*Z)}return Math.round((0,X.g)(T[0]))})},D.floor=function(O,U){return Y(O,U,(N,K,T)=>{if((0,X.y)(T,1,2,O,U),2===T.length){let Z=(0,X.g)(T[1]);return isNaN(Z)&&(Z=0),V("floor",(0,X.g)(T[0]),-1*Z)}return Math.floor((0,X.g)(T[0]))})},D.cos=function(O,U){return Y(O,U,(N,K,T)=>((0,X.y)(T,1,1,O,U),Math.cos((0,X.g)(T[0]))))},D.isnan=function(O,U){return Y(O,U,(N,K,T)=>((0,X.y)(T,1,1,O,U),"number"==typeof T[0]&&isNaN(T[0])))},D.exp=function(O,U){return Y(O,U,(N,K,T)=>((0,X.y)(T,1,1,O,U),Math.exp((0,X.g)(T[0]))))},D.log=function(O,U){return Y(O,U,(N,K,T)=>((0,X.y)(T,1,1,O,U),Math.log((0,X.g)(T[0]))))},D.pow=function(O,U){return Y(O,U,(N,K,T)=>((0,X.y)(T,2,2,O,U),(0,X.g)(T[0])**(0,X.g)(T[1])))},D.random=function(O,U){return Y(O,U,(N,K,T)=>((0,X.y)(T,0,0,O,U),Math.random()))},D.sin=function(O,U){return Y(O,U,(N,K,T)=>((0,X.y)(T,1,1,O,U),Math.sin((0,X.g)(T[0]))))},D.sqrt=function(O,U){return Y(O,U,(N,K,T)=>((0,X.y)(T,1,1,O,U),Math.sqrt((0,X.g)(T[0]))))},D.tan=function(O,U){return Y(O,U,(N,K,T)=>((0,X.y)(T,1,1,O,U),Math.tan((0,X.g)(T[0]))))},D.defaultvalue=function(O,U){return Y(O,U,(N,K,T)=>((0,X.y)(T,2,2,O,U),null===T[0]||""===T[0]||void 0===T[0]?T[1]:T[0]))},D.isempty=function(O,U){return Y(O,U,(N,K,T)=>((0,X.y)(T,1,1,O,U),null===T[0]||""===T[0]||void 0===T[0]))},D.boolean=function(O,U){return Y(O,U,(N,K,T)=>((0,X.y)(T,1,1,O,U),(0,X.h)(T[0])))},D.constrain=function(O,U){return Y(O,U,(N,K,T)=>{(0,X.y)(T,3,3,O,U);const Z=(0,X.g)(T[1]),te=(0,X.g)(T[2]);if((0,X.m)(T[0])){const k=[];for(const L of T[0])k.push(ee(L,Z,te));return k}if((0,X.x)(T[0])){const k=[];for(let L=0;L<T[0].length();L++)k.push(ee(T[0].get(L),Z,te));return k}return ee(T[0],Z,te)})}}},97536:(Ie,pe,j)=>{j.d(pe,{r:()=>D});var X=j(25919),S=j(47562),V=j(50818);function w(Y,ee,O,U){if(1===U.length){if((0,S.m)(U[0]))return(0,V.t)(Y,U[0],-1);if((0,S.x)(U[0]))return(0,V.t)(Y,U[0].toArray(),-1)}return(0,V.t)(Y,U,-1)}function D(Y,ee){Y.stdev=function(O,U){return ee(O,U,(N,K,T)=>w("stdev",0,0,T))},Y.variance=function(O,U){return ee(O,U,(N,K,T)=>w("variance",0,0,T))},Y.average=function(O,U){return ee(O,U,(N,K,T)=>w("mean",0,0,T))},Y.mean=function(O,U){return ee(O,U,(N,K,T)=>w("mean",0,0,T))},Y.sum=function(O,U){return ee(O,U,(N,K,T)=>w("sum",0,0,T))},Y.min=function(O,U){return ee(O,U,(N,K,T)=>w("min",0,0,T))},Y.max=function(O,U){return ee(O,U,(N,K,T)=>w("max",0,0,T))},Y.distinct=function(O,U){return ee(O,U,(N,K,T)=>w("distinct",0,0,T))},Y.count=function(O,U){return ee(O,U,(N,K,T)=>{if((0,S.y)(T,1,1,O,U),(0,S.m)(T[0])||(0,S.c)(T[0]))return T[0].length;if((0,S.x)(T[0]))return T[0].length();throw new X.aV(O,X.rH.InvalidParameter,U)})}}},31975:(Ie,pe,j)=>{j.d(pe,{r:()=>_t});var X=j(37780),S=j(22386),V=j(6729),w=j(25919),D=j(47562),Y=j(77132),ee=j(62208);const O=E=>(_,v,R)=>(R=R||14,+E(_,v).toFixed(R)),U=(E,_)=>E+_,K=(E,_)=>E*_,T=(E,_)=>E/_,Z=(E,_,v)=>O(U)(E,_,v),k=(E,_,v)=>O(K)(E,_,v),L=(E,_,v)=>O(T)(E,_,v),b=360,x=2*Math.PI,f=3600,C=60,z=180*f/Math.PI,H=60*b*C,h=90*f,B=180*f,G=String.fromCharCode(7501);function oe(E){if(!1===(0,D.c)(E))throw new w.aV(null,w.rH.InvalidParameter,null);return E}function ce(E,_){const v=10**_;return Math.round(E*v)/v}function ge(E){const _=parseFloat(E.toString().replace(Math.trunc(E).toString(),"0"))*Math.sign(E);return E<0?{fraction:_,integer:Math.ceil(E)}:{fraction:_,integer:Math.floor(E)}}var de,ne,me,we,E;function _e(E,_){switch(E){case de.north:return"SHORT"===_?"N":"North";case de.east:return"SHORT"===_?"E":"East";case de.south:return"SHORT"===_?"S":"South";case de.west:return"SHORT"===_?"W":"West"}}function $e(E,_,v){for(;E.length<v;)E=_+E;return E}function Ye(E,_){return E-Math.floor(E/_)*_}function Le(E){switch(E){case ne.truncated_degrees:case ne.decimal_degrees:return b;case ne.radians:return x;case ne.gradians:return 400;case ne.seconds:return H;case ne.fractional_degree_minutes:return 60;case ne.fractional_minute_seconds:return C;default:throw new w.aV(null,w.rH.LogicError,null,{reason:"unsupported evaluations"})}}function be(E){switch(E.toUpperCase().trim()){case"NORTH":case"NORTHAZIMUTH":case"NORTH AZIMUTH":return me.north_azimuth;case"POLAR":return me.polar;case"QUADRANT":return me.quadrant;case"SOUTH":case"SOUTHAZIMUTH":case"SOUTH AZIMUTH":return me.south_azimuth}throw new w.aV(null,w.rH.LogicError,null,{reason:"unsupported directionType"})}function lt(E){switch(E.toUpperCase().trim()){case"D":case"DD":case"DECIMALDEGREE":case"DECIMAL DEGREE":case"DEGREE":case"DECIMALDEGREES":case"DECIMAL DEGREES":case"DEGREES":return ne.decimal_degrees;case"DMS":case"DEGREESMINUTESSECONDS":case"DEGREES MINUTES SECONDS":return ne.degrees_minutes_seconds;case"R":case"RAD":case"RADS":case"RADIAN":case"RADIANS":return ne.radians;case"G":case"GON":case"GONS":case"GRAD":case"GRADS":case"GRADIAN":case"GRADIANS":return ne.gradians}throw new w.aV(null,w.rH.LogicError,null,{reason:"unsupported units"})}(E=de||(de={}))[E.north=0]="north",E[E.east=1]="east",E[E.south=2]="south",E[E.west=3]="west",function(E){E[E.decimal_degrees=1]="decimal_degrees",E[E.seconds=2]="seconds",E[E.degrees_minutes_seconds=3]="degrees_minutes_seconds",E[E.radians=4]="radians",E[E.gradians=5]="gradians",E[E.truncated_degrees=6]="truncated_degrees",E[E.fractional_degree_minutes=7]="fractional_degree_minutes",E[E.fractional_minute_seconds=8]="fractional_minute_seconds"}(ne||(ne={})),function(E){E[E.north_azimuth=1]="north_azimuth",E[E.polar=2]="polar",E[E.quadrant=3]="quadrant",E[E.south_azimuth=4]="south_azimuth"}(me||(me={})),function(E){E[E.meridian=0]="meridian",E[E.direction=1]="direction"}(we||(we={}));class Ne{constructor(_,v,R){this.m_degrees=_,this.m_minutes=v,this.m_seconds=R}getField(_){switch(_){case ne.decimal_degrees:case ne.truncated_degrees:return this.m_degrees;case ne.fractional_degree_minutes:return this.m_minutes;case ne.seconds:case ne.fractional_minute_seconds:return this.m_seconds;default:throw new w.aV(null,w.rH.LogicError,null,{reason:"unexpected evaluation"})}}static secondsToDMS(_){const v=ge(_).fraction;let R=ge(_).integer;const Q=Math.floor(R/f);R-=Q*f;const p=Math.floor(R/C);return R-=p*C,new Ne(Q,p,R+v)}static numberToDms(_){const v=ge(_).fraction,R=ge(_).integer,Q=k(ge(100*v).fraction,100),p=ge(100*v).integer;return new Ne(R,p,Q)}format(_,v){let R=ce(this.m_seconds,v),Q=this.m_minutes,p=this.m_degrees;if(_===ne.seconds||_===ne.fractional_minute_seconds)C<=R&&(R-=C,++Q),60<=Q&&(Q=0,++p),b<=p&&(p=0);else if(_===ne.fractional_degree_minutes)R=0,Q=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,p=this.m_degrees,60<=Q&&(Q=0,++p),b<=p&&(p=0);else if(_===ne.decimal_degrees||_===ne.truncated_degrees){const g=L(this.m_seconds,f),I=L(this.m_minutes,60);p=Math.round(this.m_degrees+I+g),Q=0,R=0}return new Ne(p,Q,R)}static dmsToSeconds(_,v,R){return _*f+v*C+R}}class At{constructor(_,v,R){this.meridian=_,this.angle=v,this.direction=R}fetchAzimuth(_){return _===we.meridian?this.meridian:this.direction}}class Pe{constructor(_){this._angle=_}static createFromAngleAndDirection(_,v){return new Pe(new Re(Pe._convertDirectionFormat(_.extractAngularUnits(ne.seconds),v,me.north_azimuth)))}getAngle(_){const v=this._angle.extractAngularUnits(ne.seconds);switch(_){case me.north_azimuth:case me.south_azimuth:case me.polar:return new Re(Pe._convertDirectionFormat(v,me.north_azimuth,_));case me.quadrant:{const R=Pe.secondsNorthAzimuthToQuadrant(v);return new Re(R.angle)}}}getMeridian(_){const v=this._angle.extractAngularUnits(ne.seconds);switch(_){case me.north_azimuth:return de.north;case me.south_azimuth:return de.south;case me.polar:return de.east;case me.quadrant:return Pe.secondsNorthAzimuthToQuadrant(v).meridian}}getDirection(_){const v=this._angle.extractAngularUnits(ne.seconds);switch(_){case me.north_azimuth:return de.east;case me.south_azimuth:return de.west;case me.polar:return de.north;case me.quadrant:return Pe.secondsNorthAzimuthToQuadrant(v).direction}}static secondsNorthAzimuthToQuadrant(_){const v=_<=h||_>=972e3?de.north:de.south,R=v===de.north?Math.min(H-_,_):Math.abs(_-B);return new At(v,R,_>B?de.west:de.east)}static createFromAngleMeridianAndDirection(_,v,R){return new Pe(new Re(Pe.secondsQuadrantToNorthAzimuth(_.extractAngularUnits(ne.seconds),v,R)))}static secondsQuadrantToNorthAzimuth(_,v,R){return v===de.north?R===de.east?_:H-_:R===de.east?B-_:B+_}static _convertDirectionFormat(_,v,R){let Q=0;switch(v){case me.north_azimuth:Q=_;break;case me.polar:Q=h-_;break;case me.quadrant:throw new w.aV(null,w.rH.LogicError,null,{reason:"unexpected evaluation"});case me.south_azimuth:Q=_+B}let p=0;switch(R){case me.north_azimuth:p=Q;break;case me.polar:p=h-Q;break;case me.quadrant:throw new w.aV(null,w.rH.LogicError,null,{reason:"unexpected evaluation"});case me.south_azimuth:p=Q-B}return p=function Te(E,_){return E%_}(p,H),p<0?H+p:p}}function ht(E,_,v){let R=null;switch(_){case ne.decimal_degrees:R=k(E,f);break;case ne.seconds:R=E;break;case ne.gradians:R=k(E,3240);break;case ne.radians:R=k(E,z);break;default:throw new w.aV(null,w.rH.LogicError,null,{reason:"unexpected evaluation"})}switch(v){case ne.decimal_degrees:return L(R,f);case ne.seconds:return R;case ne.gradians:return L(R,3240);case ne.radians:return R/z;default:throw new w.aV(null,w.rH.LogicError,null,{reason:"unexpected evaluation"})}}class Re{constructor(_){this._seconds=_}static createFromAngleAndUnits(_,v){return new Re(ht(_,v,ne.seconds))}extractAngularUnits(_){return ht(this._seconds,ne.seconds,Qe(_))}static createFromDegreesMinutesSeconds(_,v,R){return new Re(Z(Z(k(_,f),k(v,C)),R))}}function Qe(E){switch((0,ee.O3)(E),E){case ne.decimal_degrees:case ne.truncated_degrees:case ne.degrees_minutes_seconds:return ne.decimal_degrees;case ne.gradians:return ne.gradians;case ne.fractional_degree_minutes:return ne.fractional_degree_minutes;case ne.radians:return ne.radians;case ne.seconds:case ne.fractional_minute_seconds:return ne.seconds}}class st{constructor(_,v,R,Q){this.view=_,this.angle=v,this.merdian=R,this.direction=Q,this._dms=null,this._formattedDms=null}static createFromStringAndBearing(_,v,R){return new st(_,v.getAngle(R),v.getMeridian(R),v.getDirection(R))}fetchAngle(){return this.angle}fetchMeridian(){return this.merdian}fetchDirection(){return this.direction}fetchView(){return this.view}fetchDms(){return null===this._dms&&this._calculateDms(),this._dms}fetchFormattedDms(){return null===this._formattedDms&&this._calculateDms(),this._formattedDms}_calculateDms(){let _=null,v=ne.truncated_degrees,R=0;for(let Q=0;Q<this.view.length;Q++){const p=this.view[Q];switch(p){case"m":_=ze(this.view,Q,p),v=v===ne.truncated_degrees?ne.fractional_degree_minutes:v,Q=_.newpos;continue;case"s":_=ze(this.view,Q,p),v=ne.fractional_minute_seconds,R=R<_.rounding?_.rounding:R,Q=_.newpos;continue;default:continue}}this._dms=Ne.secondsToDMS(this.angle.extractAngularUnits(ne.seconds)),this._formattedDms=Ne.secondsToDMS(this.angle.extractAngularUnits(ne.seconds)).format(v,R)}}function Ee(E,_,v,R,Q){let p=null;switch(_){case ne.decimal_degrees:case ne.radians:case ne.gradians:return p=Ye(ce(E.extractAngularUnits(_),R),Le(_)),$e(p.toFixed(R),"0",v+R+(R>0?1:0));case ne.truncated_degrees:case ne.fractional_degree_minutes:return p=Ye(Q.fetchFormattedDms().getField(_),Le(_)),$e(p.toFixed(R),"0",v+R+(R>0?1:0));case ne.fractional_minute_seconds:return p=Ye(ce(Q.fetchDms().getField(_),R),Le(_)),$e(p.toFixed(R),"0",v+R+(R>0?1:0));default:throw new w.aV(null,w.rH.LogicError,null,{reason:"unexpected evaluation"})}}function Be(E){switch(E.toUpperCase().trim()){case"N":case"NORTH":return de.north;case"E":case"EAST":return de.east;case"S":case"SOUTH":return de.south;case"W":case"WEST":return de.west}return null}function ke(E){const _=parseFloat(E);if((0,D.b)(_)){if(isNaN(_))throw new w.aV(null,w.rH.LogicError,null,{reason:"invalid conversion"});return _}throw new w.aV(null,w.rH.LogicError,null,{reason:"invalid conversion"})}function Ue(E,_,v){const R=v===me.quadrant;let Q=null,p=null,g=0,I=0,W=0;if(R){if(E.length<2)throw new w.aV(null,w.rH.LogicError,null,{reason:"conversion error"});W=1;const q=function Me(E){switch((0,D.g)(E)){case 1:return{first:de.north,second:de.east};case 2:return{first:de.south,second:de.east};case 3:return{first:de.south,second:de.west};case 4:return{first:de.north,second:de.west}}return null}((0,D.j)(E[E.length-1]));if(q?(Q=q.first,p=q.second):(g=1,Q=Be((0,D.j)(E[0])),p=Be((0,D.j)(E[E.length-1]))),null===Q||null===p)throw new w.aV(null,w.rH.LogicError,null,{reason:"invalid conversion"})}switch(_){case ne.decimal_degrees:case ne.radians:case ne.gradians:if(0===E.length)throw new w.aV(null,w.rH.LogicError,null,{reason:"invalid conversion"});return R?Pe.createFromAngleMeridianAndDirection(Re.createFromAngleAndUnits(ke(E[g]),Qe(_)),Q,p):Pe.createFromAngleAndDirection(Re.createFromAngleAndUnits(ke(E[g]),Qe(_)),v);case ne.degrees_minutes_seconds:if(I=E.length-W-g,3===I){const q=Re.createFromDegreesMinutesSeconds(ke(E[g]),ke(E[g+1]),ke(E[g+2]));return R?Pe.createFromAngleMeridianAndDirection(q,Q,p):Pe.createFromAngleAndDirection(q,v)}if(1===I){const q=ke(E[g]),he=Ne.numberToDms(q),ye=Re.createFromDegreesMinutesSeconds(he.m_degrees,he.m_minutes,he.m_seconds);return R?Pe.createFromAngleMeridianAndDirection(ye,Q,p):Pe.createFromAngleAndDirection(ye,v)}}throw new w.aV(null,w.rH.LogicError,null,{reason:"invalid conversion"})}function ze(E,_,v){const R={padding:0,rounding:0,newpos:_};let Q=!1;for(;_<E.length;){const p=E[_];if(p===v)Q?R.rounding++:R.padding++,_++;else{if("."!==p)break;Q=!0,_++}}return R.newpos=_-1,R}function Tt(E,_,v){const R={escaped:"",newpos:_};for(_++;_<E.length;){const Q=E[_];if(_++,"]"===Q)break;R.escaped+=Q}return R.newpos=_-1,R}function ut(E,_,v){if(!(_ instanceof V.Z))throw new w.aV(null,w.rH.InvalidParameter,null);if(!1===_.hasField("directionType"))throw new w.aV(null,w.rH.LogicError,null,{reason:"missing directionType"});if(!1===_.hasField("angleType"))throw new w.aV(null,w.rH.LogicError,null,{reason:"missing angleType"});const R=be(oe(_.field("directiontype"))),Q=function ve(E,_,v){if((0,D.b)(E))return function Ct(E,_,v){if(v===me.quadrant)throw new w.aV(null,w.rH.LogicError,null,{reason:"conversion error"});if(_===ne.degrees_minutes_seconds){const R=Ne.numberToDms(E);return Pe.createFromAngleAndDirection(Re.createFromDegreesMinutesSeconds(R.m_degrees,R.m_minutes,R.m_seconds),v)}return Pe.createFromAngleAndDirection(Re.createFromAngleAndUnits(E,Qe(_)),v)}((0,D.g)(E),_,v);if((0,D.c)(E))return Ue(function rt(E){const _=[" ","-","/","'",'"',"\\","^","\xb0",G,"\t","\r","\n","*"];let v="";for(let R=0;R<E.length;R++){const Q=E.charAt(R);_.includes(Q)?v+="RRSPLITRRSPLITRR":v+=Q}return v.split("RRSPLITRRSPLITRR").filter(R=>""!==R)}(E),_,v);if((0,D.m)(E))return Ue(E,_,v);if((0,D.x)(E))return Ue(E.toArray(),_,v);throw new w.aV(null,w.rH.LogicError,null,{reason:"conversion error"})}(E,lt(oe(_.field("angletype"))),R);if(!(v instanceof V.Z))throw new w.aV(null,w.rH.InvalidParameter,null);if(!1===v.hasField("directionType"))throw new w.aV(null,w.rH.LogicError,null,{reason:"missing directionType"});if(!1===v.hasField("outputType"))throw new w.aV(null,w.rH.LogicError,null,{reason:"missing angleType"});const p=be(oe(v.field("directiontype"))),g=v.hasField("angleType")?lt(oe(v.field("angletype"))):null,I=oe(v.field("outputType")).toUpperCase().trim();if(!p||!I)throw new w.aV(null,w.rH.LogicError,null,{reason:"conversion error"});if(!(g||"TEXT"===I&&v.hasField("format")))throw new w.aV(null,w.rH.LogicError,null,{reason:"invalid unit"});switch(I){case"VALUE":return p===me.quadrant||g===ne.degrees_minutes_seconds?function Et(E,_,v){const R=E.getAngle(_);if(_===me.quadrant&&v===ne.degrees_minutes_seconds){const Q=Ne.secondsToDMS(R.extractAngularUnits(ne.seconds));return[_e(E.getMeridian(_),"SHORT"),Q.m_degrees,Q.m_minutes,Q.m_seconds,_e(E.getDirection(_),"SHORT")]}if(v===ne.degrees_minutes_seconds){const Q=Ne.secondsToDMS(R.extractAngularUnits(ne.seconds));return[Q.m_degrees,Q.m_minutes,Q.m_seconds]}return _===me.quadrant?[_e(E.getMeridian(_),"SHORT"),R.extractAngularUnits(v),_e(E.getDirection(_),"SHORT")]:[R.extractAngularUnits(v)]}(Q,p,g):function mt(E,_,v){const R=Qe(v);if(R&&v!==ne.degrees_minutes_seconds)return E.getAngle(_).extractAngularUnits(R);throw new w.aV(null,w.rH.LogicError,null,{reason:"conversion error"})}(Q,p,g);case"TEXT":{let W="";return v.hasField("format")&&(W=(0,D.j)(v.field("format"))),null!==W&&""!==W||(W=function It(E,_){let v="";switch(E){case ne.decimal_degrees:v=_===me.quadrant?"DD.DD\xb0":"DDD.DD\xb0";break;case ne.degrees_minutes_seconds:v=_===me.quadrant?"dd\xb0 mm' ss\"":"ddd\xb0 mm' ss.ss\"";break;case ne.radians:v="R.RR";break;case ne.gradians:v="GGG.GG"+G;break;default:throw new w.aV(null,w.rH.LogicError,null,{reason:"conversion error"})}return _===me.quadrant&&(v="p "+v+" b"),v}(g,p)),function pt(E,_,v){let R="",Q=null,p=null;const g=st.createFromStringAndBearing(_,E,v),I={D:ne.decimal_degrees,d:ne.truncated_degrees,m:ne.fractional_degree_minutes,s:ne.fractional_minute_seconds,R:ne.radians,G:ne.gradians};for(let W=0;W<_.length;W++){const q=_[W];switch(q){case"[":Q=Tt(_,W),R+=Q.escaped,W=Q.newpos;continue;case"D":case"d":case"m":case"s":case"R":case"G":Q=ze(_,W,q),p=E.getAngle(v),R+=Ee(p,I[q],Q.padding,Q.rounding,g),W=Q.newpos;continue;case"P":case"p":R+=_e(g.fetchMeridian(),"p"===q?"SHORT":"LONG");continue;case"B":case"b":R+=_e(g.fetchDirection(),"b"===q?"SHORT":"LONG");continue;default:R+=q}}return R}(Q,W,p)}default:throw new w.aV(null,w.rH.InvalidParameter,null)}}const Ve=2654435761,We=2246822519,qe=3266489917,Dt=668265263,Je=374761393;function et(E){const _=[];for(let v=0,R=E.length;v<R;v++){let Q=E.charCodeAt(v);Q<128?_.push(Q):Q<2048?_.push(192|Q>>6,128|63&Q):Q<55296||Q>=57344?_.push(224|Q>>12,128|Q>>6&63,128|63&Q):(v++,Q=65536+((1023&Q)<<10|1023&E.charCodeAt(v)),_.push(240|Q>>18,128|Q>>12&63,128|Q>>6&63,128|63&Q))}return new Uint8Array(_)}class wt{constructor(_){this._seed=_,this._totallen=0,this._bufs=[],this.init()}init(){return this._bufs=[],this._totallen=0,this}updateFloatArray(_){const v=[];for(const R of _)isNaN(R)?v.push("NaN"):v.push(R===1/0?"Infinity":R===-1/0?"-Infinity":0===R?"0":R.toString(16));this.update(et(v.join("")))}updateIntArray(_){const v=Int32Array.from(_);this.update(new Uint8Array(v.buffer))}updateUint8Array(_){this.update(Uint8Array.from(_))}updateWithString(_){return this.update(et(_))}update(_){return this._bufs.push(_),this._totallen+=_.length,this}digest(){const _=new Uint8Array(this._totallen);let v=0;for(const R of this._bufs)_.set(R,v),v+=R.length;return this.init(),this._xxHash32(_,this._seed)}_xxHash32(_,v=0){const R=_;let Q=v+Je&4294967295,p=0;if(R.length>=16){const I=[v+Ve+We&4294967295,v+We&4294967295,v+0&4294967295,v-Ve&4294967295],W=_,q=W.length-16;let he=0;for(p=0;(4294967280&p)<=q;p+=4){let it=I[he]+((W[p+0]+(W[p+1]<<8))*We+((W[p+2]+(W[p+3]<<8))*We<<16))&4294967295;it=it<<13|it>>>19,I[he]=(65535&it)*Ve+((it>>>16)*Ve<<16)&4294967295,he=he+1&3}Q=(I[0]<<1|I[0]>>>31)+(I[1]<<7|I[1]>>>25)+(I[2]<<12|I[2]>>>20)+(I[3]<<18|I[3]>>>14)&4294967295}Q=Q+_.length&4294967295;const g=_.length-4;for(;p<=g;p+=4)Q=Q+((R[p+0]+(R[p+1]<<8))*qe+((R[p+2]+(R[p+3]<<8))*qe<<16))&4294967295,Q=Q<<17|Q>>>15,Q=(65535&Q)*Dt+((Q>>>16)*Dt<<16)&4294967295;for(;p<R.length;++p)Q+=R[p]*Je,Q=Q<<11|Q>>>21,Q=(65535&Q)*Ve+((Q>>>16)*Ve<<16)&4294967295;return Q^=Q>>>15,Q=((65535&Q)*We&4294967295)+((Q>>>16)*We<<16),Q^=Q>>>13,Q=((65535&Q)*qe&4294967295)+((Q>>>16)*qe<<16),Q^=Q>>>16,Q<0?Q+4294967296:Q}}var Ft=j(2004),gt=j(72854),De=j(72642),ie=j(37118),ct=j(55214),tt=j(65234),vt=j(21726);function ft(E,_){if(!E||!_)return E===_;if(E.x===_.x&&E.y===_.y){if(E.hasZ){if(E.z!==_.z)return!1}else if(_.hasZ)return!1;if(E.hasM){if(E.m!==_.m)return!1}else if(_.hasM)return!1;return!0}return!1}function se(E,_,v){if(null!==E)if((0,D.m)(E)){if(_.updateUint8Array([61]),v.map.has(E)){const R=v.map.get(E);_.updateIntArray([61237541^R])}else{v.map.set(E,v.currentLength++);for(const R of E)se(R,_,v);v.map.delete(E),v.currentLength--}_.updateUint8Array([199])}else if((0,D.x)(E)){if(_.updateUint8Array([61]),v.map.has(E)){const R=v.map.get(E);_.updateIntArray([61237541^R])}else{v.map.set(E,v.currentLength++);for(const R of E.toArray())se(R,_,v);v.map.delete(E),v.currentLength--}_.updateUint8Array([199])}else{if((0,D.k)(E))return _.updateIntArray([E.toNumber()]),void _.updateUint8Array([241]);if((0,D.c)(E))return _.updateIntArray([E.length]),_.updateWithString(E),void _.updateUint8Array([41]);if((0,D.a)(E))_.updateUint8Array([!0===E?1:0,113]);else{if((0,D.b)(E))return _.updateFloatArray([E]),void _.updateUint8Array([173]);if(E instanceof S.Z)throw new w.aV(v.context,w.rH.UnsupportedHashType,v.node);if(E instanceof X.Z)throw new w.aV(v.context,w.rH.UnsupportedHashType,v.node);if(!(E instanceof V.Z)){if((0,D.w)(E))throw new w.aV(v.context,w.rH.UnsupportedHashType,v.node);if(E instanceof De.Z)return _.updateIntArray([3833836621]),_.updateIntArray([0]),_.updateFloatArray([E.x]),_.updateIntArray([1]),_.updateFloatArray([E.y]),E.hasZ&&(_.updateIntArray([2]),_.updateFloatArray([E.z])),E.hasM&&(_.updateIntArray([3]),_.updateFloatArray([E.m])),_.updateIntArray([3765347959]),void se(E.spatialReference.wkid,_,v);if(E instanceof ie.Z){_.updateIntArray([1266616829]);for(let R=0;R<E.rings.length;R++){const Q=E.rings[R],p=[];let g=null,I=null;for(let W=0;W<Q.length;W++){const q=E.getPoint(R,W);if(0===W)g=q;else if(ft(I,q))continue;I=q,W===Q.length-1&&ft(g,q)||p.push(q)}_.updateIntArray([1397116793,p.length]);for(let W=0;W<p.length;W++){const q=p[W];_.updateIntArray([3962308117,W]),se(q,_,v),_.updateIntArray([2716288009])}_.updateIntArray([2278822459])}return _.updateIntArray([3878477243]),void se(E.spatialReference.wkid,_,v)}if(E instanceof ct.Z){_.updateIntArray([4106883559]);for(let R=0;R<E.paths.length;R++){const Q=E.paths[R];_.updateIntArray([1397116793,Q.length]);for(let p=0;p<Q.length;p++)_.updateIntArray([3962308117,p]),se(E.getPoint(R,p),_,v),_.updateIntArray([2716288009]);_.updateIntArray([2278822459])}return _.updateIntArray([2568784753]),void se(E.spatialReference.wkid,_,v)}if(E instanceof gt.Z){_.updateIntArray([588535921,E.points.length]);for(let R=0;R<E.points.length;R++){const Q=E.getPoint(R);_.updateIntArray([R]),se(Q,_,v)}return _.updateIntArray([1700171621]),void se(E.spatialReference.wkid,_,v)}if(E instanceof Ft.Z)return _.updateIntArray([3483648373]),_.updateIntArray([0]),_.updateFloatArray([E.xmax]),_.updateIntArray([1]),_.updateFloatArray([E.xmin]),_.updateIntArray([2]),_.updateFloatArray([E.ymax]),_.updateIntArray([3]),_.updateFloatArray([E.ymin]),E.hasZ&&(_.updateIntArray([4]),_.updateFloatArray([E.zmax]),_.updateIntArray([5]),_.updateFloatArray([E.zmin])),E.hasM&&(_.updateIntArray([6]),_.updateFloatArray([E.mmax]),_.updateIntArray([7]),_.updateFloatArray([E.mmin])),_.updateIntArray([3622027469]),void se(E.spatialReference.wkid,_,v);if(E instanceof tt.Z)return _.updateIntArray([14]),null!=E.wkid&&_.updateIntArray([E.wkid]),void(E.wkt&&_.updateWithString(E.wkt));throw(0,D.i)(E)||(0,D.T)(E)||(0,D.U)(E),new w.aV(v.context,w.rH.UnsupportedHashType,v.node)}if(_.updateUint8Array([223]),v.map.has(E)){const R=v.map.get(E);_.updateIntArray([61237541^R])}else{v.map.set(E,v.currentLength++);for(const R of E.keys())_.updateIntArray([R.length]),_.updateWithString(R),_.updateUint8Array([251]),se(E.field(R),_,v),_.updateUint8Array([239]);v.map.delete(E),v.currentLength--}_.updateUint8Array([73])}}else _.updateUint8Array([0,139])}function _t(E,_){E.portal=function(v,R){return _(v,R,(Q,p,g)=>((0,D.y)(g,1,1,v,R),new X.Z((0,D.j)(g[0]))))},E.typeof=function(v,R){return _(v,R,(Q,p,g)=>{(0,D.y)(g,1,1,v,R);const I=(0,D.B)(g[0]);if("Unrecognised Type"===I)throw new w.aV(v,w.rH.UnrecognisedType,R);return I})},E.trim=function(v,R){return _(v,R,(Q,p,g)=>((0,D.y)(g,1,1,v,R),(0,D.j)(g[0]).trim()))},E.tohex=function(v,R){return _(v,R,(Q,p,g)=>{(0,D.y)(g,1,1,v,R);const I=(0,D.g)(g[0]);return isNaN(I)?I:I.toString(16)})},E.upper=function(v,R){return _(v,R,(Q,p,g)=>((0,D.y)(g,1,1,v,R),(0,D.j)(g[0]).toUpperCase()))},E.proper=function(v,R){return _(v,R,(Q,p,g)=>{(0,D.y)(g,1,2,v,R);let I=1;2===g.length&&"firstword"===(0,D.j)(g[1]).toLowerCase()&&(I=2);const W=/\s/,q=(0,D.j)(g[0]);let he="",ye=!0;for(let Ce=0;Ce<q.length;Ce++){let Se=q[Ce];W.test(Se)?1===I&&(ye=!0):Se.toUpperCase()!==Se.toLowerCase()&&(ye?(Se=Se.toUpperCase(),ye=!1):Se=Se.toLowerCase()),he+=Se}return he})},E.lower=function(v,R){return _(v,R,(Q,p,g)=>((0,D.y)(g,1,1,v,R),(0,D.j)(g[0]).toLowerCase()))},E.guid=function(v,R){return _(v,R,(Q,p,g)=>{if((0,D.y)(g,0,1,v,R),g.length>0)switch((0,D.j)(g[0]).toLowerCase()){case"digits":return(0,D.M)().replace("-","").replace("-","").replace("-","").replace("-","");case"digits-hyphen":return(0,D.M)();case"digits-hyphen-braces":return"{"+(0,D.M)()+"}";case"digits-hyphen-parentheses":return"("+(0,D.M)()+")"}return"{"+(0,D.M)()+"}"})},E.standardizeguid=function(v,R){return _(v,R,(Q,p,g)=>{(0,D.y)(g,2,2,v,R);let I=(0,D.j)(g[0]);if(""===I||null===I)return"";const W=/^(\{|\()?(?<partA>[0-9a-z]{8})(\-?)(?<partB>[0-9a-z]{4})(\-?)(?<partC>[0-9a-z]{4})(\-?)(?<partD>[0-9a-z]{4})(\-?)(?<partE>[0-9a-z]{12})(\}|\))?$/gim.exec(I);if(!W)return"";const q=W.groups;switch(I=q.partA+"-"+q.partB+"-"+q.partC+"-"+q.partD+"-"+q.partE,(0,D.j)(g[1]).toLowerCase()){case"digits":return I.replace("-","").replace("-","").replace("-","").replace("-","");case"digits-hyphen":return I;case"digits-hyphen-braces":return"{"+I+"}";case"digits-hyphen-parentheses":return"("+I+")"}return"{"+I+"}"})},E.console=function(v,R){return _(v,R,(Q,p,g)=>(0===g.length||v.console((0,D.j)(1===g.length?g[0]:g)),D.v))},E.mid=function(v,R){return _(v,R,(Q,p,g)=>{(0,D.y)(g,2,3,v,R);let I=(0,D.g)(g[1]);if(isNaN(I))return"";if(I<0&&(I=0),2===g.length)return(0,D.j)(g[0]).substr(I);let W=(0,D.g)(g[2]);return isNaN(W)?"":(W<0&&(W=0),(0,D.j)(g[0]).substr(I,W))})},E.find=function(v,R){return _(v,R,(Q,p,g)=>{(0,D.y)(g,2,3,v,R);let I=0;if(g.length>2){if(I=(0,D.g)((0,D.A)(g[2],0)),isNaN(I))return-1;I<0&&(I=0)}return(0,D.j)(g[1]).indexOf((0,D.j)(g[0]),I)})},E.left=function(v,R){return _(v,R,(Q,p,g)=>{(0,D.y)(g,2,2,v,R);let I=(0,D.g)(g[1]);return isNaN(I)?"":(I<0&&(I=0),(0,D.j)(g[0]).substr(0,I))})},E.right=function(v,R){return _(v,R,(Q,p,g)=>{(0,D.y)(g,2,2,v,R);let I=(0,D.g)(g[1]);return isNaN(I)?"":(I<0&&(I=0),(0,D.j)(g[0]).substr(-1*I,I))})},E.split=function(v,R){return _(v,R,(Q,p,g)=>{let I;(0,D.y)(g,2,4,v,R);let W=(0,D.g)((0,D.A)(g[2],-1));const q=(0,D.h)((0,D.A)(g[3],!1));if(-1===W||null===W||!0===q?I=(0,D.j)(g[0]).split((0,D.j)(g[1])):(isNaN(W)&&(W=-1),W<-1&&(W=-1),I=(0,D.j)(g[0]).split((0,D.j)(g[1]),W)),!1===q)return I;const he=[];for(let ye=0;ye<I.length&&!(-1!==W&&he.length>=W);ye++)""!==I[ye]&&void 0!==I[ye]&&he.push(I[ye]);return he})},E.text=function(v,R){return _(v,R,(Q,p,g)=>((0,D.y)(g,1,2,v,R),(0,D.t)(g[0],g[1])))},E.concatenate=function(v,R){return _(v,R,(Q,p,g)=>{const I=[];if(g.length<1)return"";if((0,D.m)(g[0])){const W=(0,D.A)(g[2],"");for(let q=0;q<g[0].length;q++)I[q]=(0,D.t)(g[0][q],W);return I.join(g.length>1?g[1]:"")}if((0,D.x)(g[0])){const W=(0,D.A)(g[2],"");for(let q=0;q<g[0].length();q++)I[q]=(0,D.t)(g[0].get(q),W);return I.join(g.length>1?g[1]:"")}for(let W=0;W<g.length;W++)I[W]=(0,D.t)(g[W]);return I.join("")})},E.reverse=function(v,R){return _(v,R,(Q,p,g)=>{if((0,D.y)(g,1,1,v,R),(0,D.m)(g[0])){const I=g[0].slice(0);return I.reverse(),I}if((0,D.x)(g[0])){const I=g[0].toArray().slice(0);return I.reverse(),I}throw new w.aV(v,w.rH.InvalidParameter,R)})},E.replace=function(v,R){return _(v,R,(Q,p,g)=>{(0,D.y)(g,3,4,v,R);const I=(0,D.j)(g[0]),W=(0,D.j)(g[1]),q=(0,D.j)(g[2]);return 4!==g.length||(0,D.h)(g[3])?(0,D.L)(I,W,q):I.replace(W,q)})},E.schema=function(v,R){return _(v,R,(Q,p,g)=>{if((0,D.w)(g[0])){const I=(0,D.N)(g[0]);return I?V.Z.convertObjectToArcadeDictionary(I,(0,D.C)(v)):null}throw new w.aV(v,w.rH.InvalidParameter,R)})},E.subtypes=function(v,R){return _(v,R,(Q,p,g)=>{if((0,D.y)(g,1,1,v,R),(0,D.w)(g[0])){const I=(0,D.O)(g[0]);return I?V.Z.convertObjectToArcadeDictionary(I,(0,D.C)(v)):null}throw new w.aV(v,w.rH.InvalidParameter,R)})},E.subtypecode=function(v,R){return _(v,R,(Q,p,g)=>{if((0,D.y)(g,1,1,v,R),(0,D.w)(g[0])){const I=(0,D.O)(g[0]);if(!I)return null;if(I.subtypeField&&g[0].hasField(I.subtypeField)){const W=g[0].field(I.subtypeField);for(const q of I.subtypes)if(q.code===W)return q.code;return null}return null}throw new w.aV(v,w.rH.InvalidParameter,R)})},E.subtypename=function(v,R){return _(v,R,(Q,p,g)=>{if((0,D.y)(g,1,1,v,R),(0,D.w)(g[0])){const I=(0,D.O)(g[0]);if(!I)return"";if(I.subtypeField&&g[0].hasField(I.subtypeField)){const W=g[0].field(I.subtypeField);for(const q of I.subtypes)if(q.code===W)return q.name;return""}return""}throw new w.aV(v,w.rH.InvalidParameter,R)})},E.gdbversion=function(v,R){return _(v,R,(Q,p,g)=>{if((0,D.y)(g,1,1,v,R),(0,D.w)(g[0]))return g[0].gdbVersion();throw new w.aV(v,w.rH.InvalidParameter,R)})},E.domain=function(v,R){return _(v,R,(Q,p,g)=>{if((0,D.y)(g,2,3,v,R),(0,D.w)(g[0])){const I=(0,D.P)(g[0],(0,D.j)(g[1]),void 0===g[2]?void 0:(0,D.g)(g[2]));return I&&I.domain?V.Z.convertObjectToArcadeDictionary("coded-value"===I.domain.type||"codedValue"===I.domain.type?{type:"codedValue",name:I.domain.name,dataType:Y.yE[I.field.type],codedValues:I.domain.codedValues.map(W=>({name:W.name,code:W.code}))}:{type:"range",name:I.domain.name,dataType:Y.yE[I.field.type],min:I.domain.min,max:I.domain.max},(0,D.C)(v)):null}throw new w.aV(v,w.rH.InvalidParameter,R)})},E.domainname=function(v,R){return _(v,R,(Q,p,g)=>{if((0,D.y)(g,2,4,v,R),(0,D.w)(g[0]))return(0,D.Q)(g[0],(0,D.j)(g[1]),g[2],void 0===g[3]?void 0:(0,D.g)(g[3]));throw new w.aV(v,w.rH.InvalidParameter,R)})},E.domaincode=function(v,R){return _(v,R,(Q,p,g)=>{if((0,D.y)(g,2,4,v,R),(0,D.w)(g[0]))return(0,D.S)(g[0],(0,D.j)(g[1]),g[2],void 0===g[3]?void 0:(0,D.g)(g[3]));throw new w.aV(v,w.rH.InvalidParameter,R)})},E.urlencode=function(v,R){return _(v,R,(Q,p,g)=>{if((0,D.y)(g,1,1,v,R),null===g[0])return"";if(g[0]instanceof V.Z){let I="";for(const W of g[0].keys()){const q=g[0].field(W);""!==I&&(I+="&"),I+=null===q?encodeURIComponent(W)+"=":encodeURIComponent(W)+"="+encodeURIComponent(q)}return I}return encodeURIComponent((0,D.j)(g[0]))})},E.hash=function(v,R){return _(v,R,(Q,p,g)=>{(0,D.y)(g,1,1,v,R);const I=new wt(0);return se(g[0],I,{context:v,node:R,map:new Map,currentLength:0}),I.digest()})},E.convertdirection=function(v,R){return _(v,R,(Q,p,g)=>((0,D.y)(g,3,3,v,R),ut(g[0],g[1],g[2])))},E.fromjson=function(v,R){return _(v,R,(Q,p,g)=>{if((0,D.y)(g,1,1,v,R),!1===(0,D.c)(g[0]))throw new w.aV(v,w.rH.InvalidParameter,R);return V.Z.convertJsonToArcade(JSON.parse((0,D.j)(g[0])),(0,D.C)(v))})},E.expects=function(v,R){return _(v,R,(Q,p,g)=>{if(g.length<1)throw new w.aV(v,w.rH.WrongNumberOfParameters,R);return D.v})},E.tocharcode=function(v,R){return _(v,R,(Q,p,g)=>{(0,D.y)(g,1,2,v,R);const I=(0,D.g)((0,D.A)(g[1],0)),W=(0,D.j)(g[0]);if(0===W.length&&1===g.length)return null;if(W.length<=I||I<0)throw new w.aV(v,w.rH.OutOfBounds,R);return W.charCodeAt(I)})},E.tocodepoint=function(v,R){return _(v,R,(Q,p,g)=>{(0,D.y)(g,1,2,v,R);const I=(0,D.g)((0,D.A)(g[1],0)),W=(0,D.j)(g[0]);if(0===W.length&&1===g.length)return null;if(W.length<=I||I<0)throw new w.aV(v,w.rH.OutOfBounds,R);return W.codePointAt(I)})},E.fromcharcode=function(v,R){return _(v,R,(Q,p,g)=>{if(g.length<1)throw new w.aV(v,w.rH.WrongNumberOfParameters,R);const I=g.map(W=>Math.trunc((0,D.g)(W))).filter(W=>W>=0&&W<=65535);return 0===I.length?null:String.fromCharCode.apply(null,I)})},E.fromcodepoint=function(v,R){return _(v,R,(Q,p,g)=>{if(g.length<1)throw new w.aV(v,w.rH.WrongNumberOfParameters,R);let I;try{I=g.map(W=>Math.trunc((0,D.g)(W))).filter(W=>W<=1114111&&W>>>0===W)}catch{return null}return 0===I.length?null:String.fromCodePoint.apply(null,I)})},E.getuser=function(v,R){return _(v,R,(Q,p,g)=>{(0,D.y)(g,0,2,v,R);let I=(0,D.A)(g[1],"");if(I=!0===I||!1===I?"":(0,D.j)(I),null!==I&&""!==I)return null;if(0===g.length||g[0]instanceof X.Z){let W=null;if(v.services&&v.services.portal&&(W=v.services.portal),g.length>0&&!function yt(E,_){return!!E&&(0,vt.tm)(E,_?.restUrl||"")}(g[0].field("url"),W)||!W)return null;if(""===I){const q=function dt(E){return"loaded"===E.loadStatus&&E.user&&E.user.sourceJSON?E.user.sourceJSON:null}(W);if(q){const he=JSON.parse(JSON.stringify(q));for(const ye of["lastLogin","created","modified"])null!=he[ye]&&(he[ye]=new Date(he[ye]));return V.Z.convertObjectToArcadeDictionary(he,(0,D.C)(v))}}return null}throw new w.aV(v,w.rH.InvalidParameter,R)})}}},27187:(Ie,pe,j)=>{j.d(pe,{EI:()=>S,Lz:()=>w,SV:()=>V,r1:()=>Y});var X=j(2004);function S(ee){if(null==ee)return null;if("number"==typeof ee)return ee;let O=ee.toLowerCase();switch(O=O.replace(/\s/g,""),O=O.replace(/-/g,""),O){case"meters":case"meter":case"m":case"squaremeters":case"squaremeter":return 109404;case"miles":case"mile":case"squaremile":case"squaremiles":return 109439;case"kilometers":case"kilometer":case"squarekilometers":case"squarekilometer":case"km":return 109414;case"acres":case"acre":case"ac":return 109402;case"hectares":case"hectare":case"ha":return 109401;case"yard":case"yd":case"yards":case"squareyards":case"squareyard":return 109442;case"feet":case"ft":case"foot":case"squarefeet":case"squarefoot":return 109405;case"nmi":case"nauticalmile":case"nauticalmiles":case"squarenauticalmile":case"squarenauticalmiles":return 109409}return null}function V(ee){if(null==ee)return null;switch(ee.type){case"polygon":case"multipoint":case"polyline":return ee.extent;case"point":return new X.Z({xmin:ee.x,ymin:ee.y,xmax:ee.x,ymax:ee.y,spatialReference:ee.spatialReference});case"extent":return ee}return null}function w(ee){if(null==ee)return null;if("number"==typeof ee)return ee;let O=ee.toLowerCase();switch(O=O.replace(/\s/g,""),O=O.replace(/-/g,""),O){case"meters":case"meter":case"m":case"squaremeters":case"squaremeter":return 9001;case"miles":case"mile":case"squaremile":case"squaremiles":return 9093;case"kilometers":case"kilometer":case"squarekilometers":case"squarekilometer":case"km":return 9036;case"yard":case"yd":case"yards":case"squareyards":case"squareyard":return 9096;case"feet":case"ft":case"foot":case"squarefeet":case"squarefoot":return 9002;case"nmi":case"nauticalmile":case"nauticalmiles":case"squarenauticalmile":case"squarenauticalmiles":return 9030}return null}function Y(ee){if(null==ee)return null;const O=ee.clone();return void 0!==ee.cache._geVersion&&(O.cache._geVersion=ee.cache._geVersion),O}},19927:(Ie,pe,j)=>{j.d(pe,{Kq:()=>te,Vf:()=>L,bV:()=>N,dN:()=>b,gW:()=>ee,mb:()=>Z,w8:()=>T,x5:()=>K});const X={all:{min:2,max:2},none:{min:2,max:2},any:{min:2,max:2},reduce:{min:2,max:3},map:{min:2,max:2},filter:{min:2,max:2},fromcodepoint:{min:1,max:-1},fromcharcode:{min:1,max:-1},tocodepoint:{min:1,max:2},tocharcode:{min:1,max:2},concatenate:{min:0,max:-1},expects:{min:1,max:-1},getfeatureset:{min:1,max:2},week:{min:1,max:2},fromjson:{min:1,max:1},length3d:{min:1,max:2},tohex:{min:1,max:1},hash:{min:1,max:1},timezone:{min:1,max:1},timezoneoffset:{min:1,max:1},changetimezone:{min:2,max:2},isoweek:{min:1,max:1},isoweekday:{min:1,max:1},hasvalue:{min:2,max:2},isomonth:{min:1,max:1},isoyear:{min:1,max:1},resize:{min:2,max:3},slice:{min:0,max:-1},splice:{min:0,max:-1},push:{min:2,max:2},pop:{min:1,max:1},includes:{min:2,max:2},array:{min:1,max:2},front:{min:1,max:1},back:{min:1,max:1},insert:{min:3,max:3},erase:{min:2,max:2},split:{min:2,max:4},guid:{min:0,max:1},standardizeguid:{min:2,max:2},today:{min:0,max:0},angle:{min:2,max:3},bearing:{min:2,max:3},urlencode:{min:1,max:1},now:{min:0,max:0},timestamp:{min:0,max:0},day:{min:1,max:1},month:{min:1,max:1},year:{min:1,max:1},hour:{min:1,max:1},second:{min:1,max:1},millisecond:{min:1,max:1},minute:{min:1,max:1},weekday:{min:1,max:1},toutc:{min:1,max:1},tolocal:{min:1,max:1},date:{min:0,max:8},datediff:{min:2,max:4},dateadd:{min:2,max:3},trim:{min:1,max:1},text:{min:1,max:2},left:{min:2,max:2},right:{min:2,max:2},mid:{min:2,max:3},upper:{min:1,max:1},proper:{min:1,max:2},lower:{min:1,max:1},find:{min:2,max:3},iif:{min:3,max:3},decode:{min:2,max:-1},when:{min:2,max:-1},defaultvalue:{min:2,max:2},isempty:{min:1,max:1},domaincode:{min:2,max:4},domainname:{min:2,max:4},polygon:{min:1,max:1},point:{min:1,max:1},polyline:{min:1,max:1},extent:{min:1,max:1},multipoint:{min:1,max:1},ringisclockwise:{min:1,max:1},geometry:{min:1,max:1},count:{min:0,max:-1},number:{min:1,max:2},acos:{min:1,max:1},asin:{min:1,max:1},atan:{min:1,max:1},atan2:{min:2,max:2},ceil:{min:1,max:2},floor:{min:1,max:2},round:{min:1,max:2},cos:{min:1,max:1},exp:{min:1,max:1},log:{min:1,max:1},min:{min:0,max:-1},constrain:{min:3,max:3},console:{min:0,max:-1},max:{min:0,max:-1},pow:{min:2,max:2},random:{min:0,max:0},sqrt:{min:1,max:1},sin:{min:1,max:1},tan:{min:1,max:1},abs:{min:1,max:1},isnan:{min:1,max:1},stdev:{min:0,max:-1},average:{min:0,max:-1},mean:{min:0,max:-1},sum:{min:0,max:-1},variance:{min:0,max:-1},distinct:{min:0,max:-1},first:{min:1,max:1},top:{min:2,max:2},boolean:{min:1,max:1},dictionary:{min:0,max:-1},typeof:{min:1,max:1},reverse:{min:1,max:1},replace:{min:3,max:4},sort:{min:1,max:2},feature:{min:1,max:-1},haskey:{min:2,max:2},indexof:{min:2,max:2},disjoint:{min:2,max:2},intersects:{min:2,max:2},touches:{min:2,max:2},crosses:{min:2,max:2},within:{min:2,max:2},contains:{min:2,max:2},overlaps:{min:2,max:2},equals:{min:2,max:2},relate:{min:3,max:3},intersection:{min:2,max:2},union:{min:1,max:2},difference:{min:2,max:2},symmetricdifference:{min:2,max:2},clip:{min:2,max:2},cut:{min:2,max:2},area:{min:1,max:2},areageodetic:{min:1,max:2},length:{min:1,max:2},lengthgeodetic:{min:1,max:2},distancegeodetic:{min:2,max:3},distance:{min:2,max:3},densify:{min:2,max:3},densifygeodetic:{min:2,max:3},generalize:{min:2,max:4},buffer:{min:2,max:3},buffergeodetic:{min:2,max:3},offset:{min:2,max:6},rotate:{min:2,max:3},issimple:{min:1,max:1},simplify:{min:1,max:1},convexhull:{min:1,max:1},centroid:{min:1,max:1},isselfintersecting:{min:1,max:1},multiparttosinglepart:{min:1,max:1},setgeometry:{min:2,max:2},portal:{min:1,max:1},getuser:{min:0,max:2},subtypes:{min:1,max:1},subtypecode:{min:1,max:1},subtypename:{min:1,max:1},domain:{min:2,max:3},convertdirection:{min:3,max:3},sqltimestamp:{min:1,max:3},schema:{min:1,max:1}},S={functionDefinitions:new Map,constantDefinitions:new Map},V={functionDefinitions:new Map,constantDefinitions:new Map};for(const x of["pi","infinity"])V.constantDefinitions.set(x,{type:"constant"}),S.constantDefinitions.set(x,{type:"constant"});V.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"newline",type:"constant"}]}),S.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"newline",type:"constant"}]});for(const x in X){const f=X[x];V.functionDefinitions.set(x,{overloads:[{type:"function",parametersInfo:{min:f.min,max:f.max}}]}),S.functionDefinitions.set(x,{overloads:[{type:"function",parametersInfo:{min:f.min,max:f.max}}]})}const w=["featureset","featuresetbyid","featuresetbyname","featuresetbyassociation","featuresetbyrelationshipname","featuresetbyurl","getfeatureset","getuser","attachments","featuresetbyportalitem"],D=["disjoint","intersects","touches","crosses","within","contains","overlaps","equals","relate","intersection","union","difference","symmetricdifference","clip","cut","area","areageodetic","length","length3d","lengthgeodetic","distance","distancegeodetic","densify","densifygeodetic","generalize","buffer","buffergeodetic","offset","rotate","issimple","convexhull","simplify","multiparttosinglepart"];function Y(x){return"string"==typeof x||x instanceof String}function ee(x,f){const F="sync"===f?S:V;F.functionDefinitions.has(x.name.toLowerCase())?F.functionDefinitions.get(x.name.toLowerCase())?.overloads.push({type:"function",parametersInfo:{min:x.min,max:x.max}}):F.functionDefinitions.set(x.name.toLowerCase(),{overloads:[{type:"function",parametersInfo:{min:x.min,max:x.max}}]})}function O(x,f){if(x)for(const F of x)U(F,f)}function U(x,f){if(x&&!1!==f(x))switch(x.type){case"ImportDeclaration":O(x.specifiers,f),U(x.source,f);break;case"ExportNamedDeclaration":U(x.declaration,f);break;case"ArrayExpression":O(x.elements,f);break;case"AssignmentExpression":case"BinaryExpression":case"LogicalExpression":U(x.left,f),U(x.right,f);break;case"BlockStatement":case"Program":O(x.body,f);break;case"BreakStatement":case"ContinueStatement":case"EmptyStatement":case"Identifier":case"Literal":break;case"CallExpression":U(x.callee,f),O(x.arguments,f);break;case"ExpressionStatement":U(x.expression,f);break;case"ForInStatement":U(x.left,f),U(x.right,f),U(x.body,f);break;case"ForStatement":U(x.init,f),U(x.test,f),U(x.update,f),U(x.body,f);break;case"WhileStatement":U(x.test,f),U(x.body,f);break;case"FunctionDeclaration":U(x.id,f),O(x.params,f),U(x.body,f);break;case"IfStatement":U(x.test,f),U(x.consequent,f),U(x.alternate,f);break;case"MemberExpression":U(x.object,f),U(x.property,f);break;case"ObjectExpression":O(x.properties,f);break;case"Property":U(x.key,f),U(x.value,f);break;case"ReturnStatement":case"UnaryExpression":case"UpdateExpression":U(x.argument,f);break;case"VariableDeclaration":O(x.declarations,f);break;case"VariableDeclarator":U(x.id,f),U(x.init,f);break;case"TemplateLiteral":O(x.expressions,f),O(x.quasis,f)}}function N(x,f){let F=!1;const y=f.toLowerCase();return U(x,C=>!F&&("Identifier"===C.type&&C.name&&C.name.toLowerCase()===y&&(F=!0),!0)),F}function K(x){const f=[];return U(x,F=>("ImportDeclaration"===F.type&&F.source&&F.source.value&&f.push({libname:F.specifiers[0].local.name.toLowerCase(),source:F.source.value}),!0)),f}function T(x,f){let F=!1;const y=f.toLowerCase();return U(x,C=>!(F||"CallExpression"===C.type&&"Identifier"===C.callee.type&&C.callee.name&&C.callee.name.toLowerCase()===y&&(F=!0,1))),F}function Z(x){const f=[];return U(x,F=>"MemberExpression"!==F.type||"Identifier"!==F.object.type||(!1===F.computed&&F.object&&F.object.name&&F.property&&"Identifier"===F.property.type&&F.property.name?f.push(F.object.name.toLowerCase()+"."+F.property.name.toLowerCase()):F.object&&F.object.name&&F.property&&"Literal"===F.property.type&&"string"==typeof F.property.value&&f.push(F.object.name.toLowerCase()+"."+F.property.value?.toString().toLowerCase()),!1)),f}function te(x){const f=[];return U(x,F=>{if("CallExpression"===F.type){if("Identifier"===F.callee.type&&"expects"===F.callee.name.toLowerCase()){let y="";for(let C=0;C<(F.arguments||[]).length;C++)0===C?"Identifier"===F.arguments[C].type&&(y=F.arguments[C].name.toLowerCase()):y&&"Literal"===F.arguments[C].type&&Y(F.arguments[C].value)&&f.push(y+"."+F.arguments[C].value.toLowerCase());return!1}if("Identifier"===F.callee.type&&["domainname","domaincode","domain","haskey"].includes(F.callee.name.toLowerCase())&&F.arguments.length>=2){let y="";return"Identifier"===F.arguments[0].type&&(y=F.arguments[0].name.toLowerCase()),y&&"Literal"===F.arguments[1].type&&Y(F.arguments[1].value)&&f.push(y+"."+F.arguments[1].value.toLowerCase()),!1}}return"MemberExpression"!==F.type||"Identifier"!==F.object.type||(!1===F.computed&&F.object&&F.object.name&&F.property&&"Identifier"===F.property.type&&F.property.name?f.push(F.object.name.toLowerCase()+"."+F.property.name.toLowerCase()):F.object&&F.object.name&&F.property&&"Literal"===F.property.type&&"string"==typeof F.property.value&&f.push(F.object.name.toLowerCase()+"."+F.property.value?.toString().toLowerCase()),!1)}),f}function L(x){const f=[];return U(x,F=>("CallExpression"===F.type&&"Identifier"===F.callee.type&&f.push(F.callee.name.toLowerCase()),!0)),f}function b(x,f=[]){let F=null;if(void 0===x.usesFeatureSet){null===F&&(F=L(x)),x.usesFeatureSet=!1;for(let y=0;y<F.length;y++)w.includes(F[y])&&(x.usesFeatureSet=!0,x.isAsync=!0);if(!1===x.usesFeatureSet&&f&&f.length>0)for(const y of f)if(N(x,y)){x.usesFeatureSet=!0,x.isAsync=!0;break}}if(void 0===x.usesModules&&(x.usesModules=!1,K(x).length>0&&(x.usesModules=!0)),void 0===x.usesGeometry){x.usesGeometry=!1,null===F&&(F=L(x));for(let y=0;y<F.length;y++)D.includes(F[y])&&(x.usesGeometry=!0)}}},67525:(Ie,pe,j)=>{j.d(pe,{A:()=>ee});var X=j(15861),S=j(25919),V=j(98362),w=j(47562),D=j(10699);const ee=Object.freeze(Object.defineProperty({__proto__:null,registerFunctions:function Y(O){function U(b,M,x){if(b instanceof V.Z)return b.toArray();if((0,w.m)(b))return b;throw new S.aV(M,S.rH.InvalidParameter,x)}function N(b,M){const x=b.length,f=Math.floor(x/2);return 0===x?[]:1===x?[b[0]]:function K(b,M,x){const f=[];for(;b.length>0||M.length>0;)if(b.length>0&&M.length>0){let F=x(b[0],M[0]);isNaN(F)&&(F=0),F<=0?(f.push(b[0]),b=b.slice(1)):(f.push(M[0]),M=M.slice(1))}else b.length>0?(f.push(b[0]),b=b.slice(1)):M.length>0&&(f.push(M[0]),M=M.slice(1));return f}(N(b.slice(0,f),M),N(b.slice(f,x),M),M)}function T(b,M){return Z.apply(this,arguments)}function Z(){return(Z=(0,X.Z)(function*(b,M){const x=b.length,f=Math.floor(x/2);if(0===x)return[];if(1===x)return[b[0]];const F=[yield T(b.slice(0,f),M),yield T(b.slice(f,x),M)];return te(F[0],F[1],M,[])})).apply(this,arguments)}function te(b,M,x,f){return k.apply(this,arguments)}function k(){return(k=(0,X.Z)(function*(b,M,x,f){const F=f;if(!(b.length>0||M.length>0))return f;if(b.length>0&&M.length>0){let y=yield x(b[0],M[0]);return isNaN(y)&&(y=1),y<=0?(F.push(b[0]),b=b.slice(1)):(F.push(M[0]),M=M.slice(1)),te(b,M,x,f)}return b.length>0?(F.push(b[0]),te(b=b.slice(1),M,x,f)):M.length>0?(F.push(M[0]),te(b,M=M.slice(1),x,f)):void 0})).apply(this,arguments)}function L(b,M,x,f){(0,w.y)(x,1,2,b,M);let F=x[0];if((0,w.x)(F)&&(F=F.toArray()),!1===(0,w.m)(F))throw new S.aV(b,S.rH.InvalidParameter,M);if(x.length>1){if(!1===(0,w.i)(x[1]))throw new S.aV(b,S.rH.InvalidParameter,M);let h=F;const B=x[1].createFunction(b);return f?T(h,B):(h=N(h,($,G)=>B($,G)),h)}let y=F;if(0===y.length)return[];const C={};for(let h=0;h<y.length;h++){const B=(0,w.B)(y[h]);""!==B&&(C[B]=!0)}if(!0===C.Array||!0===C.Dictionary||!0===C.Feature||!0===C.Point||!0===C.Polygon||!0===C.Polyline||!0===C.Multipoint||!0===C.Extent||!0===C.Function)return y.slice(0);let z=0,H="";for(const h in C)z++,H=h;return y=z>1||"String"===H?N(y,(h,B)=>{if(null==h||h===w.v)return null==B||B===w.v?0:1;if(null==B||B===w.v)return-1;const $=(0,w.j)(h),G=(0,w.j)(B);return $<G?-1:$===G?0:1}):"Number"===H?N(y,(h,B)=>h-B):"Boolean"===H?N(y,(h,B)=>h===B?0:B?-1:1):"Date"===H?N(y,(h,B)=>B-h):y.slice(0),y}O.functions.array=function(b,M){return O.standardFunction(b,M,(x,f,F)=>{(0,w.y)(F,1,2,b,M);const y=(0,w.g)(F[0]);if(isNaN(y)||!1===(0,w.z)(y))throw new S.aV(b,S.rH.InvalidParameter,M);const C=(0,w.A)(F[1],null),z=new Array(y);return z.fill(C),z})},O.functions.front=function(b,M){return O.standardFunction(b,M,(x,f,F)=>{if((0,w.y)(F,1,1,b,M),(0,w.x)(F[0])){if(F[0].length()<=0)throw new S.aV(b,S.rH.OutOfBounds,M);return F[0].get(0)}if((0,w.m)(F[0])){if(F[0].length<=0)throw new S.aV(b,S.rH.OutOfBounds,M);return F[0][0]}throw new S.aV(b,S.rH.InvalidParameter,M)})},O.functions.back=function(b,M){return O.standardFunction(b,M,(x,f,F)=>{if((0,w.y)(F,1,1,b,M),(0,w.x)(F[0])){if(F[0].length()<=0)throw new S.aV(b,S.rH.OutOfBounds,M);return F[0].get(F[0].length()-1)}if((0,w.m)(F[0])){if(F[0].length<=0)throw new S.aV(b,S.rH.OutOfBounds,M);return F[0][F[0].length-1]}throw new S.aV(b,S.rH.InvalidParameter,M)})},O.functions.push=function(b,M){return O.standardFunction(b,M,(x,f,F)=>{if((0,w.y)(F,1,2,b,M),(0,w.m)(F[0]))return F[0][F[0].length]=F[1],F[0].length;throw new S.aV(b,S.rH.InvalidParameter,M)})},O.functions.pop=function(b,M){return O.standardFunction(b,M,(x,f,F)=>{if((0,w.y)(F,1,1,b,M),(0,w.m)(F[0])){if(F[0].length<=0)throw new S.aV(b,S.rH.OutOfBounds,M);const y=F[0][F[0].length-1];return F[0].length=F[0].length-1,y}throw new S.aV(b,S.rH.InvalidParameter,M)})},O.functions.erase=function(b,M){return O.standardFunction(b,M,(x,f,F)=>{if((0,w.y)(F,2,2,b,M),(0,w.m)(F[0])){let y=(0,w.g)(F[1]);if(isNaN(y)||!1===(0,w.z)(y))throw new S.aV(b,S.rH.InvalidParameter,M);const C=F[0];if(C.length<=0)throw new S.aV(b,S.rH.OutOfBounds,M);if(y<0&&(y=C.length+y),y<0)throw new S.aV(b,S.rH.OutOfBounds,M);if(y>=C.length)throw new S.aV(b,S.rH.OutOfBounds,M);return C.splice(y,1),w.v}throw new S.aV(b,S.rH.InvalidParameter,M)})},O.functions.insert=function(b,M){return O.standardFunction(b,M,(x,f,F)=>{if((0,w.y)(F,3,3,b,M),(0,w.m)(F[0])){const y=(0,w.g)(F[1]);if(isNaN(y)||!1===(0,w.z)(y))throw new S.aV(b,S.rH.InvalidParameter,M);const C=F[2],z=F[0];if(y>z.length)throw new S.aV(b,S.rH.OutOfBounds,M);if(y<0&&y<-1*z.length)throw new S.aV(b,S.rH.OutOfBounds,M);return y===z.length?(z[y]=C,w.v):(z.splice(y,0,C),w.v)}throw new S.aV(b,S.rH.InvalidParameter,M)})},O.functions.resize=function(b,M){return O.standardFunction(b,M,(x,f,F)=>{if((0,w.y)(F,2,3,b,M),(0,w.m)(F[0])){const y=(0,w.g)(F[1]);if(isNaN(y)||!1===(0,w.z)(y))throw new S.aV(b,S.rH.InvalidParameter,M);if(y<0)throw new S.aV(b,S.rH.InvalidParameter,M);const C=(0,w.A)(F[2],null),z=F[0];if(z.length>=y)return z.length=y,w.v;const H=z.length;z.length=y;for(let h=H;h<z.length;h++)z[h]=C;return w.v}throw new S.aV(b,S.rH.InvalidParameter,M)})},O.functions.includes=function(b,M){return O.standardFunction(b,M,(x,f,F)=>{if((0,w.y)(F,2,2,b,M),(0,w.m)(F[0])){const y=F[1];return F[0].findIndex(C=>(0,w.s)(C,y))>-1}if((0,w.x)(F[0])){const y=F[1];return F[0].toArray().findIndex(C=>(0,w.s)(C,y))>-1}throw new S.aV(b,S.rH.InvalidParameter,M)})},O.functions.slice=function(b,M){return O.standardFunction(b,M,(x,f,F)=>{if((0,w.y)(F,1,3,b,M),(0,w.m)(F[0])){const y=(0,w.g)((0,w.A)(F[1],0)),C=(0,w.g)((0,w.A)(F[2],F[0].length));if(isNaN(y)||!1===(0,w.z)(y))throw new S.aV(b,S.rH.InvalidParameter,M);if(isNaN(C)||!1===(0,w.z)(C))throw new S.aV(b,S.rH.InvalidParameter,M);return F[0].slice(y,C)}if((0,w.x)(F[0])){const y=F[0],C=(0,w.g)((0,w.A)(F[1],0)),z=(0,w.g)((0,w.A)(F[2],y.length()));if(isNaN(C)||!1===(0,w.z)(C))throw new S.aV(b,S.rH.InvalidParameter,M);if(isNaN(z)||!1===(0,w.z)(z))throw new S.aV(b,S.rH.InvalidParameter,M);return y.toArray().slice(C,z)}throw new S.aV(b,S.rH.InvalidParameter,M)})},O.functions.splice=function(b,M){return O.standardFunction(b,M,(x,f,F)=>{const y=[];for(let C=0;C<F.length;C++)(0,w.m)(F[C])?y.push(...F[C]):(0,w.x)(F[C])?y.push(...F[C].toArray()):y.push(F[C]);return y})},O.functions.top=function(b,M){return O.standardFunction(b,M,(x,f,F)=>{if((0,w.y)(F,2,2,b,M),(0,w.m)(F[0]))return(0,w.g)(F[1])>=F[0].length?F[0].slice(0):F[0].slice(0,(0,w.g)(F[1]));if((0,w.x)(F[0]))return(0,w.g)(F[1])>=F[0].length()?F[0].slice(0):F[0].slice(0,(0,w.g)(F[1]));throw new S.aV(b,S.rH.InvalidParameter,M)})},O.functions.first=function(b,M){return O.standardFunction(b,M,(x,f,F)=>((0,w.y)(F,1,1,b,M),(0,w.m)(F[0])?0===F[0].length?null:F[0][0]:(0,w.x)(F[0])?0===F[0].length()?null:F[0].get(0):null))},"sync"===O.mode&&(O.functions.sort=function(b,M){return O.standardFunction(b,M,(x,f,F)=>L(b,M,F,!1))},O.functions.any=function(b,M){return O.standardFunction(b,M,(x,f,F)=>{(0,w.y)(F,2,2,b,M);const y=F[1].createFunction(b),C=U(F[0],b,M);for(const z of C){const H=y(z);if((0,w.a)(H)&&!0===H)return!0}return!1})},O.functions.all=function(b,M){return O.standardFunction(b,M,(x,f,F)=>{(0,w.y)(F,2,2,b,M);const y=F[1].createFunction(b),C=U(F[0],b,M);for(const z of C)if(!0!==y(z))return!1;return!0})},O.functions.none=function(b,M){return O.standardFunction(b,M,(x,f,F)=>{(0,w.y)(F,2,2,b,M);const y=F[1].createFunction(b),C=U(F[0],b,M);for(const z of C)if(!0===y(z))return!1;return!0})},O.functions.reduce=function(b,M){return O.standardFunction(b,M,(x,f,F)=>{(0,w.y)(F,2,3,b,M);const y=F[1].createFunction(b),C=U(F[0],b,M);return 2===F.length?0===C.length?null:C.reduce((z,H)=>{const h=y(z,H);return void 0!==h&&h!==w.v?h:null}):C.reduce((z,H)=>{const h=y(z,H);return void 0!==h&&h!==w.v?h:null},F[2])})},O.functions.map=function(b,M){return O.standardFunction(b,M,(x,f,F)=>{(0,w.y)(F,2,2,b,M);const y=F[1].createFunction(b),C=U(F[0],b,M),z=[];for(const H of C){const h=y(H);z.push(void 0!==h&&h!==w.v?h:null)}return z})},O.functions.filter=function(b,M){return O.standardFunction(b,M,(x,f,F)=>{(0,w.y)(F,2,2,b,M);const y=F[1].createFunction(b),C=U(F[0],b,M),z=[];for(const H of C)!0===y(H)&&z.push(H);return z})}),"async"===O.mode&&(O.functions.sort=function(b,M){return O.standardFunctionAsync(b,M,(x,f,F)=>L(b,M,F,!0))},O.functions.any=function(b,M){return O.standardFunctionAsync(b,M,function(){var x=(0,X.Z)(function*(f,F,y){(0,w.y)(y,2,2,b,M);const C=y[1].createFunction(b),z=U(y[0],b,M);for(const H of z){const h=yield C(H);let B=null;if(B=(0,D.y8)(B)?yield h:h,(0,w.a)(B)&&!0===B)return!0}return!1});return function(f,F,y){return x.apply(this,arguments)}}())},O.functions.all=function(b,M){return O.standardFunctionAsync(b,M,function(){var x=(0,X.Z)(function*(f,F,y){(0,w.y)(y,2,2,b,M);const C=y[1].createFunction(b),z=U(y[0],b,M);for(const H of z){const h=yield C(H);let B=null;if(B=(0,D.y8)(B)?yield h:h,!0!==B)return!1}return!0});return function(f,F,y){return x.apply(this,arguments)}}())},O.functions.none=function(b,M){return O.standardFunctionAsync(b,M,function(){var x=(0,X.Z)(function*(f,F,y){(0,w.y)(y,2,2,b,M);const C=y[1].createFunction(b),z=U(y[0],b,M);for(const H of z){const h=yield C(H);let B=null;if(B=(0,D.y8)(B)?yield h:h,!0===B)return!1}return!0});return function(f,F,y){return x.apply(this,arguments)}}())},O.functions.filter=function(b,M){return O.standardFunctionAsync(b,M,function(){var x=(0,X.Z)(function*(f,F,y){(0,w.y)(y,2,2,b,M);const C=y[1].createFunction(b),z=U(y[0],b,M),H=[];for(const h of z){const B=yield C(h);let $=null;$=(0,D.y8)($)?yield B:B,!0===$&&H.push(h)}return H});return function(f,F,y){return x.apply(this,arguments)}}())},O.functions.reduce=function(b,M){return O.standardFunctionAsync(b,M,(x,f,F)=>{(0,w.y)(F,2,3,b,M);const y=F[1].createFunction(b),C=U(F[0],b,M);let z=null;if(F.length>2){const H=(0,w.A)(F[2],null);z=C.reduce(function(){var h=(0,X.Z)(function*(B,$){let G=yield B;return void 0!==G&&G!==w.v||(G=null),y(G,$)});return function(B,$){return h.apply(this,arguments)}}(),Promise.resolve(H))}else{if(0===C.length)return null;z=C.reduce(function(){var H=(0,X.Z)(function*(h,B,$){if($<=1)return y(h,B);let G=yield h;return void 0!==G&&G!==w.v||(G=null),y(G,B)});return function(h,B,$){return H.apply(this,arguments)}}())}return z.then(H=>void 0!==H&&H!==w.v?H:null)})},O.functions.map=function(b,M){return O.standardFunctionAsync(b,M,function(){var x=(0,X.Z)(function*(f,F,y){(0,w.y)(y,2,2,b,M);const C=y[1].createFunction(b),z=U(y[0],b,M),H=[];for(const h of z){const B=yield C(h);let $=null;$=(0,D.y8)($)?yield B:B,H.push(void 0!==$&&$!==w.v?$:null)}return H});return function(f,F,y){return x.apply(this,arguments)}}())})}},Symbol.toStringTag,{value:"Module"}))},47562:(Ie,pe,j)=>{j.d(pe,{A:()=>ce,B:()=>Te,C:()=>v,D:()=>st,E:()=>Pe,F:()=>Tt,G:()=>Dt,H:()=>wt,I:()=>C,J:()=>et,K:()=>Ft,L:()=>$,M:()=>ht,N:()=>R,O:()=>_t,P:()=>se,Q:()=>E,R:()=>z,S:()=>_,T:()=>$e,U:()=>Ye,V:()=>ke,W:()=>ie,X:()=>gt,Y:()=>Ve,Z:()=>pt,_:()=>ut,a:()=>de,b:()=>ne,c:()=>ge,d:()=>tt,e:()=>yt,f:()=>oe,g:()=>ve,h:()=>It,i:()=>G,j:()=>Be,k:()=>be,l:()=>mt,m:()=>we,n:()=>Q,o:()=>h,p:()=>B,q:()=>ze,r:()=>Ct,s:()=>Me,t:()=>Ue,u:()=>ct,v:()=>H,w:()=>_e,x:()=>Le,y:()=>At,z:()=>me});var X=j(15861),S=j(7652),V=j(98362),w=j(5371),D=j(26685),Y=j(91365),ee=j(2004),O=j(21674),U=j(72854),N=j(72642),K=j(37118),T=j(55214),Z=j(21837),te=j(62208),k=j(75327),L=j(25748),b=j(56683),M=j(77132),x=j(78778),f=j(25919);class F{constructor(g){this.value=g}}class y{constructor(g){this.value=g}}const C=y,z=F,H={type:"VOID"},h={type:"BREAK"},B={type:"CONTINUE"};function $(p,g,I){return""===g||null==g||g===I||g===I?p:p=p.split(g).join(I)}function G(p){return p instanceof S.Rm}function re(p){return p instanceof x.P}function oe(p){return!!(ge(p)||ne(p)||be(p)||de(p)||null===p||p===H||"number"==typeof p)}function ce(p,g){return void 0===p?g:p}function Te(p){return null==p?"":we(p)||Le(p)?"Array":be(p)?"Date":ge(p)?"String":de(p)?"Boolean":ne(p)?"Number":"esri.arcade.Attachment"===p?.declaredClass?"Attachment":"esri.arcade.Portal"===p?.declaredClass?"Portal":"esri.arcade.Dictionary"===p?.declaredClass?"Dictionary":p instanceof x.P?"Module":_e(p)?"Feature":p instanceof N.Z?"Point":p instanceof K.Z?"Polygon":p instanceof T.Z?"Polyline":p instanceof U.Z?"Multipoint":p instanceof ee.Z?"Extent":G(p)?"Function":$e(p)?"FeatureSet":Ye(p)?"FeatureSetCollection":p===H?"":"number"==typeof p&&isNaN(p)?"Number":"Unrecognised Type"}function ge(p){return"string"==typeof p||p instanceof String}function de(p){return"boolean"==typeof p}function ne(p){return"number"==typeof p}function me(p){return"number"==typeof p&&isFinite(p)&&Math.floor(p)===p}function we(p){return p instanceof Array}function _e(p){return"esri.arcade.Feature"===p?.arcadeDeclaredClass}function $e(p){return"esri.arcade.featureset.support.FeatureSet"===p?.declaredRootClass}function Ye(p){return"esri.arcade.featureSetCollection"===p?.declaredRootClass}function Le(p){return p instanceof V.Z}function be(p){return p instanceof Y.iG}function lt(p){return null!=p&&"object"==typeof p}function Ne(p){return p instanceof Date}function At(p,g,I,W,q){if(p.length<g||p.length>I)throw new f.aV(W,f.rH.WrongNumberOfParameters,q)}function Pe(p){return p<0?-Math.round(-p):Math.round(p)}function ht(){let p=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,g=>{const I=(p+16*Math.random())%16|0;return p=Math.floor(p/16),("x"===g?I:3&I|8).toString(16)})}function Re(p,g){return isNaN(p)||null==g||""===g?p.toString():(g=$(g,"\u2030",""),g=$(g,"\xa4",""),(0,k.WU)(p,{pattern:g}))}function Qe(p,g){return null==g||""===g?p.toISOString(!0):p.toFormat(st(g),{locale:(0,b.Kd)(),numberingSystem:"latn"})}function st(p){p=p.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$&]");let g="";const I=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const W of p.match(I)||[])switch(W){case"D":g+="d";break;case"DD":g+="dd";break;case"DDD":g+="o";break;case"d":g+="c";break;case"ddd":g+="ccc";break;case"dddd":g+="cccc";break;case"M":g+="L";break;case"MM":g+="LL";break;case"MMM":g+="LLL";break;case"MMMM":g+="LLLL";break;case"YY":g+="yy";break;case"Y":case"YYYY":g+="yyyy";break;case"Q":g+="q";break;case"Z":g+="ZZ";break;case"ZZ":g+="ZZZ";break;case"S":g+="'S'";break;case"SS":g+="'SS'";break;case"SSS":g+="u";break;case"A":case"a":g+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":g+=W;break;default:W.length>=2&&"["===W.slice(0,1)&&"]"===W.slice(-1)?g+=`'${W.slice(1,-1)}'`:g+=`'${W}'`}return g}function Ee(p,g,I){switch(I){case">":return p>g;case"<":return p<g;case">=":return p>=g;case"<=":return p<=g}return!1}function Ct(p,g,I){if(null===p){if(null===g||g===H)return Ee(null,null,I);if(ne(g))return Ee(0,g,I);if(ge(g)||de(g))return Ee(0,ve(g),I);if(be(g))return Ee(0,g.toNumber(),I)}if(p===H){if(null===g||g===H)return Ee(null,null,I);if(ne(g))return Ee(0,g,I);if(ge(g)||de(g))return Ee(0,ve(g),I);if(be(g))return Ee(0,g.toNumber(),I)}else if(ne(p)){if(ne(g))return Ee(p,g,I);if(de(g))return Ee(p,ve(g),I);if(null===g||g===H)return Ee(p,0,I);if(ge(g))return Ee(p,ve(g),I);if(be(g))return Ee(p,g.toNumber(),I)}else if(ge(p)){if(ge(g))return Ee(Be(p),Be(g),I);if(be(g))return Ee(ve(p),g.toNumber(),I);if(ne(g))return Ee(ve(p),g,I);if(null===g||g===H)return Ee(ve(p),0,I);if(de(g))return Ee(ve(p),ve(g),I)}else if(be(p)){if(be(g))return Ee(p.toNumber(),g.toNumber(),I);if(null===g||g===H)return Ee(p.toNumber(),0,I);if(ne(g))return Ee(p.toNumber(),g,I);if(de(g)||ge(g))return Ee(p.toNumber(),ve(g),I)}else if(de(p)){if(de(g))return Ee(p,g,I);if(ne(g))return Ee(ve(p),ve(g),I);if(be(g))return Ee(ve(p),g.toNumber(),I);if(null===g||g===H)return Ee(ve(p),0,I);if(ge(g))return Ee(ve(p),ve(g),I)}return!!Me(p,g)&&("<="===I||">="===I)}function Me(p,g){if(p===g||null===p&&g===H||null===g&&p===H)return!0;if(be(p)&&be(g))return p.equals(g);if(p instanceof w.Z||p instanceof D.Z)return p.equalityTest(g);if(p instanceof N.Z&&g instanceof N.Z){const I=p.cache._arcadeCacheId;if(null!=I)return I===g.cache._arcadeCacheId}return!!(lt(p)&&lt(g)&&(p._arcadeCacheId===g._arcadeCacheId&&null!=p._arcadeCacheId||p._underlyingGraphic===g._underlyingGraphic&&null!=p._underlyingGraphic))}function Be(p,g){if(ge(p))return p;if(null===p)return"";if(ne(p))return Re(p,g);if(de(p))return p.toString();if(be(p))return Qe(p,g);if(p instanceof O.Z)return JSON.stringify(p.toJSON());if(we(p)){const I=[];for(let W=0;W<p.length;W++)I[W]=rt(p[W]);return"["+I.join(",")+"]"}if(p instanceof V.Z){const I=[];for(let W=0;W<p.length();W++)I[W]=rt(p.get(W));return"["+I.join(",")+"]"}return null!==p&&"object"==typeof p&&void 0!==p.castToText?p.castToText():G(p)?"object, Function":p===H?"":re(p)?"object, Module":""}function ke(p){const g=[];if(!we(p))return null;if(p instanceof V.Z){for(let I=0;I<p.length();I++)g[I]=ve(p.get(I));return g}for(let I=0;I<p.length;I++)g[I]=ve(p[I]);return g}function Ue(p,g,I=!1){if(ge(p))return p;if(null===p)return"";if(ne(p))return Re(p,g);if(de(p))return p.toString();if(be(p))return Qe(p,g);if(p instanceof O.Z)return p instanceof ee.Z?'{"xmin":'+p.xmin.toString()+',"ymin":'+p.ymin.toString()+","+(p.hasZ?'"zmin":'+p.zmin.toString()+",":"")+(p.hasM?'"mmin":'+p.mmin.toString()+",":"")+'"xmax":'+p.xmax.toString()+',"ymax":'+p.ymax.toString()+","+(p.hasZ?'"zmax":'+p.zmax.toString()+",":"")+(p.hasM?'"mmax":'+p.mmax.toString()+",":"")+'"spatialReference":'+qe(p.spatialReference)+"}":qe(p.toJSON(),(W,q)=>W.key===q.key?0:"spatialReference"===W.key?1:"spatialReference"===q.key||W.key<q.key?-1:W.key>q.key?1:0);if(we(p)){const W=[];for(let q=0;q<p.length;q++)W[q]=rt(p[q],I);return"["+W.join(",")+"]"}if(p instanceof V.Z){const W=[];for(let q=0;q<p.length();q++)W[q]=rt(p.get(q),I);return"["+W.join(",")+"]"}return null!==p&&"object"==typeof p&&void 0!==p.castToText?p.castToText(I):G(p)?"object, Function":p===H?"":re(p)?"object, Module":""}function rt(p,g=!1){if(null===p)return"null";if(de(p)||ne(p)||ge(p))return JSON.stringify(p);if(p instanceof O.Z||p instanceof V.Z||p instanceof Array)return Ue(p,null,g);if(be(p))return JSON.stringify(g?p.getTime():Qe(p,""));if(null!==p&&"object"==typeof p){if(void 0!==p.castToText)return p.castToText(g)}else if(p===H)return"null";return"null"}function ve(p,g){return ne(p)?p:null===p||""===p?0:be(p)?NaN:de(p)?p?1:0:we(p)||""===p||void 0===p?NaN:void 0!==g&&ge(p)?(g=$(g,"\u2030",""),g=$(g,"\xa4",""),(0,k.Qc)(p,{pattern:g})):p===H?0:Number(p)}function mt(p,g){if(be(p))return p;if(ge(p)){const I=function Et(p,g){const I=/ (\d\d)/,W=(0,Y.Qn)(g);let q=Z.ou.fromISO(p,{zone:W});return q.isValid||I.test(p)&&(p=p.replace(I,"T$1"),q=Z.ou.fromISO(p,{zone:g}),q.isValid)?q:null}(p,g);if(I)return Y.iG.dateTimeToArcadeDate(I)}return null}function It(p){return de(p)?p:ge(p)?"true"===(p=p.toLowerCase()):!!ne(p)&&0!==p&&!isNaN(p)}function ze(p,g){return(0,te.Wi)(p)?null:(null!=p.spatialReference||(p.spatialReference=g),p)}function Tt(p){if(null===p)return null;if(p instanceof N.Z)return"NaN"===p.x||null===p.x||isNaN(p.x)?null:p;if(p instanceof K.Z){if(0===p.rings.length)return null;for(const g of p.rings)if(g.length>0)return p;return null}if(p instanceof T.Z){if(0===p.paths.length)return null;for(const g of p.paths)if(g.length>0)return p;return null}return p instanceof U.Z?0===p.points.length?null:p:p instanceof ee.Z?"NaN"===p.xmin||null===p.xmin||isNaN(p.xmin)?null:p:null}function pt(p,g){if(!p||!p.domain)return g;let I=null;if("string"===p.field.type||"esriFieldTypeString"===p.field.type)g=Be(g);else{if(null==g)return null;if(""===g)return g;g=ve(g)}for(let W=0;W<p.domain.codedValues.length;W++){const q=p.domain.codedValues[W];q.code===g&&(I=q)}return null===I?g:I.name}function ut(p,g){if(!p||!p.domain)return g;let I=null;g=Be(g);for(let W=0;W<p.domain.codedValues.length;W++){const q=p.domain.codedValues[W];q.name===g&&(I=q)}return null===I?g:I.code}function Ve(p,g,I=null,W=null){if(!g||!g.fields)return null;let q,he,ye=null;for(let Ce=0;Ce<g.fields.length;Ce++){const Se=g.fields[Ce];Se.name.toLowerCase()===p.toString().toLowerCase()&&(ye=Se)}if(null===ye)throw new f.aV(null,f.rH.FieldNotFound,null,{key:p});return null===W&&I&&g.typeIdField&&(W=I.hasField(g.typeIdField)?I.field(g.typeIdField):null),null!=W&&g.types.some(Ce=>Ce.id===W&&(q=Ce.domains&&Ce.domains[ye.name],q&&"inherited"===q.type&&(q=We(ye.name,g),he=!0),!0)),he||q||(q=We(p,g)),{field:ye,domain:q}}function We(p,g){let I;return g.fields.some(W=>(W.name.toLowerCase()===p.toLowerCase()&&(I=W.domain),!!I)),I}function qe(p,g){g||(g={}),"function"==typeof g&&(g={cmp:g});const I="boolean"==typeof g.cycles&&g.cycles,W=g.cmp&&(q=g.cmp,function(ye){return function(Ce,Se){return q({key:Ce,value:ye[Ce]},{key:Se,value:ye[Se]})}});var q;const he=[];return function ye(Ce){if(Ce&&Ce.toJSON&&"function"==typeof Ce.toJSON&&(Ce=Ce.toJSON()),void 0===Ce)return;if("number"==typeof Ce)return isFinite(Ce)?""+Ce:"null";if("object"!=typeof Ce)return JSON.stringify(Ce);let Se,Ke;if(Array.isArray(Ce)){for(Ke="[",Se=0;Se<Ce.length;Se++)Se&&(Ke+=","),Ke+=ye(Ce[Se])||"null";return Ke+"]"}if(null===Ce)return"null";if(he.includes(Ce)){if(I)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const it=he.push(Ce)-1,Mt=Object.keys(Ce).sort(W&&W(Ce));for(Ke="",Se=0;Se<Mt.length;Se++){const Bt=Mt[Se],Vt=ye(Ce[Bt]);Vt&&(Ke&&(Ke+=","),Ke+=JSON.stringify(Bt)+":"+Vt)}return he.splice(it,1),"{"+Ke+"}"}(p)}function Dt(p){if(null===p)return null;const g=[];for(const I of p)g.push(I&&I.arcadeDeclaredClass&&"esri.arcade.Feature"===I.arcadeDeclaredClass?I.geometry():I);return g}function Je(p,g){if(!(g instanceof N.Z))throw new f.aV(null,f.rH.InvalidParameter,null);p.push(g.hasZ?g.hasM?[g.x,g.y,g.z,g.m]:[g.x,g.y,g.z]:[g.x,g.y])}function et(p,g){if(we(p)||Le(p)){let I=!1,W=!1,q=[],he=g;if(we(p)){for(const ye of p)Je(q,ye);q.length>0&&(he=p[0].spatialReference,I=p[0].hasZ,W=p[0].hasM)}else if(p instanceof D.Z)q=p._elements,q.length>0&&(I=p._hasZ,W=p._hasM,he=p.get(0).spatialReference);else{if(!Le(p))throw new f.aV(null,f.rH.InvalidParameter,null);for(const ye of p.toArray())Je(q,ye);q.length>0&&(he=p.get(0).spatialReference,I=!0===p.get(0).hasZ,W=!0===p.get(0).hasM)}return 0===q.length?null:((0,L.bu)(q,W,I)||(q=q.slice(0).reverse()),new K.Z({rings:[q],spatialReference:he,hasZ:I,hasM:W}))}return p}function wt(p,g){if(we(p)||Le(p)){let I=!1,W=!1,q=[],he=g;if(we(p)){for(const ye of p)Je(q,ye);q.length>0&&(he=p[0].spatialReference,I=!0===p[0].hasZ,W=!0===p[0].hasM)}else if(p instanceof D.Z)q=p._elements,q.length>0&&(I=p._hasZ,W=p._hasM,he=p.get(0).spatialReference);else if(Le(p)){for(const ye of p.toArray())Je(q,ye);q.length>0&&(he=p.get(0).spatialReference,I=!0===p.get(0).hasZ,W=!0===p.get(0).hasM)}return 0===q.length?null:new T.Z({paths:[q],spatialReference:he,hasZ:I,hasM:W})}return p}function Ft(p,g){if(we(p)||Le(p)){let I=!1,W=!1,q=[],he=g;if(we(p)){for(const ye of p)Je(q,ye);q.length>0&&(he=p[0].spatialReference,I=!0===p[0].hasZ,W=!0===p[0].hasM)}else if(p instanceof D.Z)q=p._elements,q.length>0&&(I=p._hasZ,W=p._hasM,he=p.get(0).spatialReference);else if(Le(p)){for(const ye of p.toArray())Je(q,ye);q.length>0&&(he=p.get(0).spatialReference,I=!0===p.get(0).hasZ,W=!0===p.get(0).hasM)}return 0===q.length?null:new U.Z({points:q,spatialReference:he,hasZ:I,hasM:W})}return p}function gt(p,g=!1){const I=[];if(null===p)return I;if(!0===we(p)){for(let W=0;W<p.length;W++){const q=Be(p[W]);""===q&&!0!==g||I.push(q)}return I}if(p instanceof V.Z){for(let W=0;W<p.length();W++){const q=Be(p.get(W));""===q&&!0!==g||I.push(q)}return I}if(oe(p)){const W=Be(p);return""===W&&!0!==g||I.push(W),I}return[]}let De=0;function ie(p){return De++,De%100==0?(De=0,new Promise(g=>{setTimeout(()=>{g(p)},0)})):p}function ct(p,g,I){switch(I){case"&":return p&g;case"|":return p|g;case"^":return p^g;case"<<":return p<<g;case">>":return p>>g;case">>>":return p>>>g}}function tt(p,g=null){return null==p?null:de(p)||ne(p)||ge(p)?p:p instanceof O.Z?!0===g?.keepGeometryType?p:p.toJSON():p instanceof V.Z?p.toArray().map(I=>tt(I,g)):p instanceof Array?p.map(I=>tt(I,g)):Ne(p)?p:be(p)?p.toJSDate():null!==p&&"object"==typeof p&&void 0!==p.castAsJson?p.castAsJson(g):null}function vt(p,g,I,W,q){return dt.apply(this,arguments)}function dt(){return(dt=(0,X.Z)(function*(p,g,I,W,q){const he=yield yt(p,g,I);q[W]=he})).apply(this,arguments)}function yt(p){return ft.apply(this,arguments)}function ft(){return(ft=(0,X.Z)(function*(p,g=null,I=null){if(p instanceof V.Z&&(p=p.toArray()),null==p)return null;if(oe(p)||p instanceof O.Z||Ne(p)||be(p))return tt(p,I);if(p instanceof Array){const W=[],q=[];for(const he of p)null===he||oe(he)||he instanceof O.Z||Ne(he)||be(he)?q.push(tt(he,I)):(q.push(null),W.push(vt(he,g,I,q.length-1,q)));return W.length>0&&(yield Promise.all(W)),q}return null!==p&&"object"==typeof p&&void 0!==p.castAsJsonAsync?p.castAsJsonAsync(g,I):null})).apply(this,arguments)}function se(p,g,I){const W=p.fullSchema();return null!==W&&W.fields?Ve(g,W,p,I):null}function _t(p){const g=p.fullSchema();return null===g?null:g.fields&&g.typeIdField?{subtypeField:g.typeIdField,subtypes:g.types?g.types.map(I=>({name:I.name,code:I.id})):[]}:null}function E(p,g,I,W){const q=p.fullSchema();if(null===q||!q.fields)return null;const he=Ve(g,q,p,W);if(void 0===I)try{I=p.field(g)}catch{return null}return pt(he,I)}function _(p,g,I,W){const q=p.fullSchema();if(null===q||!q.fields)return null;if(void 0===I){try{I=p.field(g)}catch{return null}return I}return ut(Ve(g,q,p,W),I)}function v(p){return p?.timeReference?.timeZone?p?.timeReference?.timeZone:"system"}function R(p){const g=p.fullSchema();if(null===g||!g.fields)return null;const I=[];for(const W of g.fields)I.push((0,M.Sh)(W));return{objectIdField:g.objectIdField,globalIdField:g.globalIdField,geometryType:void 0===M.q2[g.geometryType]?"":M.q2[g.geometryType],fields:I,datesInUnknownTimezone:!0===g.datesInUnknownTimezone,preferredTimeReference:g.preferredTimeReference||null,editFieldsInfo:g.editFieldsInfo||null,timeInfo:g.timeInfo||null,dateFieldsTimeReference:g.dateFieldsTimeReference||null}}const Q=Object.freeze(Object.defineProperty({__proto__:null,ImplicitResult:C,ImplicitResultE:y,ReturnResult:z,ReturnResultE:F,absRound:Pe,autoCastArrayOfPointsToMultiPoint:Ft,autoCastArrayOfPointsToPolygon:et,autoCastArrayOfPointsToPolyline:wt,autoCastFeatureToGeometry:Dt,binaryOperator:ct,breakResult:h,castAsJson:tt,castAsJsonAsync:yt,continueResult:B,defaultTimeZone:v,defaultUndefined:ce,equalityTest:Me,featureDomainCodeLookup:_,featureDomainValueLookup:E,featureFullDomain:se,featureSchema:R,featureSubtypes:_t,fixNullGeometry:Tt,fixSpatialReference:ze,formatDate:Qe,formatNumber:Re,generateUUID:ht,getDomain:Ve,getDomainCode:ut,getDomainValue:pt,getType:Te,greaterThanLessThan:Ct,isArray:we,isBoolean:de,isDate:be,isFeature:_e,isFeatureSet:$e,isFeatureSetCollection:Ye,isFunctionParameter:G,isImmutableArray:Le,isInteger:me,isJsDate:Ne,isModule:re,isNumber:ne,isObject:lt,isSimpleType:oe,isString:ge,multiReplace:$,pcCheck:At,stableStringify:qe,standardiseDateFormat:st,tick:ie,toBoolean:It,toDate:mt,toNumber:ve,toNumberArray:ke,toString:Be,toStringArray:gt,toStringExplicit:Ue,voidOperation:H},Symbol.toStringTag,{value:"Module"}))},4988:(Ie,pe,j)=>{j.r(pe),j.d(pe,{Dictionary:()=>V.Z,arcade:()=>Or,arcadeFeature:()=>w.Z,convertFeatureLayerToFeatureSet:()=>ii,convertJsonToArcade:()=>si,convertMapToFeatureSetCollection:()=>ai,convertServiceUrlToWorkspace:()=>ri,createExecContext:()=>Kr,createFeature:()=>Jr,createFunction:()=>Wr,createSyntaxTree:()=>Rt,dependsOnView:()=>ei,enableFeatureSetOperations:()=>li,enableGeometryOperations:()=>oi,evalSyntaxTree:()=>Yr,executeAsyncFunction:()=>Xr,executeFunction:()=>Qr,extractFieldNames:()=>qr,getArcadeType:()=>zr,getViewInfo:()=>ni,hasGeometryFunctions:()=>mi,hasGeometryOperations:()=>Di,hasVariable:()=>ti,loadScriptDependencies:()=>ui,updateExecContext:()=>$r}),j(29132);var S=j(15861),V=j(6729),w=j(42275),D=j(47562),Y=j(19927),ee=j(67525),O=j(84228),U=j(24499),N=j(63461),K=j(53840),T=j(97536),Z=j(31975),te=j(10699),k=j(21674),L=j(65234),b=j(9288),M=j(78778),x=j(7652),f=j(25919);function C(l,u,c){try{return c(l,null,u.arguments)}catch(m){throw m}}function z(l,u){try{switch(u.type){case"EmptyStatement":return"lc.voidOperation";case"VariableDeclarator":return function Le(l,u){let c=null===u.init?null:z(l,u.init);c===D.v&&(c=null);const m=u.id.name.toLowerCase();if(_e(m),null!==l.localScope){if(void 0!==l.localScope[m])return"lscope['"+m+"']="+c+"; ";if(void 0!==l.localScope._SymbolsMap[m])return"lscope['"+l.localScope._SymbolsMap[m]+"']="+c+"; ";{const P=Be(l);return l.localScope._SymbolsMap[m]=P,l.mangleMap[m]=P,"lscope['"+P+"']="+c+"; "}}if(void 0!==l.globalScope[m])return"gscope['"+m+"']="+c+"; ";if(void 0!==l.globalScope._SymbolsMap[m])return"gscope['"+l.globalScope._SymbolsMap[m]+"']="+c+"; ";if(l.undeclaredGlobalsInFunctions.has(m)){const P=l.undeclaredGlobalsInFunctions.get(m).manglename;return l.globalScope._SymbolsMap[m]=P,l.mangleMap[m]=P,l.undeclaredGlobalsInFunctions.delete(m),"gscope[lang.setAssig('"+P+"', runtimeCtx)]="+c+"; "}const A=Be(l);return l.globalScope._SymbolsMap[m]=A,l.mangleMap[m]=A,"gscope['"+A+"']="+c+"; "}(l,u);case"VariableDeclaration":return function Ye(l,u){const c=[];for(let m=0;m<u.declarations.length;m++)c.push(z(l,u.declarations[m]));return c.join("\n")+" \n lastStatement=  lc.voidOperation; \n"}(l,u);case"BlockStatement":case"Program":return de(l,u);case"FunctionDeclaration":return function $e(l,u){const c=u.id.name.toLowerCase();_e(c);let m="",A=!1;void 0!==l.globalScope[c]?m=c:void 0!==l.globalScope._SymbolsMap[c]?m=l.globalScope._SymbolsMap[c]:l.undeclaredGlobalsInFunctions.has(c)?(m=l.undeclaredGlobalsInFunctions.get(c).manglename,l.globalScope._SymbolsMap[c]=m,l.mangleMap[c]=m,l.undeclaredGlobalsInFunctions.delete(c),A=!0):(m=Be(l),l.globalScope._SymbolsMap[c]=m,l.mangleMap[c]=m);const P={isAsync:l.isAsync,console:l.console,exports:l.exports,undeclaredGlobalsInFunctions:l.undeclaredGlobalsInFunctions,customfunctions:l.customfunctions,moduleFactory:l.moduleFactory,moduleFactoryMap:l.moduleFactoryMap,libraryResolver:l.libraryResolver,lrucache:l.lrucache,interceptor:l.interceptor,services:l.services,symbols:l.symbols,mangleMap:l.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:l.depthCounter,globalScope:l.globalScope};let J="new lang.UserDefinedCompiledFunction( lang.functionDepthchecker(function() { var lastStatement = lc.voidOperation; \n   var lscope = runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";for(let ae=0;ae<u.params.length;ae++){const ue=u.params[ae].name.toLowerCase();_e(ue);const le=Be(l);P.localScope._SymbolsMap[ue]=le,P.mangleMap[ue]=le,J+="lscope['"+le+"']=arguments["+ae.toString()+"];\n"}return!0===l.isAsync?(J+="return lang.__awaiter(this, void 0, void 0, function* () {\n",J+=de(P,u.body)+"\n return lastStatement; ",J+="});  }",J+=", runtimeCtx),"+u.params.length+")",J+="\n lastStatement = lc.voidOperation; \n"):(J+=de(P,u.body)+"\n return lastStatement; }, runtimeCtx),"+u.params.length+")",J+="\n lastStatement = lc.voidOperation; \n"),A?"gscope[lang.setAssig('"+m+"', runtimeCtx)]="+J:"gscope['"+m+"']="+J}(l,u);case"ImportDeclaration":return function me(l,u){const c=u.specifiers[0].local.name.toLowerCase();_e(c);const m=l.libraryResolver?.loadLibrary(c),A=Be(l);void 0===l.moduleFactory[m.uri]&&(l.moduleFactory[m.uri]=function wt(l,u,c=!1){const m={isAsync:c,moduleFactory:u.moduleFactory,moduleFactoryMap:{},libraryResolver:new b.s(null,l.loadedModules),globalScope:mt(u.vars,c?Ue:Me,u.customfunctions),customfunctions:u.customfunctions,localScope:null,mangleMap:{},undeclaredGlobalsInFunctions:new Map,depthCounter:{depth:1},exports:{},console:We,lrucache:u.lrucache,timeReference:u.timeReference??null,interceptor:u.interceptor,services:u.services,symbols:{symbolCounter:0}};let A=z(m,l);""===A&&(A="lc.voidOperation; ");let P="";P=c?"var runtimeCtx=this.prepare(context, true);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement=lc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+A+"\n return lastStatement; }); } \n yield mainBody(); \n return this.prepareModule(runtimeCtx); }); ":"var runtimeCtx=this.prepare(context, false);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \n function mainBody() {\n var lastStatement=lc.voidOperation;\n "+A+"\n return lastStatement; } \n mainBody(); \n return this.prepareModule(runtimeCtx); ";const J=m.moduleFactory,ae=m.moduleFactoryMap,ue=m.exports,le={};for(const Fe in ue)le[Fe]=void 0!==m.mangleMap[Fe]?m.mangleMap[Fe]:Fe;const Oe={lc:D.n,lang:Ve,mangles:m.mangleMap,prepareModule:Fe=>new et(Fe),prepare(Fe,xe){let He=Fe.spatialReference;null==He&&(He=new L.Z({wkid:102100}));const Xe=Et(Fe.vars,Fe.customfunctions,xe,Fe.timeReference);return{localStack:[],isAsync:xe,exports:ue,exportmangle:le,gdefs:{},moduleFactory:J,moduleFactoryMap:ae,moduleSingletons:Fe.moduleSingletons,mangleMap:this.mangles,spatialReference:He,globalScope:Xe,abortSignal:null==Fe.abortSignal?{aborted:!1}:Fe.abortSignal,localScope:null,services:Fe.services,console:Fe.console?Fe.console:We,lrucache:Fe.lrucache,timeReference:Fe.timeReference??null,interceptor:Fe.interceptor,symbols:{symbolCounter:0},depthCounter:Fe.depthCounter}}};return new Function("context","spatialReference",P).bind(Oe)}(m.syntax,{interceptor:l.interceptor,services:l.services,moduleFactory:l.moduleFactory,lrucache:l.lrucache,timeReference:l.timeReference??null,libraryResolver:l.libraryResolver,customfunctions:l.customfunctions,vars:{}},l.isAsync)),l.moduleFactoryMap[A]=m.uri;let P="";if(P=l.isAsync?"(yield lang.loadModule('"+A+"', runtimeCtx) ); ":"lang.loadModule('"+A+"', runtimeCtx); ",void 0!==l.globalScope[c])return"gscope['"+c+"']="+P;if(void 0!==l.globalScope._SymbolsMap[c])return"gscope['"+l.globalScope._SymbolsMap[c]+"']="+P;let J="";return l.undeclaredGlobalsInFunctions.has(c)?(J=l.undeclaredGlobalsInFunctions.get(c).manglename,l.undeclaredGlobalsInFunctions.delete(c)):J=Be(l),l.globalScope._SymbolsMap[c]=J,l.mangleMap[c]=J,"gscope[lang.setAssig('"+J+"', runtimeCtx)]="+P}(l,u);case"ExportNamedDeclaration":return function we(l,u){const c=z(l,u.declaration);if("FunctionDeclaration"===u.declaration.type)l.exports[u.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===u.declaration.type)for(const m of u.declaration.declarations)l.exports[m.id.name.toLowerCase()]="variable";return c}(l,u);case"ReturnStatement":return function ne(l,u){return null===u.argument?"return lc.voidOperation":"return "+z(l,u.argument)}(l,u);case"IfStatement":return ge(l,u);case"ExpressionStatement":return function ce(l,u){return"AssignmentExpression"===u.expression.type?"lastStatement = lc.voidOperation; "+z(l,u.expression)+"; \n ":"lastStatement = "+z(l,u.expression)+"; "}(l,u);case"AssignmentExpression":return function oe(l,u){const c=z(l,u.right);let m=null,A="";if("MemberExpression"===u.left.type)return m=z(l,u.left.object),!0===u.left.computed?A=z(l,u.left.property):(A="'"+u.left.property.name+"'",_e(u.left.property.name)),"lang.assignmember("+m+","+A+",'"+u.operator+"',"+c+")";if(m=u.left.name.toLowerCase(),_e(m),null!==l.localScope){if(void 0!==l.localScope[m])return"lscope['"+m+"']=lang.assign("+c+",'"+u.operator+"', lscope['"+m+"'])";if(void 0!==l.localScope._SymbolsMap[m])return"lscope['"+l.localScope._SymbolsMap[m]+"']=lang.assign("+c+",'"+u.operator+"', lscope['"+l.localScope._SymbolsMap[m]+"'])"}if(void 0!==l.globalScope[m])return"gscope['"+m+"']=lang.assign("+c+",'"+u.operator+"', gscope['"+m+"'])";if(void 0!==l.globalScope._SymbolsMap[m])return"gscope['"+l.globalScope._SymbolsMap[m]+"']=lang.assign("+c+",'"+u.operator+"', gscope['"+l.globalScope._SymbolsMap[m]+"'])";if(null!==l.localScope){if(l.undeclaredGlobalsInFunctions.has(m))return"gscope[lang.chkAssig('"+l.undeclaredGlobalsInFunctions.get(m).manglename+"',runtimeCtx)]=lang.assign("+c+",'"+u.operator+"', gscope['"+l.undeclaredGlobalsInFunctions.get(m).manglename+"'])";const P={manglename:Be(l),node:u.argument};return l.undeclaredGlobalsInFunctions.set(m,P),"gscope[lang.chkAssig('"+P.manglename+"',runtimeCtx)]=lang.assign("+c+",'"+u.operator+"', gscope['"+P.manglename+"'])"}throw new f.aV(l,f.rH.InvalidIdentifier,u)}(l,u);case"UpdateExpression":return function G(l,u){let c=null,m="";if("MemberExpression"===u.argument.type)return c=z(l,u.argument.object),!0===u.argument.computed?m=z(l,u.argument.property):(m="'"+u.argument.property.name+"'",_e(u.argument.property.name)),"lang.memberupdate("+c+","+m+",'"+u.operator+"',"+u.prefix+")";if(c=u.argument.name.toLowerCase(),_e(c),null!==l.localScope){if(void 0!==l.localScope[c])return"lang.update(lscope, '"+c+"','"+u.operator+"',"+u.prefix+")";if(void 0!==l.localScope._SymbolsMap[c])return"lang.update(lscope, '"+l.localScope._SymbolsMap[c]+"','"+u.operator+"',"+u.prefix+")"}if(void 0!==l.globalScope[c])return"lang.update(gscope, '"+c+"','"+u.operator+"',"+u.prefix+")";if(void 0!==l.globalScope._SymbolsMap[c])return"lang.update(gscope, '"+l.globalScope._SymbolsMap[c]+"','"+u.operator+"',"+u.prefix+")";if(null!==l.localScope){if(l.undeclaredGlobalsInFunctions.has(c))return"lang.update(gscope,lang.chkAssig( '"+l.undeclaredGlobalsInFunctions.get(c).manglename+"',runtimeCtx),'"+u.operator+"',"+u.prefix+")";const A={manglename:Be(l),node:u.argument};return l.undeclaredGlobalsInFunctions.set(c,A),"lang.update(gscope, lang.chkAssig('"+A.manglename+"',runtimeCtx),'"+u.operator+"',"+u.prefix+")"}throw new f.aV(l,f.rH.InvalidIdentifier,u)}(l,u);case"BreakStatement":return"break";case"ContinueStatement":return"continue";case"TemplateLiteral":return function At(l,u){try{const c=[];let m=0;for(const A of u.quasis)c.push(A.value?JSON.stringify(A.value.cooked):JSON.stringify("")),!1===A.tail&&(c.push(u.expressions[m]?"lang.castString(lang.aCheck("+z(l,u.expressions[m])+", 'TemplateLiteral'))":""),m++);return"(["+c.join(",")+"]).join('')"}catch(c){throw c}}(l,u);case"TemplateElement":return JSON.stringify(u.value?u.value.cooked:"");case"ForStatement":return function $(l,u){let c="lastStatement = lc.voidOperation; \n";null!==u.init&&(c+=z(l,u.init)+"; ");const m=ke(l),A=ke(l);return c+="var "+m+" = true; ",c+="\n do { ",null!==u.update&&(c+=" if ("+m+"===false) {\n "+z(l,u.update)+"  \n}\n "+m+"=false; \n"),null!==u.test&&(c+="var "+A+" = "+z(l,u.test)+"; ",c+="if ("+A+"===false) { break; } else if ("+A+"!==true) { lang.error('"+f.rH.BooleanConditionRequired+"');   }\n"),c+=z(l,u.body),null!==u.update&&(c+="\n "+z(l,u.update)),c+="\n"+m+" = true; \n} while(true);  lastStatement = lc.voidOperation; ",c}(l,u);case"ForInStatement":return function B(l,u){const c=ke(l),m=ke(l),A=ke(l);let P="var "+c+" = "+z(l,u.right)+";\n";"VariableDeclaration"===u.left.type&&(P+=z(l,u.left));let J="VariableDeclaration"===u.left.type?u.left.declarations[0].id.name:u.left.name;J=J.toLowerCase(),_e(J);let ae="";null!==l.localScope&&(void 0!==l.localScope[J]?ae="lscope['"+J+"']":void 0!==l.localScope._SymbolsMap[J]&&(ae="lscope['"+l.localScope._SymbolsMap[J]+"']"));let ue="";if(""===ae)if(void 0!==l.globalScope[J])ae="gscope['"+J+"']";else if(void 0!==l.globalScope._SymbolsMap[J])ae="gscope['"+l.globalScope._SymbolsMap[J]+"']";else if(null!==l.localScope)if(l.undeclaredGlobalsInFunctions.has(J))ae="gscope['"+l.undeclaredGlobalsInFunctions.get(J).manglename+"']",ue=l.undeclaredGlobalsInFunctions.get(J).manglename;else{const le={manglename:Be(l),node:u.left};l.undeclaredGlobalsInFunctions.set(J,le),ae="gscope['"+le.manglename+"']",ue=le.manglename}return ue&&(P+="lang.chkAssig('"+ue+"',runtimeCtx); \n"),P+="if ("+c+"===null) {  lastStatement = lc.voidOperation; }\n ",P+="else if (lc.isArray("+c+") || lc.isString("+c+")) {",P+="var "+m+"="+c+".length; \n",P+="for(var "+A+"=0; "+A+"<"+m+"; "+A+"++) {\n",P+=ae+"="+A+";\n",P+=z(l,u.body),P+="\n}\n",P+=" lastStatement = lc.voidOperation; \n",P+=" \n}\n",P+="else if (lc.isImmutableArray("+c+")) {",P+="var "+m+"="+c+".length(); \n",P+="for(var "+A+"=0; "+A+"<"+m+"; "+A+"++) {\n",P+=ae+"="+A+";\n",P+=z(l,u.body),P+="\n}\n",P+=" lastStatement = lc.voidOperation; \n",P+=" \n}\n",P+="else if (( "+c+" instanceof lang.Dictionary) || ( "+c+" instanceof lang.Feature)) {",P+="var "+m+"="+c+".keys(); \n",P+="for(var "+A+"=0; "+A+"<"+m+".length; "+A+"++) {\n",P+=ae+"="+m+"["+A+"];\n",P+=z(l,u.body),P+="\n}\n",P+=" lastStatement = lc.voidOperation; \n",P+=" \n}\n",l.isAsync&&(P+="else if (lc.isFeatureSet("+c+")) {",P+="var "+m+"="+c+".iterator(runtimeCtx.abortSignal); \n",P+="for(var "+A+"=lang. graphicToFeature( yield "+m+".next(),"+c+", runtimeCtx); "+A+"!=null; "+A+"=lang. graphicToFeature( yield "+m+".next(),"+c+", runtimeCtx)) {\n",P+=ae+"="+A+";\n",P+=z(l,u.body),P+="\n}\n",P+=" lastStatement = lc.voidOperation; \n",P+=" \n}\n"),P+="else { lastStatement = lc.voidOperation; } \n",P}(l,u);case"WhileStatement":return function re(l,u){let c="lastStatement = lc.voidOperation; \n";const m=ke(l);return c+=`\n  var ${m} = true;\n    do {\n      ${m} = ${z(l,u.test)};\n      if (${m}==false) {\n        break;\n      }\n      if (${m}!==true) {\n        lang.error('${f.rH.BooleanConditionRequired}');\n      }\n      ${z(l,u.body)}\n    }\n    while (${m} !== false);\n    lastStatement = lc.voidOperation;\n  `,c}(l,u);case"Identifier":return function Re(l,u){try{const c=u.name.toLowerCase();if(_e(c),null!==l.localScope){if(void 0!==l.localScope[c])return"lscope['"+c+"']";if(void 0!==l.localScope._SymbolsMap[c])return"lscope['"+l.localScope._SymbolsMap[c]+"']"}if(void 0!==l.globalScope[c])return"gscope['"+c+"']";if(void 0!==l.globalScope._SymbolsMap[c])return"gscope['"+l.globalScope._SymbolsMap[c]+"']";if(null!==l.localScope){if(l.undeclaredGlobalsInFunctions.has(c))return"gscope[lang.chkAssig('"+l.undeclaredGlobalsInFunctions.get(c).manglename+"',runtimeCtx)]";const m={manglename:Be(l),node:u.argument};return l.undeclaredGlobalsInFunctions.set(c,m),"gscope[lang.chkAssig('"+m.manglename+"',runtimeCtx)]"}throw new f.OF(l,f.rH.InvalidIdentifier,u)}catch(c){throw c}}(l,u);case"MemberExpression":return function be(l,u){try{let c;return!0===u.computed?c=z(l,u.property):(c="'"+u.property.name+"'",_e(u.property.name)),"lang.member("+z(l,u.object)+","+c+")"}catch(c){throw c}}(l,u);case"Literal":return null==u.value?"null":JSON.stringify(u.value);case"CallExpression":return function Qe(l,u){try{if("MemberExpression"===u.callee.type){let A;!0===u.callee.computed?A=z(l,u.callee.property):(A="'"+u.callee.property.name+"'",_e(u.callee.property.name));let P="[";for(let J=0;J<u.arguments.length;J++)J>0&&(P+=", "),P+=z(l,u.arguments[J]);return P+="]",l.isAsync?"(yield lang.callModuleFunction("+z(l,u.callee.object)+","+P+","+A+",runtimeCtx))":"lang.callModuleFunction("+z(l,u.callee.object)+","+P+","+A+",runtimeCtx)"}if("Identifier"!==u.callee.type)throw new f.OF(l,f.rH.FuncionNotFound,u);const c=u.callee.name.toLowerCase();if("iif"===c)return function st(l,u){try{if(3!==u.arguments.length)throw new f.OF(l,f.rH.WrongNumberOfParameters,u);const c=ke(l);return`${l.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        var ${c} = ${z(l,u.arguments[0])};\n       \n        if (${c} === true) {\n          return  ${z(l,u.arguments[1])};\n        }\n        else if (${c} === false) {\n          return ${z(l,u.arguments[2])};\n        }\n        else {\n          lang.error('ExecutionErrorCodes.BooleanConditionRequired');\n        }\n      ${l.isAsync?"})}()))":"}()"}`}catch(c){throw c}}(l,u);if("when"===c)return function Ee(l,u){try{if(u.arguments.length<3)throw new f.OF(l,f.rH.WrongNumberOfParameters,u);if(u.arguments.length%2==0)throw new f.OF(l,f.rH.WrongNumberOfParameters,u);const c=ke(l);let m="var ";for(let A=0;A<u.arguments.length-1;A+=2)m+=`${c} = lang.mustBoolean(${z(l,u.arguments[A])}, runtimeCtx);\n      if (${c} === true ) {\n        return ${z(l,u.arguments[A+1])} \n      }\n`;return`${l.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        ${m}\n        return ${z(l,u.arguments[u.arguments.length-1])}\n        ${l.isAsync?"})}()))":"}()"}`}catch(c){throw c}}(l,u);if("decode"===c)return function Ct(l,u){try{if(u.arguments.length<2)throw new f.OF(l,f.rH.WrongNumberOfParameters,u);if(2===u.arguments.length)return`(${z(l,u.arguments[1])})`;if((u.arguments.length-1)%2==0)throw new f.OF(l,f.rH.WrongNumberOfParameters,u);const c=ke(l),m=ke(l);let A="var ";for(let P=1;P<u.arguments.length-1;P+=2)A+=`${m} = ${z(l,u.arguments[P])};\n      if (lang.binary(${m}, ${c}, "==") === true ) {\n        return ${z(l,u.arguments[P+1])} \n      }\n`;return`${l.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        var ${c} = ${z(l,u.arguments[0])};\n        ${A}\n        return ${z(l,u.arguments[u.arguments.length-1])}\n        ${l.isAsync?"})}()))":"}()"}`}catch(c){throw c}}(l,u);let m="";if(null!==l.localScope&&(void 0!==l.localScope[c]?m="lscope['"+c+"']":void 0!==l.localScope._SymbolsMap[c]&&(m="lscope['"+l.localScope._SymbolsMap[c]+"']")),""===m)if(void 0!==l.globalScope[c])m="gscope['"+c+"']";else if(void 0!==l.globalScope._SymbolsMap[c])m="gscope['"+l.globalScope._SymbolsMap[c]+"']";else if(null!==l.localScope)if(l.undeclaredGlobalsInFunctions.has(c))m="gscope[lang.chkAssig('"+l.undeclaredGlobalsInFunctions.get(c).manglename+"',runtimeCtx)]";else{const A={manglename:Be(l),node:u.argument};l.undeclaredGlobalsInFunctions.set(c,A),m="gscope[lang.chkAssig('"+A.manglename+"',runtimeCtx)]"}if(""!==m){let A="[";for(let P=0;P<u.arguments.length;P++)P>0&&(A+=", "),A+=z(l,u.arguments[P]);return A+="]",l.isAsync?"(yield lang.callfunc("+m+","+A+",runtimeCtx) )":"lang.callfunc("+m+","+A+",runtimeCtx)"}throw new f.OF(l,f.rH.FuncionNotFound,u)}catch(c){throw c}}(l,u);case"UnaryExpression":return function lt(l,u){try{return"lang.unary("+z(l,u.argument)+",'"+u.operator+"')"}catch(c){throw c}}(l,u);case"BinaryExpression":return function Pe(l,u){try{return"lang.binary("+z(l,u.left)+","+z(l,u.right)+",'"+u.operator+"')"}catch(c){throw c}}(l,u);case"LogicalExpression":return function ht(l,u){try{if("AssignmentExpression"===u.left.type||"UpdateExpression"===u.left.type)throw new f.OF(l,f.rH.LogicalExpressionOnlyBoolean,u);if("AssignmentExpression"===u.right.type||"UpdateExpression"===u.right.type)throw new f.OF(l,f.rH.LogicalExpressionOnlyBoolean,u);if("&&"===u.operator||"||"===u.operator)return"(lang.logicalCheck("+z(l,u.left)+") "+u.operator+" lang.logicalCheck("+z(l,u.right)+"))";throw new f.OF(null,f.rH.LogicExpressionOrAnd,null)}catch(c){throw c}}(l,u);case"ArrayExpression":return function Ne(l,u){try{const c=[];for(let m=0;m<u.elements.length;m++)c.push("Literal"===u.elements[m].type?z(l,u.elements[m]):"lang.aCheck("+z(l,u.elements[m])+",'ArrayExpression')");return"["+c.join(",")+"]"}catch(c){throw c}}(l,u);case"ObjectExpression":return function H(l,u){let c="lang.dictionary([";for(let m=0;m<u.properties.length;m++){const A=u.properties[m];_e(A.key.name),m>0&&(c+=","),c+="lang.strCheck("+("Identifier"===A.key.type?"'"+A.key.name+"'":z(l,A.key))+",'ObjectExpression'),lang.aCheck("+z(l,A.value)+", 'ObjectExpression')"}return c+="])",c}(l,u);case"Property":return function h(l,u){throw new f.OF(l,f.rH.NeverReach,u)}(l,u);case"Array":throw new f.OF(l,f.rH.NeverReach,u);default:throw new f.OF(l,f.rH.Unrecognised,u)}}catch(c){throw c}}function Te(l,u){return"BlockStatement"===u.type?z(l,u):"ReturnStatement"===u.type||"BreakStatement"===u.type||"ContinueStatement"===u.type?z(l,u)+"; ":"UpdateExpression"===u.type?"lastStatement = "+z(l,u)+"; ":"ExpressionStatement"===u.type?z(l,u):"ObjectExpression"===u.type?"lastStatement = "+z(l,u)+"; ":z(l,u)+"; "}function ge(l,u){if("AssignmentExpression"===u.test.type||"UpdateExpression"===u.test.type)throw new f.OF(l,f.rH.BooleanConditionRequired,u);return`if (lang.mustBoolean(${z(l,u.test)}, runtimeCtx) === true) {\n    ${Te(l,u.consequent)}\n  } `+(null!==u.alternate?"IfStatement"===u.alternate.type?" else "+ge(l,u.alternate):` else {\n      ${Te(l,u.alternate)}\n    }\n`:" else {\n      lastStatement = lc.voidOperation;\n    }\n")}function de(l,u){let c="";for(let m=0;m<u.body.length;m++)"EmptyStatement"!==u.body[m].type&&(c+="ReturnStatement"===u.body[m].type||"BreakStatement"===u.body[m].type||"ContinueStatement"===u.body[m].type?z(l,u.body[m])+"; \n":"UpdateExpression"===u.body[m].type||"ObjectExpression"===u.body[m].type?"lastStatement = "+z(l,u.body[m])+"; \n":z(l,u.body[m])+" \n");return c}function _e(l){if("iif"===l)throw new f.kq;if("decode"===l)throw new f.kq;if("when"===l)throw new f.kq}const Me={};function Be(l){return l.symbols.symbolCounter++,"_T"+l.symbols.symbolCounter.toString()}function ke(l){return l.symbols.symbolCounter++,"_Tvar"+l.symbols.symbolCounter.toString()}(0,O.r)(Me,C),(0,Z.r)(Me,C),(0,K.r)(Me,C),(0,U.r)(Me,C),(0,T.r)(Me,C),Me.iif=function(l,u){try{return C(l,u,(c,m,A)=>{throw new f.aV(l,f.rH.Unrecognised,u)})}catch(c){throw c}},Me.decode=function(l,u){try{return C(l,u,(c,m,A)=>{throw new f.aV(l,f.rH.Unrecognised,u)})}catch(c){throw c}},Me.when=function(l,u){try{return C(l,u,(c,m,A)=>{throw new f.aV(l,f.rH.Unrecognised,u)})}catch(c){throw c}};const Ue={};for(const l in Me)Ue[l]=new x.Bx(Me[l]);(0,N.registerFunctions)(Me,C);for(const l in Me)Me[l]=new x.Bx(Me[l]);const rt=function(){};rt.prototype=Me;const ve=function(){};function mt(l,u,c){const m={};l||(l={}),c||(c={}),m._SymbolsMap={},m.textformatting=1,m.infinity=1,m.pi=1;for(const A in u)m[A]=1;for(const A in c)m[A]=1;for(const A in l)m[A]=1;return m}function Et(l,u,c,m){const A=c?new ve:new rt;l||(l={}),u||(u={});const P=new V.Z({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});P.immutable=!1,A._SymbolsMap={textformatting:1,infinity:1,pi:1},A.textformatting=P,A.infinity=Number.POSITIVE_INFINITY,A.pi=Math.PI;for(const J in u)A[J]=u[J],A._SymbolsMap[J]=1;for(const J in l)A._SymbolsMap[J]=1,A[J]=l[J]&&"esri.Graphic"===l[J].declaredClass?w.Z.createFromGraphic(l[J],m??null):l[J];return A}function ze(l,u){const c={mode:u,compiled:!0,functions:{},signatures:[],standardFunction:C,standardFunctionAsync:C,evaluateIdentifier:pt};for(let m=0;m<l.length;m++)l[m].registerFunctions(c);if("sync"===u){for(const m in c.functions)Me[m]=new x.Bx(c.functions[m]),rt.prototype[m]=Me[m];for(let m=0;m<c.signatures.length;m++)(0,Y.gW)(c.signatures[m],"sync")}else{for(const m in c.functions)Ue[m]=new x.Bx(c.functions[m]),ve.prototype[m]=Ue[m];for(let m=0;m<c.signatures.length;m++)(0,Y.gW)(c.signatures[m],"async")}}function pt(l,u){const c=u.name;if("_SymbolsMap"===c)throw new f.aV(l,f.rH.InvalidIdentifier,null);if(l.localStack.length>0){if("_t"!==c.substr(0,2).toLowerCase()&&void 0!==l.localStack[l.localStack.length-1][c])return l.localStack[l.localStack.length-1][c];const A=l.mangleMap[c];if(void 0!==A&&void 0!==l.localStack[l.localStack.length-1][A])return l.localStack[l.localStack.length-1][A]}if("_t"!==c.substr(0,2).toLowerCase()&&void 0!==l.globalScope[c]||1===l.globalScope._SymbolsMap[c])return l.globalScope[c];const m=l.mangleMap[c];return void 0!==m?l.globalScope[m]:void 0}ve.prototype=Ue,ze([ee.A],"sync"),ze([ee.A],"async");let ut=0;const Ve={error(l){throw new f.aV(null,l,null)},__awaiter:(l,u,c,m)=>new Promise((A,P)=>{function J(le){try{ue(m.next(le))}catch(Oe){P(Oe)}}function ae(le){try{ue(m.throw(le))}catch(Oe){P(Oe)}}function ue(le){le.done?A(le.value):le.value&&le.value.then?le.value.then(J,ae):(ut++,ut%100==0?setTimeout(()=>{ut=0,J(le.value)},0):J(le.value))}ue((m=m.apply(l,u||[])).next())}),functionDepthchecker:(l,u)=>function(){if(u.depthCounter.depth++,u.localStack.push([]),u.depthCounter.depth>64)throw new f.aV(null,f.rH.MaximumCallDepth,null);const c=l.apply(this,arguments);return(0,te.y8)(c)?c.then(m=>(u.depthCounter.depth--,u.localStack.length=u.localStack.length-1,m)):(u.depthCounter.depth--,u.localStack.length=u.localStack.length-1,c)},chkAssig(l,u){if(void 0===u.gdefs[l])throw new f.aV(u,f.rH.InvalidIdentifier,null);return l},mustBoolean(l,u){if(!0===l||!1===l)return l;throw new f.aV(u,f.rH.BooleanConditionRequired,null)},setAssig:(l,u)=>(u.gdefs[l]=1,l),castString:l=>(0,D.j)(l),aCheck(l,u){if((0,D.i)(l))throw new f.aV(null,"ArrayExpression"===u?f.rH.NoFunctionInArray:"ObjectExpression"===u?f.rH.NoFunctionInDictionary:f.rH.NoFunctionInTemplateLiteral,null);return l===D.v?null:l},Dictionary:V.Z,Feature:w.Z,UserDefinedCompiledFunction:class F extends x.Rm{constructor(u,c){super(),this.paramCount=c,this.fn=u}createFunction(u){return(...c)=>{if(c.length!==this.paramCount)throw new f.aV(u,f.rH.WrongNumberOfParameters,null);return this.fn(...c)}}call(u,c){return this.fn(...c.arguments)}marshalledCall(u,c,m,A){return A(u,c,(P,J,ae)=>{ae=ae.map(le=>!(0,D.i)(le)||le instanceof x.Vg?le:(0,x.aq)(le,u,A));const ue=this.call(m,{arguments:ae});return(0,te.y8)(ue)?ue.then(le=>(0,x.aq)(le,m,A)):ue})}},dictionary(l){const u={},c=new Map;for(let A=0;A<l.length;A+=2){if((0,D.i)(l[A+1]))throw new f.aV(null,f.rH.NoFunctionInDictionary,null);if(!1===(0,D.c)(l[A]))throw new f.aV(null,f.rH.KeyMustBeString,null);let P=l[A].toString();const J=P.toLowerCase();c.has(J)?P=c.get(J):c.set(J,P),u[P]=l[A+1]===D.v?null:l[A+1]}const m=new V.Z(u);return m.immutable=!1,m},strCheck(l){if(!1===(0,D.c)(l))throw new f.aV(null,f.rH.KeyMustBeString,null);return l},unary(l,u){if((0,D.a)(l)){if("!"===u)return!l;if("-"===u)return-1*(0,D.g)(l);if("+"===u)return 1*(0,D.g)(l);if("~"===u)return~(0,D.g)(l);throw new f.aV(null,f.rH.UnsupportedUnaryOperator,null)}if("-"===u)return-1*(0,D.g)(l);if("+"===u)return 1*(0,D.g)(l);if("~"===u)return~(0,D.g)(l);throw new f.aV(null,f.rH.UnsupportedUnaryOperator,null)},logicalCheck(l){if(!1===(0,D.a)(l))throw new f.aV(null,f.rH.LogicExpressionOrAnd,null);return l},logical(l,u,c){if((0,D.a)(l)&&(0,D.a)(u))switch(c){case"||":return l||u;case"&&":return l&&u;default:throw new f.aV(null,f.rH.LogicExpressionOrAnd,null)}throw new f.aV(null,f.rH.LogicExpressionOrAnd,null)},binary(l,u,c){switch(c){case"|":case"<<":case">>":case">>>":case"^":case"&":return(0,D.u)((0,D.g)(l),(0,D.g)(u),c);case"==":case"=":return(0,D.s)(l,u);case"!=":return!(0,D.s)(l,u);case"<":case">":case"<=":case">=":return(0,D.r)(l,u,c);case"+":return(0,D.c)(l)||(0,D.c)(u)?(0,D.j)(l)+(0,D.j)(u):(0,D.g)(l)+(0,D.g)(u);case"-":return(0,D.g)(l)-(0,D.g)(u);case"*":return(0,D.g)(l)*(0,D.g)(u);case"/":return(0,D.g)(l)/(0,D.g)(u);case"%":return(0,D.g)(l)%(0,D.g)(u);default:throw new f.aV(null,f.rH.UnsupportedOperator,null)}},assign(l,u,c){switch(u){case"=":return l===D.v?null:l;case"/=":return(0,D.g)(c)/(0,D.g)(l);case"*=":return(0,D.g)(c)*(0,D.g)(l);case"-=":return(0,D.g)(c)-(0,D.g)(l);case"+=":return(0,D.c)(c)||(0,D.c)(l)?(0,D.j)(c)+(0,D.j)(l):(0,D.g)(c)+(0,D.g)(l);case"%=":return(0,D.g)(c)%(0,D.g)(l);default:throw new f.aV(null,f.rH.UnsupportedOperator,null)}},update(l,u,c,m){const A=(0,D.g)(l[u]);return l[u]="++"===c?A+1:A-1,!1===m?A:"++"===c?A+1:A-1},graphicToFeature:(l,u,c)=>null===l?null:w.Z.createFromGraphicLikeObject(l.geometry,l.attributes,u,c.timeReference),memberupdate(l,u,c,m){let A;if((0,D.m)(l)){if(!(0,D.b)(u))throw new f.aV(null,f.rH.ArrayAccessorMustBeNumber,null);if(u<0&&(u=l.length+u),u<0||u>=l.length)throw new f.aV(null,f.rH.OutOfBounds,null);A=(0,D.g)(l[u]),l[u]="++"===c?A+1:A-1}else if(l instanceof V.Z){if(!1===(0,D.c)(u))throw new f.aV(null,f.rH.KeyAccessorMustBeString,null);if(!0!==l.hasField(u))throw new f.aV(null,f.rH.FieldNotFound,null,{key:u});A=(0,D.g)(l.field(u)),l.setField(u,"++"===c?A+1:A-1)}else if((0,D.w)(l)){if(!1===(0,D.c)(u))throw new f.aV(null,f.rH.KeyAccessorMustBeString,null);if(!0!==l.hasField(u))throw new f.aV(null,f.rH.FieldNotFound,null);A=(0,D.g)(l.field(u)),l.setField(u,"++"===c?A+1:A-1)}else{if((0,D.x)(l))throw new f.aV(null,f.rH.Immutable,null);if(!(l instanceof et))throw new f.aV(null,f.rH.InvalidIdentifier,null);if(!1===(0,D.c)(u))throw new f.aV(null,f.rH.ModuleAccessorMustBeString,null);if(!0!==l.hasGlobal(u))throw new f.aV(null,f.rH.ModuleExportNotFound,null);A=(0,D.g)(l.global(u)),l.setGlobal(u,"++"===c?A+1:A-1)}return!1===m?A:"++"===c?A+1:A-1},assignmember(l,u,c,m){if((0,D.m)(l)){if(!(0,D.b)(u))throw new f.aV(null,f.rH.ArrayAccessorMustBeNumber,null);if(u<0&&(u=l.length+u),u<0||u>l.length)throw new f.aV(null,f.rH.OutOfBounds,null);if(u===l.length){if("="!==c)throw new f.aV(null,f.rH.OutOfBounds,null);l[u]=this.assign(m,c,l[u])}else l[u]=this.assign(m,c,l[u])}else if(l instanceof V.Z){if(!1===(0,D.c)(u))throw new f.aV(null,f.rH.KeyAccessorMustBeString,null);if(!0===l.hasField(u))l.setField(u,this.assign(m,c,l.field(u)));else{if("="!==c)throw new f.aV(null,f.rH.FieldNotFound,null);l.setField(u,this.assign(m,c,null))}}else if((0,D.w)(l)){if(!1===(0,D.c)(u))throw new f.aV(null,f.rH.KeyAccessorMustBeString,null);if(!0===l.hasField(u))l.setField(u,this.assign(m,c,l.field(u)));else{if("="!==c)throw new f.aV(null,f.rH.FieldNotFound,null);l.setField(u,this.assign(m,c,null))}}else{if((0,D.x)(l))throw new f.aV(null,f.rH.Immutable,null);if(!(l instanceof et))throw new f.aV(null,f.rH.InvalidIdentifier,null);if(!1===(0,D.c)(u))throw new f.aV(null,f.rH.ModuleAccessorMustBeString,null);if(!l.hasGlobal(u))throw new f.aV(null,f.rH.ModuleExportNotFound,null);l.setGlobal(u,this.assign(m,c,l.global(u)))}},member(l,u){if(null===l)throw new f.aV(null,f.rH.MemberOfNull,null);if(l instanceof V.Z||(0,D.w)(l)){if((0,D.c)(u))return l.field(u);throw new f.aV(null,f.rH.InvalidMemberAccessKey,null)}if(l instanceof k.Z){if((0,D.c)(u))return(0,U.Z)(l,u,null,null);throw new f.aV(null,f.rH.InvalidMemberAccessKey,null)}if((0,D.m)(l)){if((0,D.b)(u)&&isFinite(u)&&Math.floor(u)===u){if(u<0&&(u=l.length+u),u>=l.length||u<0)throw new f.aV(null,f.rH.OutOfBounds,null);return l[u]}throw new f.aV(null,f.rH.InvalidMemberAccessKey,null)}if((0,D.c)(l)){if((0,D.b)(u)&&isFinite(u)&&Math.floor(u)===u){if(u<0&&(u=l.length+u),u>=l.length||u<0)throw new f.aV(null,f.rH.OutOfBounds,null);return l[u]}throw new f.aV(null,f.rH.InvalidMemberAccessKey,null)}if((0,D.x)(l)){if((0,D.b)(u)&&isFinite(u)&&Math.floor(u)===u){if(u<0&&(u=l.length()+u),u>=l.length()||u<0)throw new f.aV(null,f.rH.OutOfBounds,null);return l.get(u)}throw new f.aV(null,f.rH.InvalidMemberAccessKey,null)}if(l instanceof et){if((0,D.c)(u))return l.global(u);throw new f.aV(null,f.rH.InvalidMemberAccessKey,null)}throw new f.aV(null,f.rH.InvalidMemberAccessKey,null)},callfunc:(l,u,c)=>l.call(c,{arguments:u,preparsed:!0}),loadModule(l,u){const c=u.moduleFactoryMap[l];if(u.moduleSingletons[c])return u.moduleSingletons[c];const m=u.moduleFactory[c]({vars:{},moduleSingletons:u.moduleSingletons,depthCounter:u.depthCounter,console:u.console,abortSignal:u.abortSignal,isAsync:u.isAsync,services:u.services,lrucache:u.lrucache,timeReference:u.timeReference?u.timeReference:null,interceptor:u.interceptor},u.spatialReference);return u.moduleSingletons[c]=m,m},callModuleFunction(l,u,c,m){if(!(l instanceof et))throw new f.aV(null,f.rH.FuncionNotFound,null);const A=l.global(c);if(!1===(0,D.i)(A))throw new f.aV(null,f.rH.CallNonFunction,null);return A.call(m,{preparsed:!0,arguments:u})}};function We(l){console.log(l)}function qe(l,u,c=!1){null===u&&(u={vars:{},customfunctions:{}});let m=null;l.usesModules&&(m=new b.s(null,l.loadedModules));const A={isAsync:c,globalScope:mt(u.vars,c?Ue:Me,u.customfunctions),moduleFactory:{},moduleFactoryMap:{},undeclaredGlobalsInFunctions:new Map,customfunctions:u.customfunctions,libraryResolver:m,localScope:null,mangleMap:{},depthCounter:{depth:1},exports:{},console:We,lrucache:u.lrucache,timeReference:u.timeReference??null,interceptor:u.interceptor,services:u.services,symbols:{symbolCounter:0}};let P=z(A,l);""===P&&(P="lc.voidOperation; "),A.undeclaredGlobalsInFunctions.size>0&&A.undeclaredGlobalsInFunctions.forEach(xe=>{throw new f.OF(u,f.rH.InvalidIdentifier,xe.node)});let J="";J=c?"var runtimeCtx=this.prepare(context, true);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement=lc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+P+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx=this.prepare(context, false);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \n function mainBody() {\n var lastStatement=lc.voidOperation;\n "+P+"\n return lastStatement; } \n return this.postProcess(mainBody()); ";const ae=A.moduleFactory,ue=A.moduleFactoryMap,le=A.exports,Oe={};for(const xe in le)Oe[xe]=void 0!==A.mangleMap[xe]?A.mangleMap[xe]:xe;const Fe={lc:D.n,lang:Ve,mangles:A.mangleMap,postProcess(xe){if(xe instanceof D.R&&(xe=xe.value),xe instanceof D.I&&(xe=xe.value),xe===D.v&&(xe=null),xe===D.o)throw new f.aV(null,f.rH.IllegalResult,null);if(xe===D.p)throw new f.aV(null,f.rH.IllegalResult,null);if((0,D.i)(xe))throw new f.aV(null,f.rH.IllegalResult,null);return xe},prepare(xe,He){let Xe=xe.spatialReference;null==Xe&&(Xe=L.Z.WebMercator);const bt=Et(xe.vars,xe.customfunctions,He,xe.timeReference);return{localStack:[],isAsync:He,moduleFactory:ae,moduleFactoryMap:ue,mangleMap:this.mangles,moduleSingletons:{},exports:le,gdefs:{},exportmangle:Oe,spatialReference:Xe,globalScope:bt,abortSignal:null==xe.abortSignal?{aborted:!1}:xe.abortSignal,localScope:null,services:xe.services,console:xe.console?xe.console:We,lrucache:xe.lrucache,timeReference:xe.timeReference??null,interceptor:xe.interceptor,symbols:{symbolCounter:0},depthCounter:{depth:1}}}};return new Function("context","spatialReference",J).bind(Fe)}function Dt(){return Je.apply(this,arguments)}function Je(){return(Je=(0,S.Z)(function*(){return ze([yield j.e(8302).then(j.bind(j,38302))],"async"),!0})).apply(this,arguments)}class et extends M.P{constructor(u){super(null),this.moduleContext=u}hasGlobal(u){return void 0===this.moduleContext.exports[u]&&(u=u.toLowerCase()),void 0!==this.moduleContext.exports[u]}setGlobal(u,c){const m=this.moduleContext.globalScope,A=u.toLowerCase();if((0,D.i)(c))throw new f.aV(null,f.rH.AssignModuleFunction,null);m[this.moduleContext.exportmangle[A]]=c}global(u){const c=this.moduleContext.globalScope;u=u.toLowerCase();const m=c[this.moduleContext.exportmangle[u]];if(void 0===m)throw new f.aV(null,f.rH.InvalidIdentifier,null);if((0,D.i)(m)&&!(m instanceof x.Vg)){const A=new x.Vg;return A.fn=m,A.parameterEvaluator=C,A.context=this.moduleContext,c[this.moduleContext.exportmangle[u]]=A,A}return m}}var De,ie,l,Ft=j(84792),gt=j(84687);(l=De||(De={})).Break="break",l.Continue="continue",l.Else="else",l.False="false",l.For="for",l.From="from",l.Function="function",l.If="if",l.Import="import",l.Export="export",l.In="in",l.Null="null",l.Return="return",l.True="true",l.Var="var",l.While="while",function(l){l.AssignmentExpression="AssignmentExpression",l.ArrayExpression="ArrayExpression",l.BlockComment="BlockComment",l.BlockStatement="BlockStatement",l.BinaryExpression="BinaryExpression",l.BreakStatement="BreakStatement",l.CallExpression="CallExpression",l.ContinueStatement="ContinueStatement",l.EmptyStatement="EmptyStatement",l.ExpressionStatement="ExpressionStatement",l.ExportNamedDeclaration="ExportNamedDeclaration",l.ExportSpecifier="ExportSpecifier",l.ForStatement="ForStatement",l.ForInStatement="ForInStatement",l.FunctionDeclaration="FunctionDeclaration",l.Identifier="Identifier",l.IfStatement="IfStatement",l.ImportDeclaration="ImportDeclaration",l.ImportDefaultSpecifier="ImportDefaultSpecifier",l.LineComment="LineComment",l.Literal="Literal",l.LogicalExpression="LogicalExpression",l.MemberExpression="MemberExpression",l.ObjectExpression="ObjectExpression",l.Program="Program",l.Property="Property",l.ReturnStatement="ReturnStatement",l.TemplateElement="TemplateElement",l.TemplateLiteral="TemplateLiteral",l.UnaryExpression="UnaryExpression",l.UpdateExpression="UpdateExpression",l.VariableDeclaration="VariableDeclaration",l.VariableDeclarator="VariableDeclarator",l.WhileStatement="WhileStatement"}(ie||(ie={}));const ct=["++","--"],tt=["-","+","!","~"],vt=["=","/=","*=","%=","+=","-="],dt=["||","&&"],ft={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10};var se;!function(l){l[l.Unknown=0]="Unknown",l[l.BooleanLiteral=1]="BooleanLiteral",l[l.EOF=2]="EOF",l[l.Identifier=3]="Identifier",l[l.Keyword=4]="Keyword",l[l.NullLiteral=5]="NullLiteral",l[l.NumericLiteral=6]="NumericLiteral",l[l.Punctuator=7]="Punctuator",l[l.StringLiteral=8]="StringLiteral",l[l.Template=10]="Template"}(se||(se={}));const _t=["Unknown","Boolean","<end>","Identifier","Keyword","Null","Numeric","Punctuator","String","RegularExpression","Template"];var E;!function(l){l.InvalidModuleUri="InvalidModuleUri",l.ForInOfLoopInitializer="ForInOfLoopInitializer",l.IdentiferExpected="IdentiferExpected",l.InvalidEscapedReservedWord="InvalidEscapedReservedWord",l.InvalidExpression="InvalidExpression",l.InvalidFunctionIdentifier="InvalidFunctionIdentifier",l.InvalidHexEscapeSequence="InvalidHexEscapeSequence",l.InvalidLeftHandSideInAssignment="InvalidLeftHandSideInAssignment",l.InvalidLeftHandSideInForIn="InvalidLeftHandSideInForIn",l.InvalidTemplateHead="InvalidTemplateHead",l.InvalidVariableAssignment="InvalidVariableAssignment",l.KeyMustBeString="KeyMustBeString",l.NoFunctionInsideBlock="NoFunctionInsideBlock",l.NoFunctionInsideFunction="NoFunctionInsideFunction",l.ModuleExportRootOnly="ModuleExportRootOnly",l.ModuleImportRootOnly="ModuleImportRootOnly",l.PunctuatorExpected="PunctuatorExpected",l.TemplateOctalLiteral="TemplateOctalLiteral",l.UnexpectedBoolean="UnexpectedBoolean",l.UnexpectedEndOfScript="UnexpectedEndOfScript",l.UnexpectedIdentifier="UnexpectedIdentifier",l.UnexpectedKeyword="UnexpectedKeyword",l.UnexpectedNull="UnexpectedNull",l.UnexpectedNumber="UnexpectedNumber",l.UnexpectedPunctuator="UnexpectedPunctuator",l.UnexpectedString="UnexpectedString",l.UnexpectedTemplate="UnexpectedTemplate",l.UnexpectedToken="UnexpectedToken"}(E||(E={}));const _={[E.InvalidModuleUri]:"Module uri must be a text literal.",[E.ForInOfLoopInitializer]:"for-in loop variable declaration may not have an initializer.",[E.IdentiferExpected]:"'${value}' is an invalid identifier.",[E.InvalidEscapedReservedWord]:"Keyword cannot contain escaped characters.",[E.InvalidExpression]:"Invalid expression.",[E.InvalidFunctionIdentifier]:"'${value}' is an invalid function identifier.",[E.InvalidHexEscapeSequence]:"Invalid hexadecimal escape sequence.",[E.InvalidLeftHandSideInAssignment]:"Invalid left-hand side in assignment.",[E.InvalidLeftHandSideInForIn]:"Invalid left-hand side in for-in.",[E.InvalidTemplateHead]:"Invalid template structure.",[E.InvalidVariableAssignment]:"Invalid variable assignment.",[E.KeyMustBeString]:"Object property keys must be a word starting with a letter.",[E.NoFunctionInsideBlock]:"Functions cannot be declared inside of code blocks.",[E.NoFunctionInsideFunction]:"Functions cannot be declared inside another function.",[E.ModuleExportRootOnly]:"Module exports cannot be declared inside of code blocks.",[E.ModuleImportRootOnly]:"Module import cannot be declared inside of code blocks.",[E.PunctuatorExpected]:"'${value}' expected.",[E.TemplateOctalLiteral]:"Octal literals are not allowed in template literals.",[E.UnexpectedBoolean]:"Unexpected boolean literal.",[E.UnexpectedEndOfScript]:"Unexpected end of Arcade expression.",[E.UnexpectedIdentifier]:"Unexpected identifier.",[E.UnexpectedKeyword]:"Unexpected keyword.",[E.UnexpectedNull]:"Unexpected null literal.",[E.UnexpectedNumber]:"Unexpected number.",[E.UnexpectedPunctuator]:"Unexpected ponctuator.",[E.UnexpectedString]:"Unexpected text literal.",[E.UnexpectedTemplate]:"Unexpected quasi '${value}'.",[E.UnexpectedToken]:"Unexpected token '${value}'."};class v extends Error{constructor({code:u,index:c,line:m,column:A,len:P=0,description:J,data:ae}){super(`${J??u}`),this.declaredRootClass="esri.arcade.lib.parsingerror",this.name="ParsingError",this.code=u,this.index=c,this.line=m,this.column=A,this.len=P,this.data=ae,this.description=J,this.range={start:{line:m,column:A-1},end:{line:m,column:A+P}},Error.captureStackTrace?.(this,v)}}function p(l){return l?.type===ie.BlockStatement}function g(l){return l?.type===ie.BlockComment}function q(l){return l?.type===ie.EmptyStatement}function jn(l){return l?.type===ie.VariableDeclarator}function Zt(l,u){return!!u&&u.loc.end.line===l.loc.start.line&&u.loc.end.column<=l.loc.start.column}function cn(l,u){return l.range[0]>=u.range[0]&&l.range[1]<=u.range[1]}class zn{constructor(){this.comments=[],this._nodeStack=[],this._newComments=[]}insertInnerComments(u){if(!p(u)||0!==u.body.length)return;const c=[];for(let m=this._newComments.length-1;m>=0;--m){const A=this._newComments[m];u.range[1]>=A.range[0]&&(c.unshift(A),this._newComments.splice(m,1))}c.length&&(u.innerComments=c)}attachTrailingComments(u){if(!u)return;const c=this._nodeStack[this._nodeStack.length-1];if(p(u)&&cn(c,u))for(let A=this._newComments.length-1;A>=0;--A){const P=this._newComments[A];cn(P,u)&&(c.trailingComments=[...c.trailingComments??[],P],this._newComments.splice(A,1))}let m=[];if(this._newComments.length>0)for(let A=this._newComments.length-1;A>=0;--A){const P=this._newComments[A];Zt(P,c)?(c.trailingComments=[...c.trailingComments??[],P],this._newComments.splice(A,1)):Zt(P,u)&&(m.unshift(P),this._newComments.splice(A,1))}c?.trailingComments&&Zt(c.trailingComments[0],u)&&(m=[...m,...c.trailingComments],delete c.trailingComments),m.length>0&&(u.trailingComments=m)}attachLeadingComments(u){if(!u)return;let c;for(;this._nodeStack.length>0;){const P=this._nodeStack[this._nodeStack.length-1];if(!(u.range[0]<=P.range[0]))break;c=P,this._nodeStack.pop()}const m=[],A=[];if(c){for(let P=(c.leadingComments?.length??0)-1;P>=0;--P){const J=c.leadingComments[P];u.range[0]>=J.range[1]?(m.unshift(J),c.leadingComments.splice(P,1)):jn(u)&&!g(J)&&(A.unshift(J),c.leadingComments.splice(P,1))}return 0===c.leadingComments?.length&&delete c.leadingComments,m.length&&(u.leadingComments=m),void(A.length&&(u.trailingComments=[...A,...u.trailingComments??[]]))}for(let P=this._newComments.length-1;P>=0;--P){const J=this._newComments[P];u.range[0]>=J.range[0]&&(m.unshift(J),this._newComments.splice(P,1))}m.length&&(u.leadingComments=m)}attachComments(u){if(function R(l){return l?.type===ie.Program}(u)&&u.body.length>0){const c=this._nodeStack[this._nodeStack.length-1];return c?(c.trailingComments=[...c.trailingComments??[],...this._newComments],this._newComments.length=0,void this._nodeStack.pop()):(u.trailingComments=[...this._newComments],void(this._newComments.length=0))}this.attachTrailingComments(u),this.attachLeadingComments(u),this.insertInnerComments(u),this._nodeStack.push(u)}collectComment(u){this.comments.push(u),this._newComments.push(u)}}function Gt(l,u){const c=_[l];return u?c.replace(/\${(.*?)}/g,(m,A)=>u[A]?.toString()??""):c}class Wn{constructor(u=!1){this.tolerant=u,this.errors=[]}recordError(u){this.errors.push(u)}tolerate(u){if(!this.tolerant)throw u;this.recordError(u)}throwError(u){throw u.description=u.description??Gt(u.code,u.data),new v(u)}tolerateError(u){u.description=u.description??Gt(u.code,u.data);const c=new v(u);if(!this.tolerant)throw c;this.recordError(c)}}function dn(l,u){if(!l)throw new Error("ASSERT: "+u)}const fn={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},Ae={fromCodePoint:l=>l<65536?String.fromCharCode(l):String.fromCharCode(55296+(l-65536>>10))+String.fromCharCode(56320+(l-65536&1023)),isWhiteSpace:l=>32===l||9===l||11===l||12===l||160===l||l>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(l),isLineTerminator:l=>10===l||13===l||8232===l||8233===l,isIdentifierStart:l=>36===l||95===l||l>=65&&l<=90||l>=97&&l<=122||92===l||l>=128&&fn.NonAsciiIdentifierStart.test(Ae.fromCodePoint(l)),isIdentifierPart:l=>36===l||95===l||l>=65&&l<=90||l>=97&&l<=122||l>=48&&l<=57||92===l||l>=128&&fn.NonAsciiIdentifierPart.test(Ae.fromCodePoint(l)),isDecimalDigit:l=>l>=48&&l<=57,isHexDigit:l=>l>=48&&l<=57||l>=65&&l<=70||l>=97&&l<=102,isOctalDigit:l=>l>=48&&l<=55};function hn(l){return"0123456789abcdef".indexOf(l.toLowerCase())}function jt(l){return"01234567".indexOf(l)}const xt=[[],[],[]];ct.forEach(l=>xt[l.length-1].push(l)),tt.forEach(l=>xt[l.length-1].push(l)),dt.forEach(l=>xt[l.length-1].push(l)),vt.forEach(l=>xt[l.length-1].push(l)),["|","&",">>","<<",">>>","^","==","!=","<","<=",">",">=","+","-","*","/","%"].forEach(l=>xt[l.length-1].push(l));class Kn{constructor(u,c){this.source=u,this.errorHandler=c,this._length=u.length,this.index=0,this.lineNumber=1,this.lineStart=0,this.curlyStack=[]}saveState(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}}restoreState(u){this.index=u.index,this.lineNumber=u.lineNumber,this.lineStart=u.lineStart,this.curlyStack=u.curlyStack}eof(){return this.index>=this._length}throwUnexpectedToken(u=E.UnexpectedToken){this.errorHandler.throwError({code:u,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})}tolerateUnexpectedToken(u=E.UnexpectedToken){this.errorHandler.tolerateError({code:u,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})}skipSingleLineComment(u){const c=[],m=this.index-u,A={start:{line:this.lineNumber,column:this.index-this.lineStart-u},end:{line:0,column:0}};for(;!this.eof();){const P=this.source.charCodeAt(this.index);if(++this.index,Ae.isLineTerminator(P))return A&&(A.end={line:this.lineNumber,column:this.index-this.lineStart-1},c.push({multiLine:!1,start:m+u,end:this.index-1,range:[m,this.index-1],loc:A})),13===P&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,c}return A&&(A.end={line:this.lineNumber,column:this.index-this.lineStart},c.push({multiLine:!1,start:m+u,end:this.index,range:[m,this.index],loc:A})),c}skipMultiLineComment(){const u=[],c=this.index-2,m={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{line:0,column:0}};for(;!this.eof();){const A=this.source.charCodeAt(this.index);if(Ae.isLineTerminator(A))13===A&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(42===A){if(47===this.source.charCodeAt(this.index+1))return this.index+=2,m&&(m.end={line:this.lineNumber,column:this.index-this.lineStart},u.push({multiLine:!0,start:c+2,end:this.index-2,range:[c,this.index],loc:m})),u;++this.index}else++this.index}return m&&(m.end={line:this.lineNumber,column:this.index-this.lineStart},u.push({multiLine:!0,start:c+2,end:this.index,range:[c,this.index],loc:m})),this.tolerateUnexpectedToken(),u}scanComments(){let u=[];for(;!this.eof();){let c=this.source.charCodeAt(this.index);if(Ae.isWhiteSpace(c))++this.index;else if(Ae.isLineTerminator(c))++this.index,13===c&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index;else{if(47!==c)break;if(c=this.source.charCodeAt(this.index+1),47===c){this.index+=2;const m=this.skipSingleLineComment(2);u=[...u,...m]}else{if(42!==c)break;{this.index+=2;const m=this.skipMultiLineComment();u=[...u,...m]}}}}return u}isKeyword(u){switch((u=u.toLowerCase()).length){case 2:return u===De.If||u===De.In;case 3:return u===De.Var||u===De.For;case 4:return u===De.Else;case 5:return u===De.Break||u===De.While;case 6:return u===De.Return||u===De.Import||u===De.Export;case 8:return u===De.Function||u===De.Continue;default:return!1}}codePointAt(u){let c=this.source.charCodeAt(u);if(c>=55296&&c<=56319){const m=this.source.charCodeAt(u+1);m>=56320&&m<=57343&&(c=1024*(c-55296)+m-56320+65536)}return c}scanHexEscape(u){const c="u"===u?4:2;let m=0;for(let A=0;A<c;++A){if(this.eof()||!Ae.isHexDigit(this.source.charCodeAt(this.index)))return null;m=16*m+hn(this.source[this.index++])}return String.fromCharCode(m)}scanUnicodeCodePointEscape(){let u=this.source[this.index],c=0;for("}"===u&&this.throwUnexpectedToken();!this.eof()&&(u=this.source[this.index++],Ae.isHexDigit(u.charCodeAt(0)));)c=16*c+hn(u);return(c>1114111||"}"!==u)&&this.throwUnexpectedToken(),Ae.fromCodePoint(c)}getIdentifier(){const u=this.index++;for(;!this.eof();){const c=this.source.charCodeAt(this.index);if(92===c)return this.index=u,this.getComplexIdentifier();if(c>=55296&&c<57343)return this.index=u,this.getComplexIdentifier();if(!Ae.isIdentifierPart(c))break;++this.index}return this.source.slice(u,this.index)}getComplexIdentifier(){let u,c=this.codePointAt(this.index),m=Ae.fromCodePoint(c);for(this.index+=m.length,92===c&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,u=this.scanUnicodeCodePointEscape()):(u=this.scanHexEscape("u"),null!==u&&"\\"!==u&&Ae.isIdentifierStart(u.charCodeAt(0))||this.throwUnexpectedToken()),m=u);!this.eof()&&(c=this.codePointAt(this.index),Ae.isIdentifierPart(c));)u=Ae.fromCodePoint(c),m+=u,this.index+=u.length,92===c&&(m=m.substring(0,m.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,u=this.scanUnicodeCodePointEscape()):(u=this.scanHexEscape("u"),null!==u&&"\\"!==u&&Ae.isIdentifierPart(u.charCodeAt(0))||this.throwUnexpectedToken()),m+=u);return m}octalToDecimal(u){let c="0"!==u,m=jt(u);return!this.eof()&&Ae.isOctalDigit(this.source.charCodeAt(this.index))&&(c=!0,m=8*m+jt(this.source[this.index++]),"0123".includes(u)&&!this.eof()&&Ae.isOctalDigit(this.source.charCodeAt(this.index))&&(m=8*m+jt(this.source[this.index++]))),{code:m,octal:c}}scanIdentifier(){let u;const c=this.index,m=92===this.source.charCodeAt(c)?this.getComplexIdentifier():this.getIdentifier();if(u=1===m.length?se.Identifier:this.isKeyword(m)?se.Keyword:m.toLowerCase()===De.Null?se.NullLiteral:m.toLowerCase()===De.True||m.toLowerCase()===De.False?se.BooleanLiteral:se.Identifier,u!==se.Identifier&&c+m.length!==this.index){const A=this.index;this.index=c,this.tolerateUnexpectedToken(E.InvalidEscapedReservedWord),this.index=A}return{type:u,value:m,lineNumber:this.lineNumber,lineStart:this.lineStart,start:c,end:this.index}}scanPunctuator(){const u=this.index;let c=this.source[this.index];switch(c){case"(":case"{":"{"===c&&this.curlyStack.push("{"),++this.index;break;case".":case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;case"}":++this.index,this.curlyStack.pop();break;default:for(let m=xt.length;m>0;m--)if(c=this.source.substring(this.index,this.index+m),xt[m-1].includes(c)){this.index+=m;break}}return this.index===u&&this.throwUnexpectedToken(),{type:se.Punctuator,value:c,lineNumber:this.lineNumber,lineStart:this.lineStart,start:u,end:this.index}}scanHexLiteral(u){let c="";for(;!this.eof()&&Ae.isHexDigit(this.source.charCodeAt(this.index));)c+=this.source[this.index++];return 0===c.length&&this.throwUnexpectedToken(),Ae.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:se.NumericLiteral,value:parseInt("0x"+c,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:u,end:this.index}}scanBinaryLiteral(u){let c="";for(;!this.eof();){const m=this.source[this.index];if("0"!==m&&"1"!==m)break;c+=this.source[this.index++]}if(0===c.length&&this.throwUnexpectedToken(),!this.eof()){const m=this.source.charCodeAt(this.index);(Ae.isIdentifierStart(m)||Ae.isDecimalDigit(m))&&this.throwUnexpectedToken()}return{type:se.NumericLiteral,value:parseInt(c,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:u,end:this.index}}scanOctalLiteral(u,c){let m="",A=!1;for(Ae.isOctalDigit(u.charCodeAt(0))?(A=!0,m="0"+this.source[this.index++]):++this.index;!this.eof()&&Ae.isOctalDigit(this.source.charCodeAt(this.index));)m+=this.source[this.index++];return A||0!==m.length||this.throwUnexpectedToken(),(Ae.isIdentifierStart(this.source.charCodeAt(this.index))||Ae.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:se.NumericLiteral,value:parseInt(m,8),lineNumber:this.lineNumber,lineStart:this.lineStart,start:c,end:this.index}}scanNumericLiteral(){const u=this.index;let c=this.source[u];dn(Ae.isDecimalDigit(c.charCodeAt(0))||"."===c,"Numeric literal must start with a decimal digit or a decimal point");let m="";if("."!==c){if(m=this.source[this.index++],c=this.source[this.index],"0"===m){if("x"===c||"X"===c)return++this.index,this.scanHexLiteral(u);if("b"===c||"B"===c)return++this.index,this.scanBinaryLiteral(u);if("o"===c||"O"===c)return this.scanOctalLiteral(c,u)}for(;Ae.isDecimalDigit(this.source.charCodeAt(this.index));)m+=this.source[this.index++];c=this.source[this.index]}if("."===c){for(m+=this.source[this.index++];Ae.isDecimalDigit(this.source.charCodeAt(this.index));)m+=this.source[this.index++];c=this.source[this.index]}if("e"===c||"E"===c)if(m+=this.source[this.index++],c=this.source[this.index],"+"!==c&&"-"!==c||(m+=this.source[this.index++]),Ae.isDecimalDigit(this.source.charCodeAt(this.index)))for(;Ae.isDecimalDigit(this.source.charCodeAt(this.index));)m+=this.source[this.index++];else this.throwUnexpectedToken();return Ae.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:se.NumericLiteral,value:parseFloat(m),lineNumber:this.lineNumber,lineStart:this.lineStart,start:u,end:this.index}}scanStringLiteral(){const u=this.index;let c=this.source[u];dn("'"===c||'"'===c,"String literal must starts with a quote"),++this.index;let m=!1,A="";for(;!this.eof();){let P=this.source[this.index++];if(P===c){c="";break}if("\\"===P)if(P=this.source[this.index++],P&&Ae.isLineTerminator(P.charCodeAt(0)))++this.lineNumber,"\r"===P&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(P){case"u":if("{"===this.source[this.index])++this.index,A+=this.scanUnicodeCodePointEscape();else{const J=this.scanHexEscape(P);null===J&&this.throwUnexpectedToken(),A+=J}break;case"x":{const J=this.scanHexEscape(P);null===J&&this.throwUnexpectedToken(E.InvalidHexEscapeSequence),A+=J;break}case"n":A+="\n";break;case"r":A+="\r";break;case"t":A+="\t";break;case"b":A+="\b";break;case"f":A+="\f";break;case"v":A+="\v";break;case"8":case"9":A+=P,this.tolerateUnexpectedToken();break;default:if(P&&Ae.isOctalDigit(P.charCodeAt(0))){const J=this.octalToDecimal(P);m=J.octal||m,A+=String.fromCharCode(J.code)}else A+=P}else{if(Ae.isLineTerminator(P.charCodeAt(0)))break;A+=P}}return""!==c&&(this.index=u,this.throwUnexpectedToken()),{type:se.StringLiteral,value:A,lineNumber:this.lineNumber,lineStart:this.lineStart,start:u,end:this.index}}scanTemplate(){let u="",c=!1;const m=this.index,A="`"===this.source[m];let P=!1,J=2;for(++this.index;!this.eof();){let ae=this.source[this.index++];if("`"===ae){J=1,P=!0,c=!0;break}if("$"!==ae)if("\\"!==ae)Ae.isLineTerminator(ae.charCodeAt(0))?(++this.lineNumber,"\r"===ae&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,u+="\n"):u+=ae;else if(ae=this.source[this.index++],Ae.isLineTerminator(ae.charCodeAt(0)))++this.lineNumber,"\r"===ae&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(ae){case"n":u+="\n";break;case"r":u+="\r";break;case"t":u+="\t";break;case"u":if("{"===this.source[this.index])++this.index,u+=this.scanUnicodeCodePointEscape();else{const ue=this.index,le=this.scanHexEscape(ae);null!==le?u+=le:(this.index=ue,u+=ae)}break;case"x":{const ue=this.scanHexEscape(ae);null===ue&&this.throwUnexpectedToken(E.InvalidHexEscapeSequence),u+=ue;break}case"b":u+="\b";break;case"f":u+="\f";break;case"v":u+="\v";break;default:"0"===ae?(Ae.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(E.TemplateOctalLiteral),u+="\0"):Ae.isOctalDigit(ae.charCodeAt(0))?this.throwUnexpectedToken(E.TemplateOctalLiteral):u+=ae}else{if("{"===this.source[this.index]){this.curlyStack.push("${"),++this.index,c=!0;break}u+=ae}}return c||this.throwUnexpectedToken(),A||this.curlyStack.pop(),{type:se.Template,value:this.source.slice(m+1,this.index-J),cooked:u,head:A,tail:P,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}}lex(){if(this.eof())return{type:se.EOF,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};const u=this.source.charCodeAt(this.index);return Ae.isIdentifierStart(u)?this.scanIdentifier():40===u||41===u||59===u?this.scanPunctuator():39===u||34===u?this.scanStringLiteral():46===u?Ae.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():Ae.isDecimalDigit(u)?this.scanNumericLiteral():96===u||125===u&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():u>=55296&&u<57343&&Ae.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()}}var Ze,Pt;function mn(l,u=0){let c=l.start-l.lineStart,m=l.lineNumber;return c<0&&(c+=u,m--),{index:l.start,line:m,column:c}}function pn(l){return[{index:l.range[0],...l.loc.start},{index:l.range[1],...l.loc.end}]}function Dn(l){return ft[l]??0}(function(l){l[l.None=0]="None",l[l.Function=1]="Function",l[l.IfClause=2]="IfClause",l[l.ForLoop=4]="ForLoop",l[l.WhileLoop=8]="WhileLoop"})(Ze||(Ze={})),function(l){l[l.AsObject=0]="AsObject",l[l.Automatic=1]="Automatic"}(Pt||(Pt={}));class Jn{constructor(u,c={},m){this.delegate=m,this.hasLineTerminator=!1,this.options={tokens:"boolean"==typeof c.tokens&&c.tokens,comments:"boolean"==typeof c.comments&&c.comments,tolerant:"boolean"==typeof c.tolerant&&c.tolerant},this.options.comments&&(this.commentHandler=new zn),this.errorHandler=new Wn(this.options.tolerant),this.scanner=new Kn(u,this.errorHandler),this.context={isAssignmentTarget:!1,blockContext:Ze.None,curlyParsingType:Pt.AsObject},this.rawToken={type:se.EOF,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.endMarker={index:0,line:this.scanner.lineNumber,column:0},this.readNextRawToken(),this.endMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}throwIfInvalidType(u,c,{validTypes:m,invalidTypes:A}){m?.some(P=>u.type===P)||A?.some(P=>u.type===P)&&this.throwError(E.InvalidExpression,c)}throwError(u,c,m=this.endMarker){const{index:A,line:P,column:J}=c;this.errorHandler.throwError({code:u,index:A,line:P,column:J+1,len:m.index-A-1})}tolerateError(u,c){throw new Error("######################################### !!!")}unexpectedTokenError(u={}){const{rawToken:c}=u;let m,{code:A,data:P}=u;if(c){if(!A)switch(c.type){case se.EOF:A=E.UnexpectedEndOfScript;break;case se.Identifier:A=E.UnexpectedIdentifier;break;case se.NumericLiteral:A=E.UnexpectedNumber;break;case se.StringLiteral:A=E.UnexpectedString;break;case se.Template:A=E.UnexpectedTemplate}m=c.value.toString()}else m="ILLEGAL";A=A??E.UnexpectedToken,P||(P={value:m});const J=Gt(A,P);if(c)return new v({code:A,index:c.start,line:c.lineNumber,column:c.start-c.lineStart+1,len:c.end-c.start-1,data:P,description:J});const{index:ae,line:ue}=this.endMarker;return new v({code:A,index:ae,line:ue,column:this.endMarker.column+1,data:P,description:J})}throwUnexpectedToken(u={}){throw u.rawToken=u.rawToken??this.rawToken,this.unexpectedTokenError(u)}collectComments(u){const{commentHandler:c}=this;c&&u.length&&u.forEach(m=>{const A={type:m.multiLine?ie.BlockComment:ie.LineComment,value:this.getSourceValue(m),range:m.range,loc:m.loc};c.collectComment(A)})}peekAhead(u){const m=this.scanner.saveState(),A=u.call(this,()=>(this.scanner.scanComments(),this.scanner.lex()));return this.scanner.restoreState(m),A}getSourceValue(u){return this.scanner.source.slice(u.start,u.end)}convertToToken(u){return{type:_t[u.type],value:this.getSourceValue(u),range:[u.start,u.end],loc:{start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}}}readNextRawToken(){this.endMarker.index=this.scanner.index,this.endMarker.line=this.scanner.lineNumber,this.endMarker.column=this.scanner.index-this.scanner.lineStart;const u=this.rawToken;this.collectComments(this.scanner.scanComments()),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart),this.rawToken=this.scanner.lex(),this.hasLineTerminator=u.lineNumber!==this.rawToken.lineNumber,this.options.tokens&&this.rawToken.type!==se.EOF&&this.tokens.push(this.convertToToken(this.rawToken))}captureStartMarker(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}}getItemLocation(u){return{range:[u.index,this.endMarker.index],loc:{start:{line:u.line,column:u.column},end:{line:this.endMarker.line,column:this.endMarker.column}}}}finalize(u){return(this.delegate||this.commentHandler)&&(this.commentHandler?.attachComments(u),this.delegate?.(u)),u}expectPunctuator(u){const c=this.rawToken;this.matchPunctuator(u)?this.readNextRawToken():this.throwUnexpectedToken({rawToken:c,code:E.PunctuatorExpected,data:{value:u}})}expectKeyword(u){this.rawToken.type!==se.Keyword||this.rawToken.value.toLowerCase()!==u?this.throwUnexpectedToken({rawToken:this.rawToken}):this.readNextRawToken()}expectContextualKeyword(u){this.rawToken.type!==se.Identifier||this.rawToken.value.toLowerCase()!==u?this.throwUnexpectedToken({rawToken:this.rawToken}):this.readNextRawToken()}matchKeyword(u){return this.rawToken.type===se.Keyword&&this.rawToken.value.toLowerCase()===u}matchContextualKeyword(u){return this.rawToken.type===se.Identifier&&this.rawToken.value===u}matchPunctuator(u){return this.rawToken.type===se.Punctuator&&this.rawToken.value===u}getMatchingPunctuator(u){if("string"==typeof u&&(u=u.split("")),this.rawToken.type===se.Punctuator&&u?.length)return u.find(this.matchPunctuator,this)}isolateCoverGrammar(u){const c=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;const m=u.call(this);return this.context.isAssignmentTarget=c,m}inheritCoverGrammar(u){const c=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;const m=u.call(this);return this.context.isAssignmentTarget=this.context.isAssignmentTarget&&c,m}withBlockContext(u,c){const m=this.context.blockContext;this.context.blockContext=this.context.blockContext|u;const A=this.context.curlyParsingType;this.context.curlyParsingType=Pt.Automatic;const P=c.call(this);return this.context.blockContext=m,this.context.curlyParsingType=A,P}consumeSemicolon(){if(this.matchPunctuator(";"))this.readNextRawToken();else if(!this.hasLineTerminator)return this.rawToken.type===se.EOF||this.matchPunctuator("}")?(this.endMarker.index=this.startMarker.index,this.endMarker.line=this.startMarker.line,void(this.endMarker.column=this.startMarker.column)):void this.throwUnexpectedToken({rawToken:this.rawToken})}parsePrimaryExpression(){const u=this.captureStartMarker(),c=this.rawToken;switch(c.type){case se.Identifier:return this.readNextRawToken(),this.finalize({type:ie.Identifier,name:c.value,...this.getItemLocation(u)});case se.NumericLiteral:case se.StringLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:ie.Literal,value:c.value,raw:this.getSourceValue(c),isString:"string"==typeof c.value,...this.getItemLocation(u)});case se.BooleanLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:ie.Literal,value:c.value.toLowerCase()===De.True,raw:this.getSourceValue(c),isString:!1,...this.getItemLocation(u)});case se.NullLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:ie.Literal,value:null,raw:this.getSourceValue(c),isString:!1,...this.getItemLocation(u)});case se.Template:return this.parseTemplateLiteral();case se.Punctuator:switch(c.value){case"(":return this.inheritCoverGrammar(this.parseGroupExpression);case"[":return this.inheritCoverGrammar(this.parseArrayInitializer);case"{":return this.inheritCoverGrammar(this.parseObjectExpression);default:return this.throwUnexpectedToken({rawToken:this.rawToken})}case se.Keyword:return this.context.isAssignmentTarget=!1,this.throwUnexpectedToken({rawToken:this.rawToken});default:return this.throwUnexpectedToken({rawToken:this.rawToken})}}parseArrayInitializer(){const u=this.captureStartMarker();this.expectPunctuator("[");const c=[];for(;!this.matchPunctuator("]");){const m=this.captureStartMarker();this.matchPunctuator(",")?(this.readNextRawToken(),this.throwError(E.InvalidExpression,m)):(c.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.matchPunctuator("]")||this.expectPunctuator(","))}return this.expectPunctuator("]"),this.finalize({type:ie.ArrayExpression,elements:c,...this.getItemLocation(u)})}parseObjectPropertyKey(){const u=this.captureStartMarker(),c=this.rawToken;switch(c.type){case se.StringLiteral:return this.readNextRawToken(),this.finalize({type:ie.Literal,value:c.value,raw:this.getSourceValue(c),isString:!0,...this.getItemLocation(u)});case se.Identifier:case se.BooleanLiteral:case se.NullLiteral:case se.Keyword:return this.readNextRawToken(),this.finalize({type:ie.Identifier,name:c.value,...this.getItemLocation(u)});default:this.throwError(E.KeyMustBeString,u)}}parseObjectProperty(){const u=this.rawToken,c=this.captureStartMarker(),m=this.parseObjectPropertyKey();let A=!1,P=null;return this.matchPunctuator(":")?(this.readNextRawToken(),P=this.inheritCoverGrammar(this.parseAssignmentExpression)):u.type===se.Identifier?(A=!0,P=this.finalize({type:ie.Identifier,name:u.value,...this.getItemLocation(c)})):this.throwUnexpectedToken({rawToken:this.rawToken}),this.finalize({type:ie.Property,kind:"init",key:m,value:P,shorthand:A,...this.getItemLocation(c)})}parseObjectExpression(){const u=this.captureStartMarker();this.expectPunctuator("{");const c=[];for(;!this.matchPunctuator("}");)c.push(this.parseObjectProperty()),this.matchPunctuator("}")||this.expectPunctuator(",");return this.expectPunctuator("}"),this.finalize({type:ie.ObjectExpression,properties:c,...this.getItemLocation(u)})}parseTemplateElement(u=!1){const c=this.rawToken;c.type!==se.Template&&this.throwUnexpectedToken({rawToken:c}),u&&!c.head&&this.throwUnexpectedToken({code:E.InvalidTemplateHead,rawToken:c});const m=this.captureStartMarker();this.readNextRawToken();const{value:A,cooked:P,tail:J}=c,ae=this.finalize({type:ie.TemplateElement,value:{raw:A,cooked:P},tail:J,...this.getItemLocation(m)});return ae.loc.start.column++,ae.loc.end.column=ae.loc.end.column-(J?1:2),ae}parseTemplateLiteral(){const u=this.captureStartMarker(),c=[],m=[];let A=this.parseTemplateElement(!0);for(m.push(A);!A.tail;)c.push(this.parseExpression()),A=this.parseTemplateElement(),m.push(A);return this.finalize({type:ie.TemplateLiteral,quasis:m,expressions:c,...this.getItemLocation(u)})}parseGroupExpression(){this.expectPunctuator("(");const u=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.expectPunctuator(")"),u}parseArguments(){this.expectPunctuator("(");const u=[];if(!this.matchPunctuator(")"))for(;;){const c=this.isolateCoverGrammar(this.parseAssignmentExpression);if(u.push(c),this.matchPunctuator(")")||(this.expectPunctuator(","),this.matchPunctuator(")")))break}return this.expectPunctuator(")"),u}parseMemberName(){const u=this.rawToken,c=this.captureStartMarker();return this.readNextRawToken(),u.type!==se.NullLiteral&&u.type!==se.Identifier&&u.type!==se.Keyword&&u.type!==se.BooleanLiteral&&this.throwUnexpectedToken({rawToken:u}),this.finalize({type:ie.Identifier,name:u.value,...this.getItemLocation(c)})}parseLeftHandSideExpression(){const u=this.captureStartMarker();let c=this.inheritCoverGrammar(this.parsePrimaryExpression);const m=this.captureStartMarker();let A;for(;A=this.getMatchingPunctuator("([.");)switch(A){case"(":{this.context.isAssignmentTarget=!1,c.type!==ie.Identifier&&c.type!==ie.MemberExpression&&this.throwError(E.IdentiferExpected,u,m);const P=this.parseArguments();c=this.finalize({type:ie.CallExpression,callee:c,arguments:P,...this.getItemLocation(u)});continue}case"[":{this.context.isAssignmentTarget=!0,this.expectPunctuator("[");const P=this.isolateCoverGrammar(this.parseExpression);this.expectPunctuator("]"),c=this.finalize({type:ie.MemberExpression,computed:!0,object:c,property:P,...this.getItemLocation(u)});continue}case".":{this.context.isAssignmentTarget=!0,this.expectPunctuator(".");const P=this.parseMemberName();c=this.finalize({type:ie.MemberExpression,computed:!1,object:c,property:P,...this.getItemLocation(u)});continue}}return c}parseUpdateExpression(){const u=this.captureStartMarker();let c=this.getMatchingPunctuator(ct);if(c){this.readNextRawToken();const J=this.captureStartMarker(),ae=this.inheritCoverGrammar(this.parseUnaryExpression);return ae.type!==ie.Identifier&&ae.type!==ie.MemberExpression&&ae.type!==ie.CallExpression&&this.throwError(E.InvalidExpression,J),this.context.isAssignmentTarget||this.tolerateError(E.InvalidLeftHandSideInAssignment,u),this.context.isAssignmentTarget=!1,this.finalize({type:ie.UpdateExpression,operator:c,argument:ae,prefix:!0,...this.getItemLocation(u)})}const m=this.captureStartMarker(),A=this.inheritCoverGrammar(this.parseLeftHandSideExpression),P=this.captureStartMarker();return this.hasLineTerminator?A:(c=this.getMatchingPunctuator(ct),c?(A.type!==ie.Identifier&&A.type!==ie.MemberExpression&&this.throwError(E.InvalidExpression,m,P),this.context.isAssignmentTarget||this.tolerateError(E.InvalidLeftHandSideInAssignment,u),this.readNextRawToken(),this.context.isAssignmentTarget=!1,this.finalize({type:ie.UpdateExpression,operator:c,argument:A,prefix:!1,...this.getItemLocation(u)})):A)}parseUnaryExpression(){const u=this.getMatchingPunctuator(tt);if(u){const c=this.captureStartMarker();this.readNextRawToken();const m=this.inheritCoverGrammar(this.parseUnaryExpression);return this.context.isAssignmentTarget=!1,this.finalize({type:ie.UnaryExpression,operator:u,argument:m,prefix:!0,...this.getItemLocation(c)})}return this.parseUpdateExpression()}parseBinaryExpression(){const u=this.rawToken;let c=this.inheritCoverGrammar(this.parseUnaryExpression);if(this.rawToken.type!==se.Punctuator)return c;const m=this.rawToken.value;let A=Dn(m);if(0===A)return c;this.readNextRawToken(),this.context.isAssignmentTarget=!1;const P=[u,this.rawToken];let J=c,ae=this.inheritCoverGrammar(this.parseUnaryExpression);const ue=[J,m,ae],le=[A];for(;this.rawToken.type===se.Punctuator&&(A=Dn(this.rawToken.value))>0;){for(;ue.length>2&&A<=le[le.length-1];){ae=ue.pop();const xe=ue.pop();le.pop(),J=ue.pop(),P.pop();const He=P[P.length-1],Xe=mn(He,He.lineStart);ue.push(this.finalize(this.createBinaryOrLogicalExpression(Xe,xe,J,ae)))}ue.push(this.rawToken.value),le.push(A),P.push(this.rawToken),this.readNextRawToken(),ue.push(this.inheritCoverGrammar(this.parseUnaryExpression))}let Oe=ue.length-1;c=ue[Oe];let Fe=P.pop();for(;Oe>1;){const xe=P.pop();if(!xe)break;const He=Fe?.lineStart,Xe=mn(xe,He);c=this.finalize(this.createBinaryOrLogicalExpression(Xe,ue[Oe-1],ue[Oe-2],c)),Oe-=2,Fe=xe}return c}createBinaryOrLogicalExpression(u,c,m,A){const P=dt.includes(c)?ie.LogicalExpression:ie.BinaryExpression;return P===ie.BinaryExpression||(m.type!==ie.AssignmentExpression&&m.type!==ie.UpdateExpression||this.throwError(E.InvalidExpression,...pn(m)),A.type!==ie.AssignmentExpression&&A.type!==ie.UpdateExpression||this.throwError(E.InvalidExpression,...pn(m))),{type:P,operator:c,left:m,right:A,...this.getItemLocation(u)}}parseAssignmentExpression(){const u=this.captureStartMarker(),c=this.inheritCoverGrammar(this.parseBinaryExpression),m=this.captureStartMarker(),A=this.getMatchingPunctuator(vt);if(!A)return c;c.type!==ie.Identifier&&c.type!==ie.MemberExpression&&this.throwError(E.InvalidExpression,u,m),this.context.isAssignmentTarget||this.tolerateError(E.InvalidLeftHandSideInAssignment,u),this.matchPunctuator("=")||(this.context.isAssignmentTarget=!1),this.readNextRawToken();const P=this.isolateCoverGrammar(this.parseAssignmentExpression);return this.finalize({type:ie.AssignmentExpression,left:c,operator:A,right:P,...this.getItemLocation(u)})}parseExpression(){return this.isolateCoverGrammar(this.parseAssignmentExpression)}parseStatements(u){const c=[];for(;this.rawToken.type!==se.EOF&&!this.matchPunctuator(u);){const m=this.parseStatementListItem();q(m)||c.push(m)}return c}parseStatementListItem(){return this.context.isAssignmentTarget=!0,this.matchKeyword(De.Function)?this.parseFunctionDeclaration():this.matchKeyword(De.Export)?this.parseExportDeclaration():this.matchKeyword(De.Import)?this.parseImportDeclaration():this.parseStatement()}parseBlock(){const u=this.captureStartMarker();this.expectPunctuator("{");const c=this.parseStatements("}");return this.expectPunctuator("}"),this.finalize({type:ie.BlockStatement,body:c,...this.getItemLocation(u)})}parseObjectStatement(){const u=this.captureStartMarker(),c=this.parseObjectExpression();return this.finalize({type:ie.ExpressionStatement,expression:c,...this.getItemLocation(u)})}parseBlockOrObjectStatement(){return this.context.curlyParsingType===Pt.AsObject||this.peekAhead(u=>{let c=u();return(c.type===se.Identifier||c.type===se.StringLiteral)&&(c=u(),c.type===se.Punctuator&&":"===c.value)})?this.parseObjectStatement():this.parseBlock()}parseIdentifier(){const u=this.rawToken;if(u.type!==se.Identifier)return null;const c=this.captureStartMarker();return this.readNextRawToken(),this.finalize({type:ie.Identifier,name:u.value,...this.getItemLocation(c)})}parseVariableDeclarator(){const u=this.captureStartMarker(),c=this.parseIdentifier();c||this.throwUnexpectedToken({code:E.IdentiferExpected});let m=null;if(this.matchPunctuator("=")){this.readNextRawToken();const A=this.rawToken;try{m=this.isolateCoverGrammar(this.parseAssignmentExpression)}catch{this.throwUnexpectedToken({rawToken:A,code:E.InvalidVariableAssignment})}}return this.finalize({type:ie.VariableDeclarator,id:c,init:m,...this.getItemLocation(u)})}parseVariableDeclarationList(){const u=[this.parseVariableDeclarator()];for(;this.matchPunctuator(",");)this.readNextRawToken(),u.push(this.parseVariableDeclarator());return u}parseVariableDeclaration(){const u=this.captureStartMarker();this.expectKeyword(De.Var);const c=this.parseVariableDeclarationList();return this.consumeSemicolon(),this.finalize({type:ie.VariableDeclaration,declarations:c,kind:"var",...this.getItemLocation(u)})}parseEmptyStatement(){const u=this.captureStartMarker();return this.expectPunctuator(";"),this.finalize({type:ie.EmptyStatement,...this.getItemLocation(u)})}parseExpressionStatement(){const u=this.captureStartMarker(),c=this.parseExpression();return this.consumeSemicolon(),this.finalize({type:ie.ExpressionStatement,expression:c,...this.getItemLocation(u)})}parseIfClause(){return this.withBlockContext(Ze.IfClause,this.parseStatement)}parseIfStatement(){const u=this.captureStartMarker();this.expectKeyword(De.If),this.expectPunctuator("(");const c=this.captureStartMarker(),m=this.parseExpression(),A=this.captureStartMarker();this.expectPunctuator(")"),m.type!==ie.AssignmentExpression&&m.type!==ie.UpdateExpression||this.throwError(E.InvalidExpression,c,A);const P=this.parseIfClause();let J=null;return this.matchKeyword(De.Else)&&(this.readNextRawToken(),J=this.parseIfClause()),this.finalize({type:ie.IfStatement,test:m,consequent:P,alternate:J,...this.getItemLocation(u)})}parseWhileStatement(){const u=this.captureStartMarker();this.expectKeyword(De.While),this.expectPunctuator("(");const c=this.captureStartMarker(),m=this.parseExpression(),A=this.captureStartMarker();this.expectPunctuator(")"),m.type!==ie.AssignmentExpression&&m.type!==ie.UpdateExpression||this.throwError(E.InvalidExpression,c,A);const P=this.withBlockContext(Ze.WhileLoop,this.parseStatement);return this.finalize({type:ie.WhileStatement,test:m,body:P,...this.getItemLocation(u)})}parseForStatement(){let u=null,c=null,m=null,A=null,P=null;const J=this.captureStartMarker();if(this.expectKeyword(De.For),this.expectPunctuator("("),this.matchPunctuator(";"))this.readNextRawToken();else if(this.matchKeyword(De.Var)){const ue=this.captureStartMarker();this.readNextRawToken();const le=this.parseVariableDeclarationList();1===le.length&&this.matchKeyword(De.In)?(le[0].init&&this.throwError(E.ForInOfLoopInitializer,ue),A=this.finalize({type:ie.VariableDeclaration,declarations:le,kind:"var",...this.getItemLocation(ue)}),this.readNextRawToken(),P=this.parseExpression()):(this.matchKeyword(De.In)&&this.throwError(E.InvalidLeftHandSideInForIn,ue),u=this.finalize({type:ie.VariableDeclaration,declarations:le,kind:"var",...this.getItemLocation(ue)}),this.expectPunctuator(";"))}else{const ue=this.context.isAssignmentTarget,le=this.captureStartMarker();u=this.inheritCoverGrammar(this.parseAssignmentExpression),this.matchKeyword(De.In)?(this.context.isAssignmentTarget||this.tolerateError(E.InvalidLeftHandSideInForIn,le),u.type!==ie.Identifier&&this.throwError(E.InvalidLeftHandSideInForIn,le),this.readNextRawToken(),A=u,P=this.parseExpression(),u=null):(this.context.isAssignmentTarget=ue,this.expectPunctuator(";"))}A||(this.matchPunctuator(";")||(c=this.isolateCoverGrammar(this.parseExpression)),this.expectPunctuator(";"),this.matchPunctuator(")")||(m=this.isolateCoverGrammar(this.parseExpression))),this.expectPunctuator(")");const ae=this.withBlockContext(Ze.ForLoop,()=>this.isolateCoverGrammar(this.parseStatement));return this.finalize(A&&P?{type:ie.ForInStatement,left:A,right:P,body:ae,...this.getItemLocation(J)}:{type:ie.ForStatement,init:u,test:c,update:m,body:ae,...this.getItemLocation(J)})}parseContinueStatement(){const u=this.captureStartMarker();return this.expectKeyword(De.Continue),this.consumeSemicolon(),this.finalize({type:ie.ContinueStatement,...this.getItemLocation(u)})}parseBreakStatement(){const u=this.captureStartMarker();return this.expectKeyword(De.Break),this.consumeSemicolon(),this.finalize({type:ie.BreakStatement,...this.getItemLocation(u)})}parseReturnStatement(){const u=this.captureStartMarker();this.expectKeyword(De.Return);const c=(this.matchPunctuator(";")||this.matchPunctuator("}")||this.hasLineTerminator||this.rawToken.type===se.EOF)&&this.rawToken.type!==se.StringLiteral&&this.rawToken.type!==se.Template?null:this.parseExpression();return this.consumeSemicolon(),this.finalize({type:ie.ReturnStatement,argument:c,...this.getItemLocation(u)})}parseStatement(){switch(this.rawToken.type){case se.BooleanLiteral:case se.NullLiteral:case se.NumericLiteral:case se.StringLiteral:case se.Template:case se.Identifier:return this.parseExpressionStatement();case se.Punctuator:return"{"===this.rawToken.value?this.parseBlockOrObjectStatement():"("===this.rawToken.value?this.parseExpressionStatement():";"===this.rawToken.value?this.parseEmptyStatement():this.parseExpressionStatement();case se.Keyword:switch(this.rawToken.value.toLowerCase()){case De.Break:return this.parseBreakStatement();case De.Continue:return this.parseContinueStatement();case De.For:return this.parseForStatement();case De.Function:return this.parseFunctionDeclaration();case De.If:return this.parseIfStatement();case De.Return:return this.parseReturnStatement();case De.Var:return this.parseVariableDeclaration();case De.While:return this.parseWhileStatement();default:return this.parseExpressionStatement()}default:return this.throwUnexpectedToken({rawToken:this.rawToken})}}parseFormalParameters(){const u=[];if(this.expectPunctuator("("),!this.matchPunctuator(")"))for(;this.rawToken.type!==se.EOF;){const c=this.parseIdentifier();if(c||this.throwUnexpectedToken({rawToken:this.rawToken,code:E.IdentiferExpected}),u.push(c),this.matchPunctuator(")")||(this.expectPunctuator(","),this.matchPunctuator(")")))break}return this.expectPunctuator(")"),u}parseFunctionDeclaration(){(this.context.blockContext&Ze.Function)===Ze.Function&&this.throwUnexpectedToken({code:E.NoFunctionInsideFunction}),(this.context.blockContext&Ze.WhileLoop)!==Ze.WhileLoop&&(this.context.blockContext&Ze.IfClause)!==Ze.IfClause||this.throwUnexpectedToken({code:E.NoFunctionInsideBlock});const u=this.captureStartMarker();this.expectKeyword(De.Function);const c=this.parseIdentifier();c||this.throwUnexpectedToken({code:E.InvalidFunctionIdentifier});const m=this.parseFormalParameters(),A=this.context.blockContext;this.context.blockContext=this.context.blockContext|Ze.Function;const P=this.parseBlock();return this.context.blockContext=A,this.finalize({type:ie.FunctionDeclaration,id:c,params:m,body:P,...this.getItemLocation(u)})}parseScript(){const u=this.captureStartMarker(),c=this.parseStatements(),m=this.finalize({type:ie.Program,body:c,...this.getItemLocation(u)});return this.options.tokens&&(m.tokens=this.tokens),this.options.tolerant&&(m.errors=this.errorHandler.errors),m}parseExportDeclaration(){this.context.blockContext!==Ze.None&&this.throwUnexpectedToken({code:E.ModuleExportRootOnly});let u=null;const c=this.captureStartMarker();return this.expectKeyword(De.Export),this.matchKeyword(De.Var)?u=this.parseVariableDeclaration():this.matchKeyword("function")?u=this.parseFunctionDeclaration():this.throwUnexpectedToken({code:E.InvalidExpression}),this.finalize({type:ie.ExportNamedDeclaration,declaration:u,specifiers:[],source:null,...this.getItemLocation(c)})}parseModuleSpecifier(){const u=this.captureStartMarker(),c=this.rawToken;if(c.type===se.StringLiteral)return this.readNextRawToken(),this.finalize({type:ie.Literal,value:c.value,raw:this.getSourceValue(c),isString:!0,...this.getItemLocation(u)});this.throwError(E.InvalidModuleUri,u)}parseDefaultSpecifier(){const u=this.captureStartMarker(),c=this.parseIdentifier();return c||this.throwUnexpectedToken({code:E.IdentiferExpected}),this.finalize({type:ie.ImportDefaultSpecifier,local:c,...this.getItemLocation(u)})}parseImportDeclaration(){this.context.blockContext!==Ze.None&&this.throwUnexpectedToken({code:E.ModuleImportRootOnly});const u=this.captureStartMarker();this.expectKeyword(De.Import);const c=this.parseDefaultSpecifier();this.expectContextualKeyword(De.From);const m=this.parseModuleSpecifier();return this.finalize({type:ie.ImportDeclaration,specifiers:[c],source:m,...this.getItemLocation(u)})}}function Ot(l,u=[]){const c=function $n(l,u,c){return new Jn(l,u,c).parseScript()}(l);if(null==c.body)throw new v({index:0,line:0,column:0,data:null,description:"",code:E.InvalidExpression});if(0===c.body.length)throw new v({index:0,line:0,column:0,data:null,description:"",code:E.InvalidExpression});if(0===c.body.length)throw new v({index:0,line:0,column:0,data:null,description:"",code:E.InvalidExpression});return c.loadedModules={},(0,Y.dN)(c,u),c}class Lt{constructor(u){const c=this;c._keys=[],c._values=[],c.length=0,u&&u.forEach(m=>{c.set(m[0],m[1])})}entries(){return[].slice.call(this.keys().map((u,c)=>[u,this._values[c]]))}keys(){return[].slice.call(this._keys)}values(){return[].slice.call(this._values)}has(u){return this._keys.includes(u)}get(u){const c=this._keys.indexOf(u);return c>-1?this._values[c]:null}deepGet(u){if(!u||!u.length)return null;const c=(m,A)=>null==m?null:A.length?c(m instanceof Lt?m.get(A[0]):m[A[0]],A.slice(1)):m;return c(this.get(u[0]),u.slice(1))}set(u,c){const m=this,A=this._keys.indexOf(u);return A>-1?m._values[A]=c:(m._keys.push(u),m._values.push(c),m.length=m._values.length),this}sortedSet(u,c,m,A){const P=this,J=this._keys.length,ae=m||0,ue=void 0!==A?A:J-1;if(0===J)return P._keys.push(u),P._values.push(c),P;if(u===this._keys[ae])return this._values.splice(ae,0,c),this;if(u===this._keys[ue])return this._values.splice(ue,0,c),this;if(u>this._keys[ue])return this._keys.splice(ue+1,0,u),this._values.splice(ue+1,0,c),this;if(u<this._keys[ae])return this._values.splice(ae,0,c),this._keys.splice(ae,0,u),this;if(ae>=ue)return this;const le=ae+Math.floor((ue-ae)/2);return u<this._keys[le]?this.sortedSet(u,c,ae,le-1):u>this._keys[le]?this.sortedSet(u,c,le+1,ue):this}size(){return this.length}clear(){const u=this;return u._keys.length=u.length=u._values.length=0,this}delete(u){const c=this,m=c._keys.indexOf(u);return m>-1&&(c._keys.splice(m,1),c._values.splice(m,1),c.length=c._keys.length,!0)}forEach(u){this._keys.forEach((c,m)=>{u(this._values[m],c,m)})}map(u){return this.keys().map((c,m)=>u(this._values[m],c,m))}filter(u){const c=this;return c._keys.forEach((m,A)=>{!1===u(c._values[A],m,A)&&c.delete(m)}),this}clone(){return new Lt(this.entries())}}class gn{constructor(u=20){this._maxEntries=u,this._values=new Lt}delete(u){this._values.has(u)&&this._values.delete(u)}get(u){let c=null;return this._values.has(u)&&(c=this._values.get(u),this._values.delete(u),this._values.set(u,c)),c}put(u,c){if(this._values.size()>=this._maxEntries){const m=this._values.keys()[0];this._values.delete(m)}this._values.set(u,c)}}class Ge{constructor(u){this.portalUri=u}normalizeModuleUri(u){const c=/^[a-z0-9A-Z]+(@[0-9]+\.[0-9]+\.[0-9]+)?([\?|\/].*)?$/gi,m=/(?<portalurl>.+)\/home\/item\.html\?id\=(?<itemid>.+)$/gi,A=/(?<portalurl>.+)\/sharing\/rest\/content\/users\/[a-zA-Z0-9]+\/items\/(?<itemid>.+)$/gi,P=/(?<portalurl>.+)\/sharing\/rest\/content\/items\/(?<itemid>.+)$/gi,J=/(?<itemid>.*)@(?<versionstring>[0-9]+\.[0-9]+\.[0-9]+)([\?|\/].*)?$/gi;if(u.startsWith("portal+")){let ae=u.substring(7),ue="",le=ae,Oe=!1;for(const He of[m,P,A]){const Xe=He.exec(ae);if(null!==Xe){const bt=Xe.groups;le=bt.itemid,ue=bt.portalurl,Oe=!0;break}}if(!1===Oe){if(!c.test(ae))throw new f.Tu(f.TD.UnsupportedUriProtocol,{uri:u});le=ae,ue=this.portalUri}le.includes("/")&&(le=le.split("/")[0]),le.includes("?")&&(le=le.split("?")[0]);let Fe="current";const xe=J.exec(le);if(null!==xe){const He=xe.groups;le=He.itemid,Fe=He.versionstring}return ae=new gt.Z({url:ue}).restUrl+"/content/items/"+le+"/resources/"+Fe+".arc",{url:ae,scheme:"portal",uri:"PO:"+ae}}if(u.startsWith("mock")){if("mock"===u)return{url:"",scheme:"mock",data:'\n      export var hello = 1;\n      export function helloWorld() {\n          return "Hello World " + hello;\n      }\n  ',uri:"mock"};const ae=u.replace("mock:","");if(void 0!==Ge.mocks[ae])return{url:"",scheme:"mock",data:Ge.mocks[ae],uri:u}}throw new f.Tu(f.TD.UnrecognisedUri,{uri:u})}fetchModule(u){var c=this;return(0,S.Z)(function*(){const m=Ge.cachedModules.getFromCache(u.uri);if(m)return m;const A=c.fetchSource(u);Ge.cachedModules.addToCache(u.uri,A);let P=null;try{P=yield A}catch(J){throw Ge.cachedModules.removeFromCache(u.uri),J}return P})()}fetchSource(u){return(0,S.Z)(function*(){if("portal"===u.scheme){const c=yield(0,Ft.default)(u.url,{responseType:"text",query:{}});if(c.data)return Ot(c.data,[])}if("mock"===u.scheme)return Ot(u.data??"",[]);throw new f.Tu(f.TD.UnsupportedUriProtocol)})()}static create(u){return new Ge(u)}static getDefault(){return this._default??(Ge._default=Ge._moduleResolverFactory())}static set moduleResolverClass(u){this._moduleResolverFactory=u,this._default=null}}Ge.mocks={},Ge.cachedModules=new class Yn{constructor(u=20){this._maxEntries=u,this._cache=new gn(this._maxEntries)}clear(){this._cache=new gn(this._maxEntries)}addToCache(u,c){this._cache.put(u,c)}removeFromCache(u){this._cache.delete(u)}getFromCache(u){return this._cache.get(u)}}(30),Ge._default=null,Ge._moduleResolverFactory=()=>{const l=gt.Z.getDefault();return new Ge(l.url)};class Qn extends x.Rm{constructor(u,c){super(),this.definition=null,this.context=null,this.definition=u,this.context=c}createFunction(u){return(...c)=>{const m={spatialReference:this.context.spatialReference,console:this.context.console,timeReference:this.context.timeReference?this.context.timeReference:null,lrucache:this.context.lrucache,exports:this.context.exports,libraryResolver:this.context.libraryResolver,interceptor:this.context.interceptor,localScope:{},depthCounter:{depth:u.depthCounter.depth+1},globalScope:this.context.globalScope};if(m.depthCounter.depth>64)throw new f.aV(u,f.rH.MaximumCallDepth,null);return zt(this.definition,m,c,null)}}call(u,c){return at(u,c,(m,A,P)=>{const J={spatialReference:u.spatialReference,globalScope:u.globalScope,depthCounter:{depth:u.depthCounter.depth+1},libraryResolver:u.libraryResolver,exports:u.exports,timeReference:u.timeReference??null,console:u.console,lrucache:u.lrucache,interceptor:u.interceptor,localScope:{}};if(J.depthCounter.depth>64)throw new f.aV(u,f.rH.MaximumCallDepth,c);return zt(this.definition,J,P,c)})}marshalledCall(u,c,m,A){return A(u,c,(P,J,ae)=>{const ue={spatialReference:u.spatialReference,globalScope:m.globalScope,depthCounter:{depth:u.depthCounter.depth+1},libraryResolver:u.libraryResolver,exports:u.exports,console:u.console,timeReference:u.timeReference??null,lrucache:u.lrucache,interceptor:u.interceptor,localScope:{}};return ae=ae.map(le=>!(0,D.i)(le)||le instanceof x.Vg?le:(0,x.aq)(le,u,A)),(0,x.aq)(zt(this.definition,ue,ae,c),m,A)})}}class St extends M.P{constructor(u){super(u)}global(u){const c=this.executingContext.globalScope[u.toLowerCase()];if(c.valueset||(c.value=fe(this.executingContext,c.node),c.valueset=!0),(0,D.i)(c.value)&&!(c.value instanceof x.Vg)){const m=new x.Vg;m.fn=c.value,m.parameterEvaluator=at,m.context=this.executingContext,c.value=m}return c.value}setGlobal(u,c){if((0,D.i)(c))throw new f.aV(null,f.rH.AssignModuleFunction,null);this.executingContext.globalScope[u.toLowerCase()]={value:c,valueset:!0,node:null}}hasGlobal(u){return void 0===this.executingContext.exports[u]&&(u=u.toLowerCase()),void 0!==this.executingContext.exports[u]}loadModule(u){let c=u.spatialReference;null==c&&(c=new L.Z({wkid:102100})),this.moduleScope=En({},u.customfunctions,u.timeReference),this.executingContext={spatialReference:c,globalScope:this.moduleScope,localScope:null,libraryResolver:new b.s(u.libraryResolver._moduleSingletons,this.source.syntax.loadedModules),exports:{},console:u.console?u.console:wn,timeReference:u.timeReference??null,lrucache:u.lrucache,interceptor:u.interceptor,depthCounter:{depth:1}},fe(this.executingContext,this.source.syntax)}}function at(l,u,c){try{return!0===u.preparsed?c(l,null,u.arguments):c(l,u,function yn(l,u){const c=[];for(let m=0;m<u.arguments.length;m++)c.push(fe(l,u.arguments[m]));return c}(l,u))}catch(m){throw m}}function fe(l,u){try{switch(u?.type){case"EmptyStatement":return D.v;case"VariableDeclarator":return function mr(l,u){let c=null===u.init?null:fe(l,u.init);if(c===D.v&&(c=null),"Identifier"!==u.id.type)throw new f.aV(l,f.rH.InvalidIdentifier,u);const m=u.id.name.toLowerCase();return null!=l.localScope?l.localScope[m]={value:c,valueset:!0,node:u.init}:l.globalScope[m]={value:c,valueset:!0,node:u.init},D.v}(l,u);case"VariableDeclaration":return function hr(l,u){for(let c=0;c<u.declarations.length;c++)fe(l,u.declarations[c]);return D.v}(l,u);case"ImportDeclaration":return function dr(l,u){const c=u.specifiers[0].local.name.toLowerCase(),m=l.libraryResolver.loadLibrary(c);let A=null;return l.libraryResolver._moduleSingletons?.has(m.uri)?A=l.libraryResolver._moduleSingletons.get(m.uri):(A=new St(m),A.loadModule(l),l.libraryResolver._moduleSingletons?.set(m.uri,A)),l.globalScope[c]={value:A,valueset:!0,node:u},D.v}(l,u);case"ExportNamedDeclaration":return function fr(l,u){if(fe(l,u.declaration),"FunctionDeclaration"===u.declaration.type)l.exports[u.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===u.declaration.type)for(const c of u.declaration.declarations)l.exports[c.id.name.toLowerCase()]="variable";return D.v}(l,u);case"BlockStatement":case"Program":return function or(l,u){let c=D.v;for(let m=0;m<u.body.length;m++)if(c=fe(l,u.body[m]),c instanceof D.R||c===D.o||c===D.p)return c;return c}(l,u);case"FunctionDeclaration":return function cr(l,u){const c=u.id.name.toLowerCase();return l.globalScope[c]={valueset:!0,node:null,value:new Qn(u,l)},D.v}(l,u);case"ReturnStatement":return function lr(l,u){if(null===u.argument)return new D.R(D.v);const c=fe(l,u.argument);return new D.R(c)}(l,u);case"IfStatement":return function ur(l,u){const c=fe(l,u.test);if(!0===c)return fe(l,u.consequent);if(!1===c)return null!==u.alternate?fe(l,u.alternate):D.v;throw new f.aV(l,f.rH.BooleanConditionRequired,u)}(l,u);case"ExpressionStatement":return function sr(l,u){if("AssignmentExpression"===u.expression.type||"UpdateExpression"===u.expression.type)return fe(l,u.expression);if("CallExpression"===u.expression.type){const c=fe(l,u.expression);return c===D.v?D.v:new D.I(c)}{const c=fe(l,u.expression);return c===D.v?D.v:new D.I(c)}}(l,u);case"AssignmentExpression":return function ar(l,u){let c=null,m="";if("MemberExpression"===u.left.type){if(c=fe(l,u.left.object),!0===u.left.computed)m=fe(l,u.left.property);else{if("Identifier"!==u.left.property.type)throw new f.aV(l,f.rH.InvalidIdentifier,u);m=u.left.property.name}const P=fe(l,u.right);if((0,D.m)(c)){if(!(0,D.b)(m))throw new f.aV(l,f.rH.ArrayAccessorMustBeNumber,u);if(m<0&&(m=c.length+m),m<0||m>c.length)throw new f.aV(l,f.rH.OutOfBounds,u);if(m===c.length){if("="!==u.operator)throw new f.aV(l,f.rH.OutOfBounds,u);c[m]=ot(P,u.operator,c[m],u,l)}else c[m]=ot(P,u.operator,c[m],u,l)}else if(c instanceof V.Z){if(!1===(0,D.c)(m))throw new f.aV(l,f.rH.KeyAccessorMustBeString,u);if(!0===c.hasField(m))c.setField(m,ot(P,u.operator,c.field(m),u,l));else{if("="!==u.operator)throw new f.aV(l,f.rH.FieldNotFound,u,{key:m});c.setField(m,ot(P,u.operator,null,u,l))}}else if((0,D.w)(c)){if(!1===(0,D.c)(m))throw new f.aV(l,f.rH.KeyAccessorMustBeString,u);if(!0===c.hasField(m))c.setField(m,ot(P,u.operator,c.field(m),u,l));else{if("="!==u.operator)throw new f.aV(l,f.rH.FieldNotFound,u,{key:m});c.setField(m,ot(P,u.operator,null,u,l))}}else{if((0,D.x)(c))throw new f.aV(l,f.rH.Immutable,u);if(!(c instanceof St))throw new f.aV(l,f.rH.InvalidIdentifier,u);if(!1===(0,D.c)(m))throw new f.aV(l,f.rH.ModuleAccessorMustBeString,u);if(!0!==c.hasGlobal(m))throw new f.aV(l,f.rH.ModuleExportNotFound,u);c.setGlobal(m,ot(P,u.operator,c.global(m),u,l))}return D.v}c=u.left.name.toLowerCase();const A=fe(l,u.right);if(null!=l.localScope&&void 0!==l.localScope[c])return l.localScope[c]={value:ot(A,u.operator,l.localScope[c].value,u,l),valueset:!0,node:u.right},D.v;if(void 0!==l.globalScope[c])return l.globalScope[c]={value:ot(A,u.operator,l.globalScope[c].value,u,l),valueset:!0,node:u.right},D.v;throw new f.aV(l,f.rH.InvalidIdentifier,u)}(l,u);case"UpdateExpression":return function ir(l,u){let c,m=null,A="";if("MemberExpression"===u.argument.type){if(m=fe(l,u.argument.object),!0===u.argument.computed?A=fe(l,u.argument.property):"Identifier"===u.argument.property.type&&(A=u.argument.property.name),(0,D.m)(m)){if(!(0,D.b)(A))throw new f.aV(l,f.rH.ArrayAccessorMustBeNumber,u);if(A<0&&(A=m.length+A),A<0||A>=m.length)throw new f.aV(l,f.rH.OutOfBounds,u);c=(0,D.g)(m[A]),m[A]="++"===u.operator?c+1:c-1}else if(m instanceof V.Z){if(!1===(0,D.c)(A))throw new f.aV(l,f.rH.KeyAccessorMustBeString,u);if(!0!==m.hasField(A))throw new f.aV(l,f.rH.FieldNotFound,u);c=(0,D.g)(m.field(A)),m.setField(A,"++"===u.operator?c+1:c-1)}else if((0,D.w)(m)){if(!1===(0,D.c)(A))throw new f.aV(l,f.rH.KeyAccessorMustBeString,u);if(!0!==m.hasField(A))throw new f.aV(l,f.rH.FieldNotFound,u);c=(0,D.g)(m.field(A)),m.setField(A,"++"===u.operator?c+1:c-1)}else{if((0,D.x)(m))throw new f.aV(l,f.rH.Immutable,u);if(!(m instanceof St))throw new f.aV(l,f.rH.InvalidParameter,u);if(!1===(0,D.c)(A))throw new f.aV(l,f.rH.ModuleAccessorMustBeString,u);if(!0!==m.hasGlobal(A))throw new f.aV(l,f.rH.ModuleExportNotFound,u);c=(0,D.g)(m.global(A)),m.setGlobal(A,"++"===u.operator?c+1:c-1)}return!1===u.prefix?c:"++"===u.operator?c+1:c-1}if(m="Identifier"===u.argument.type?u.argument.name.toLowerCase():"",!m)throw new f.aV(l,f.rH.InvalidIdentifier,u);if(null!=l.localScope&&void 0!==l.localScope[m])return c=(0,D.g)(l.localScope[m].value),l.localScope[m]={value:"++"===u.operator?c+1:c-1,valueset:!0,node:u},!1===u.prefix?c:"++"===u.operator?c+1:c-1;if(void 0!==l.globalScope[m])return c=(0,D.g)(l.globalScope[m].value),l.globalScope[m]={value:"++"===u.operator?c+1:c-1,valueset:!0,node:u},!1===u.prefix?c:"++"===u.operator?c+1:c-1;throw new f.aV(l,f.rH.InvalidIdentifier,u)}(l,u);case"BreakStatement":return D.o;case"ContinueStatement":return D.p;case"TemplateElement":return function Ar(l,u){return u.value?u.value.cooked:""}(0,u);case"TemplateLiteral":return function Er(l,u){let c="",m=0;for(const A of u.quasis)c+=A.value?A.value.cooked:"",!1===A.tail&&(c+=u.expressions[m]?(0,D.j)(Cr(fe(l,u.expressions[m]),l,u)):"",m++);return c}(l,u);case"ForStatement":return function tr(l,u){null!==u.init&&fe(l,u.init);const c={testResult:!0,lastAction:D.v};do{rr(l,u,c)}while(!0===c.testResult);return c.lastAction instanceof D.R?c.lastAction:D.v}(l,u);case"ForInStatement":return function er(l,u){const c=fe(l,u.right);"VariableDeclaration"===u.left.type&&fe(l,u.left);let m=null,A="";if("VariableDeclaration"===u.left.type){const P=u.left.declarations[0].id;"Identifier"===P.type&&(A=P.name)}else"Identifier"===u.left.type&&(A=u.left.name);if(!A)throw new f.aV(l,f.rH.InvalidIdentifier,u);if(A=A.toLowerCase(),null!=l.localScope&&void 0!==l.localScope[A]&&(m=l.localScope[A]),null===m&&void 0!==l.globalScope[A]&&(m=l.globalScope[A]),null===m)throw new f.aV(l,f.rH.InvalidIdentifier,u);if((0,D.m)(c)||(0,D.c)(c)){const P=c.length;for(let J=0;J<P;J++){m.value=J;const ae=fe(l,u.body);if(ae===D.o)break;if(ae instanceof D.R)return ae}return D.v}if((0,D.x)(c)){for(let P=0;P<c.length();P++){m.value=P;const J=fe(l,u.body);if(J===D.o)break;if(J instanceof D.R)return J}return D.v}if(!(c instanceof V.Z||(0,D.w)(c)))return D.v;{const P=c.keys();for(let J=0;J<P.length;J++){m.value=P[J];const ae=fe(l,u.body);if(ae===D.o)break;if(ae instanceof D.R)return ae}}}(l,u);case"WhileStatement":return function nr(l,u){const c={testResult:!0,lastAction:D.v};if(c.testResult=fe(l,u.test),!1===c.testResult)return D.v;if(!0!==c.testResult)throw new f.aV(l,f.rH.BooleanConditionRequired,u);for(;!0===c.testResult&&(c.lastAction=fe(l,u.body),c.lastAction!==D.o)&&!(c.lastAction instanceof D.R);)if(c.testResult=fe(l,u.test),!0!==c.testResult&&!1!==c.testResult)throw new f.aV(l,f.rH.BooleanConditionRequired,u);return c.lastAction instanceof D.R?c.lastAction:D.v}(l,u);case"Identifier":return xn(l,u);case"MemberExpression":return function pr(l,u){try{const c=fe(l,u.object);if(null===c)throw new f.aV(l,f.rH.MemberOfNull,u);if(!1===u.computed){if("Identifier"===u.property.type){if(c instanceof V.Z||(0,D.w)(c))return c.field(u.property.name);if(c instanceof k.Z)return(0,U.Z)(c,u.property.name,u,l);if(c instanceof St){if(!c.hasGlobal(u.property.name))throw new f.aV(l,f.rH.InvalidIdentifier,u);return c.global(u.property.name)}}throw new f.aV(l,f.rH.InvalidMemberAccessKey,u)}{let m=fe(l,u.property);if(c instanceof V.Z||(0,D.w)(c)){if((0,D.c)(m))return c.field(m);throw new f.aV(l,f.rH.InvalidMemberAccessKey,u)}if(c instanceof St){if((0,D.c)(m))return c.global(m);throw new f.aV(l,f.rH.InvalidMemberAccessKey,u)}if(c instanceof k.Z){if((0,D.c)(m))return(0,U.Z)(c,m,u,l);throw new f.aV(l,f.rH.InvalidMemberAccessKey,u)}if((0,D.m)(c)){if((0,D.b)(m)&&isFinite(m)&&Math.floor(m)===m){if(m<0&&(m=c.length+m),m>=c.length||m<0)throw new f.aV(l,f.rH.OutOfBounds,u);return c[m]}throw new f.aV(l,f.rH.InvalidMemberAccessKey,u)}if((0,D.c)(c)){if((0,D.b)(m)&&isFinite(m)&&Math.floor(m)===m){if(m<0&&(m=c.length+m),m>=c.length||m<0)throw new f.aV(l,f.rH.OutOfBounds,u);return c[m]}throw new f.aV(l,f.rH.InvalidMemberAccessKey,u)}if((0,D.x)(c)){if((0,D.b)(m)&&isFinite(m)&&Math.floor(m)===m){if(m<0&&(m=c.length()+m),m>=c.length()||m<0)throw new f.aV(l,f.rH.OutOfBounds,u);return c.get(m)}throw new f.aV(l,f.rH.InvalidMemberAccessKey,u)}throw new f.aV(l,f.rH.InvalidMemberAccessKey,u)}}catch(c){throw c}}(l,u);case"Literal":return u.value;case"CallExpression":return function wr(l,u){try{if("MemberExpression"===u.callee.type){const c=fe(l,u.callee.object);if(!(c instanceof St))throw new f.aV(l,f.rH.FuncionNotFound,u);const m=!1===u.callee.computed?u.callee.property.name:fe(l,u.callee.property);if(!c.hasGlobal(m))throw new f.aV(l,f.rH.FuncionNotFound,u);const A=c.global(m);if(!(0,D.i)(A))throw new f.aV(l,f.rH.CallNonFunction,u);return A.call(l,u)}if("Identifier"!==u.callee.type)throw new f.aV(l,f.rH.FuncionNotFound,u);if(null!=l.localScope&&void 0!==l.localScope[u.callee.name.toLowerCase()]){const c=l.localScope[u.callee.name.toLowerCase()];if((0,D.i)(c.value))return c.value.call(l,u);throw new f.aV(l,f.rH.CallNonFunction,u)}if(void 0!==l.globalScope[u.callee.name.toLowerCase()]){const c=l.globalScope[u.callee.name.toLowerCase()];if((0,D.i)(c.value))return c.value.call(l,u);throw new f.aV(l,f.rH.CallNonFunction,u)}throw new f.aV(l,f.rH.FuncionNotFound,u)}catch(c){throw c}}(l,u);case"UnaryExpression":return function Dr(l,u){try{const c=fe(l,u.argument);if((0,D.a)(c)){if("!"===u.operator)return!c;if("-"===u.operator)return-1*(0,D.g)(c);if("+"===u.operator)return 1*(0,D.g)(c);if("~"===u.operator)return~(0,D.g)(c);throw new f.aV(l,f.rH.UnsupportedUnaryOperator,u)}if("~"===u.operator)return~(0,D.g)(c);if("-"===u.operator)return-1*(0,D.g)(c);if("+"===u.operator)return 1*(0,D.g)(c);throw new f.aV(l,f.rH.UnsupportedUnaryOperator,u)}catch(c){throw c}}(l,u);case"BinaryExpression":return function yr(l,u){try{const c=[fe(l,u.left),fe(l,u.right)],m=c[0],A=c[1];switch(u.operator){case"|":case"<<":case">>":case">>>":case"^":case"&":return(0,D.u)((0,D.g)(m),(0,D.g)(A),u.operator);case"==":return(0,D.s)(m,A);case"!=":return!(0,D.s)(m,A);case"<":case">":case"<=":case">=":return(0,D.r)(m,A,u.operator);case"+":return(0,D.c)(m)||(0,D.c)(A)?(0,D.j)(m)+(0,D.j)(A):(0,D.g)(m)+(0,D.g)(A);case"-":return(0,D.g)(m)-(0,D.g)(A);case"*":return(0,D.g)(m)*(0,D.g)(A);case"/":return(0,D.g)(m)/(0,D.g)(A);case"%":return(0,D.g)(m)%(0,D.g)(A);default:throw new f.aV(l,f.rH.UnsupportedOperator,u)}}catch(c){throw c}}(l,u);case"LogicalExpression":return function xr(l,u){try{const c=fe(l,u.left);if((0,D.a)(c))switch(u.operator){case"||":if(!0===c)return c;{const m=fe(l,u.right);if((0,D.a)(m))return m;throw new f.aV(l,f.rH.LogicExpressionOrAnd,u)}case"&&":if(!1===c)return c;{const m=fe(l,u.right);if((0,D.a)(m))return m;throw new f.aV(l,f.rH.LogicExpressionOrAnd,u)}default:throw new f.aV(l,f.rH.LogicExpressionOrAnd,u)}throw new f.aV(l,f.rH.LogicalExpressionOnlyBoolean,u)}catch(c){throw c}}(l,u);case"ArrayExpression":return function gr(l,u){try{const c=[];for(let m=0;m<u.elements.length;m++){const A=fe(l,u.elements[m]);if((0,D.i)(A))throw new f.aV(l,f.rH.NoFunctionInArray,u);c.push(A===D.v?null:A)}return c}catch(c){throw c}}(l,u);case"ObjectExpression":return function Xn(l,u){const c={},m=new Map;for(let P=0;P<u.properties.length;P++){const J=fe(l,u.properties[P]);if((0,D.i)(J.value))throw new f.aV(l,f.rH.NoFunctionInDictionary,u);if(!1===(0,D.c)(J.key))throw new f.aV(l,f.rH.KeyMustBeString,u);let ae=J.key.toString();const ue=ae.toLowerCase();m.has(ue)?ae=m.get(ue):m.set(ue,ae),c[ae]=J.value===D.v?null:J.value}const A=new V.Z(c);return A.immutable=!1,A}(l,u);case"Property":return function qn(l,u){return{key:"Identifier"===u.key.type?u.key.name:fe(l,u.key),value:fe(l,u.value)}}(l,u);default:throw new f.aV(l,f.rH.Unrecognised,u)}}catch(c){throw(0,f.VO)(l,u,c)}}function rr(l,u,c){if(null!==u.test){if(c.testResult=fe(l,u.test),!1===c.testResult)return;if(!0!==c.testResult)throw new f.aV(l,f.rH.BooleanConditionRequired,u)}c.lastAction=fe(l,u.body),c.lastAction!==D.o?c.lastAction instanceof D.R?c.testResult=!1:null!==u.update&&fe(l,u.update):c.testResult=!1}function ot(l,u,c,m,A){switch(u){case"=":return l===D.v?null:l;case"/=":return(0,D.g)(c)/(0,D.g)(l);case"*=":return(0,D.g)(c)*(0,D.g)(l);case"-=":return(0,D.g)(c)-(0,D.g)(l);case"+=":return(0,D.c)(c)||(0,D.c)(l)?(0,D.j)(c)+(0,D.j)(l):(0,D.g)(c)+(0,D.g)(l);case"%=":return(0,D.g)(c)%(0,D.g)(l);default:throw new f.aV(A,f.rH.UnsupportedOperator,m)}}function Cr(l,u,c){if((0,D.i)(l))throw new f.aV(u,f.rH.NoFunctionInTemplateLiteral,c);return l}function xn(l,u){let c;try{const m=u.name.toLowerCase();if(null!=l.localScope&&void 0!==l.localScope[m])return c=l.localScope[m],!0===c.valueset||(c.value=fe(l,c.node),c.valueset=!0),c.value;if(void 0!==l.globalScope[m])return c=l.globalScope[m],!0===c.valueset||(c.value=fe(l,c.node),c.valueset=!0),c.value;throw new f.aV(l,f.rH.InvalidIdentifier,u)}catch(m){throw m}}const je={};function An(l,u,c,m){try{const A=fe(l,u.arguments[c]);if((0,D.s)(A,m))return fe(l,u.arguments[c+1]);{const P=u.arguments.length-c;return 1===P?fe(l,u.arguments[c]):2===P?null:3===P?fe(l,u.arguments[c+2]):An(l,u,c+2,m)}}catch(A){throw A}}function Cn(l,u,c,m){try{if(!0===m)return fe(l,u.arguments[c+1]);if(u.arguments.length-c==3)return fe(l,u.arguments[c+2]);{const A=fe(l,u.arguments[c+2]);if(!1===(0,D.a)(A))throw new f.aV(l,f.rH.BooleanConditionRequired,u.arguments[c+2]);return Cn(l,u,c+2,A)}}catch(A){throw A}}function zt(l,u,c,m){try{const A=l.body;if(c.length!==l.params.length)throw new f.aV(u,f.rH.WrongNumberOfParameters,m);if(null!=u.localScope)for(let J=0;J<c.length;J++)u.localScope[l.params[J].name.toLowerCase()]={value:c[J],valueset:!0,node:null};const P=fe(u,A);if(P instanceof D.R)return P.value;if(P===D.o)throw new f.aV(u,f.rH.UnexpectedToken,m);if(P===D.p)throw new f.aV(u,f.rH.UnexpectedToken,m);return P instanceof D.I?P.value:P}catch(A){throw A}}(0,O.r)(je,at),(0,Z.r)(je,at),(0,K.r)(je,at),(0,U.r)(je,at),(0,T.r)(je,at),(0,N.registerFunctions)(je,at),je.iif=function(l,u){try{(0,D.y)(null===u.arguments?[]:u.arguments,3,3,l,u);const c=fe(l,u.arguments[0]);if(!1===(0,D.a)(c))throw new f.aV(l,f.rH.BooleanConditionRequired,u);return fe(l,!0===c?u.arguments[1]:u.arguments[2])}catch(c){throw c}},je.decode=function(l,u){try{if(u.arguments.length<2)throw new f.aV(l,f.rH.WrongNumberOfParameters,u);if(2===u.arguments.length)return fe(l,u.arguments[1]);if((u.arguments.length-1)%2==0)throw new f.aV(l,f.rH.WrongNumberOfParameters,u);return An(l,u,1,fe(l,u.arguments[0]))}catch(c){throw c}},je.when=function(l,u){try{if(u.arguments.length<3)throw new f.aV(l,f.rH.WrongNumberOfParameters,u);if(u.arguments.length%2==0)throw new f.aV(l,f.rH.WrongNumberOfParameters,u);const c=fe(l,u.arguments[0]);if(!1===(0,D.a)(c))throw new f.aV(l,f.rH.BooleanConditionRequired,u.arguments[0]);return Cn(l,u,0,c)}catch(c){throw c}};for(const l in je)je[l]={value:new x.Bx(je[l]),valueset:!0,node:null};const kt=function(){};function En(l,u,c){const m=new kt;l||(l={}),u||(u={});const A=new V.Z({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});A.immutable=!1,m.textformatting={value:A,valueset:!0,node:null};for(const P in u)m[P]={value:new x.Bx(u[P]),native:!0,valueset:!0,node:null};for(const P in l)m[P]=l[P]&&"esri.Graphic"===l[P].declaredClass?{value:w.Z.createFromGraphic(l[P],c),valueset:!0,node:null}:{value:l[P],valueset:!0,node:null};return m}function wn(l){console.log(l)}function Fn(l){const u={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:at,evaluateIdentifier:xn};for(let c=0;c<l.length;c++)l[c].registerFunctions(u);for(const c in u.functions)je[c]={value:new x.Bx(u.functions[c]),valueset:!0,node:null},kt.prototype[c]=je[c];for(let c=0;c<u.signatures.length;c++)(0,Y.gW)(u.signatures[c],"sync")}function Wt(l,u){let c=u.spatialReference;null==c&&(c=new L.Z({wkid:102100}));let m=null;l.usesModules&&(m=new b.s(new Map,l.loadedModules));const A={spatialReference:c,globalScope:En(u.vars,u.customfunctions,u.timeReference),localScope:null,exports:{},libraryResolver:m,console:u.console?u.console:wn,timeReference:u.timeReference??null,lrucache:u.lrucache,interceptor:u.interceptor,depthCounter:{depth:1}};let P=fe(A,l);if(P instanceof D.R&&(P=P.value),P instanceof D.I&&(P=P.value),P===D.v&&(P=null),P===D.o)throw new f.aV(A,f.rH.IllegalResult,null);if(P===D.p)throw new f.aV(A,f.rH.IllegalResult,null);if((0,D.i)(P))throw new f.aV(A,f.rH.IllegalResult,null);return P}(kt.prototype=je).infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null},kt.prototype.pi={value:Math.PI,valueset:!0,node:null},Fn([ee.A]);var vn=j(8314),Fr=j(62208);const vr=["feature","angle","bearing","centroid","envelopeintersects","extent","geometry","isselfintersecting","ringisclockwise"];let _n=!1,Sn=!1,nt=null,Kt=[];function bn(l,u){if(!0===u.useAsync||!0===l.isAsync)return function br(l,u){if(null===nt)throw new f.aV(null,f.rH.AsyncNotEnabled,null);if((0,vn.Z)("esri-csp-restrictions"))return function(c){return nt.executeScript(l,c)};try{return qe(l,u,!0)}catch(c){if("esri.arcade.arcadeuncompilableerror"===c.declaredRootClass)return function(m){return nt.executeScript(l,m)};throw c}}(l,u);if((0,vn.Z)("esri-csp-restrictions"))return function(c){return Wt(l,c)};try{return qe(l,u)}catch(c){if("esri.arcade.arcadeuncompilableerror"===c.declaredRootClass)return function(m){return Wt(l,m)};throw c}}function Jt(l,u=[]){return Ot(l,u)}function $t(l,u){if(!0===u.useAsync||!0===l.isAsync){if(null===nt)throw new f.aV(null,f.rH.AsyncNotEnabled,null);return nt.executeScript(l,u)}return Wt(l,u)}function Nt(l,u){return(0,Y.bV)(l,u)}function In(l){return(0,Y.Kq)(l)}function Ut(l,u=[]){return void 0===l.usesGeometry&&(0,Y.dN)(l,u),!0===l.usesGeometry}let Yt=null;function Qt(){return Yt||(Yt=Tn(),Yt)}function Tn(){return Xt.apply(this,arguments)}function Xt(){return Xt=(0,S.Z)(function*(){const[l,u]=yield Promise.all([Promise.all([j.e(4918),j.e(4766)]).then(j.bind(j,44766)),Promise.resolve().then(j.bind(j,63461))]);return Sn=!0,u.setGeometryEngine(l),!0}),Xt.apply(this,arguments)}let qt=null;function en(){return null!==qt||(qt=Mn()),qt}function Mn(){return tn.apply(this,arguments)}function tn(){return tn=(0,S.Z)(function*(){yield Dt(),nt=yield Promise.all([j.e(8302),j.e(5039)]).then(j.bind(j,35039));for(const l of Kt)nt.extend(l),ze(l,"async");return Kt=null,!0}),tn.apply(this,arguments)}function Bn(){return _n}function Pn(){return!!nt}function kn(){return Sn}let nn=null;function rn(){return nn||(nn=Rn(),nn)}function Rn(){return an.apply(this,arguments)}function an(){return an=(0,S.Z)(function*(){yield en();const[l,u,c,m,A]=yield Promise.all([Promise.all([j.e(3482),j.e(5171)]).then(j.bind(j,85171)),Promise.all([j.e(3482),j.e(5171),j.e(2480)]).then(j.bind(j,82480)),Promise.all([j.e(3482),j.e(5978)]).then(j.bind(j,55978)),j.e(2543).then(j.bind(j,2543)),j.e(4198).then(j.bind(j,34198))]);return Hn=l,nt.extend([u,c,m,A]),ze([u,c,m,A],"async"),_n=!0,!0}),an.apply(this,arguments)}function On(l,u=[]){return void 0===l.usesFeatureSet&&(0,Y.dN)(l,u),!0===l.usesFeatureSet}function kr(l,u){if(u){for(const c of u)if(Nt(l,c))return!0;return!1}return!1}function Ln(l,u){return sn.apply(this,arguments)}function sn(){return sn=(0,S.Z)(function*(l,u,c=[],m=!1,A=null){return un(new Set,l,u,c,m,A)}),sn.apply(this,arguments)}function un(l,u,c){return on.apply(this,arguments)}function on(){return on=(0,S.Z)(function*(l,u,c,m=[],A=!1,P=null){const J="string"==typeof u?Jt(u):u,ae=[];return J&&(!1===kn()&&(Ut(J)||A)&&ae.push(Qt()),!1===Pn()&&(!0===J.isAsync||c)&&ae.push(en()),!1===Bn()&&(On(J)||kr(J,m))&&ae.push(rn())),ae.length&&(yield Promise.all(ae)),yield Nn(l,J,P,c,A),!0}),on.apply(this,arguments)}function Nn(l,u){return ln.apply(this,arguments)}function ln(){return ln=(0,S.Z)(function*(l,u,c=null,m=!1,A=!1){const P=(0,Y.x5)(u);null===c&&P.length>0&&(c=Ge.getDefault()),u.loadedModules={};for(const J of P){(0,Fr.O3)(c);const ae=c.normalizeModuleUri(J.source);if(l.has(ae.uri))throw new f.aV(null,f.rH.CircularModules,null);l.add(ae.uri);const ue=yield c.fetchModule(ae);yield un(l,ue,m,[],A,c),l.delete(ae.uri),ue.isAsync&&(u.isAsync=!0),ue.usesFeatureSet&&(u.usesFeatureSet=!0),ue.usesGeometry&&(u.usesGeometry=!0),u.loadedModules[J.libname]={uri:ae.uri,script:ue}}}),ln.apply(this,arguments)}function Un(l){if(Ut(l))return!0;const u=(0,Y.Vf)(l);let c=!1;for(let m=0;m<u.length;m++)if(vr.includes(u[m])){c=!0;break}return c}let Hn=null;function Ht(){return Hn}const Or=Object.freeze(Object.defineProperty({__proto__:null,_loadScriptDependenciesImpl:un,compileScript:bn,enableAsyncSupport:en,enableAsyncSupportImpl:Mn,enableFeatureSetSupport:rn,enableFeatureSetSupportImpl:Rn,enableGeometrySupport:Qt,enableGeometrySupportImpl:Tn,executeScript:$t,extend:function Ir(l){Fn(l),ze(l,"sync"),null===nt?Kt.push(l):(ze(l,"async"),nt.extend(l))},extractExpectedFieldLiterals:In,extractFieldLiterals:function Br(l,u=!1){return void 0===u&&(u=!1),(0,Y.mb)(l)},featureSetUtils:Ht,isAsyncEnabled:Pn,isFeatureSetSupportEnabled:Bn,isGeometryEnabled:kn,loadDependentModules:Nn,loadScriptDependencies:Ln,parseAndExecuteScript:function Tr(l,u,c=[]){return $t(Ot(l,c),u)},parseScript:Jt,referencesFunction:function Mr(l,u){return(0,Y.w8)(l,u)},referencesMember:Nt,scriptIsAsync:function Pr(l,u=[]){return void 0===l.isAsync&&(0,Y.dN)(l,u),!0===l.isAsync},scriptTouchesGeometry:Un,scriptUsesFeatureSet:On,scriptUsesGeometryEngine:Ut,scriptUsesModules:function Rr(l,u=[]){return void 0===l.usesModules&&(0,Y.dN)(l,u),!0===l.usesModules}},Symbol.toStringTag,{value:"Module"}));var Lr=j(58817),Vn=j(86971),Nr=j(72642),Ur=j(37118),Hr=j(55214),Vr=j(72854),Zr=j(2004);const Zn=/^\$(feature|aggregatedFeatures)\./i,Gr={vars:{$feature:"any",$view:"any"},spatialReference:null};function jr(l){return l.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}function zr(l){return null==l?null:(0,D.m)(l)||(0,D.x)(l)?"array":(0,D.k)(l)?"date":(0,D.c)(l)?"text":(0,D.a)(l)?"boolean":(0,D.b)(l)?"number":l instanceof V.Z?"dictionary":(0,D.w)(l)?"feature":l instanceof Nr.Z?"point":l instanceof Ur.Z?"polygon":l instanceof Hr.Z?"polyline":l instanceof Vr.Z?"multipoint":l instanceof Zr.Z?"extent":(0,D.T)(l)?"featureSet":(0,D.U)(l)?"featureSetCollection":null}function Rt(l){if(!l)return null;try{return Jt(l)}catch{}return null}function Wr(l,u){const c="string"==typeof l?Rt(l):l;if(!c)return null;try{return bn(c,u=u||(0,Lr.d9)(Gr))}catch{}return null}function Kr(l,u){return{vars:{$feature:null==l?new w.Z:w.Z.createFromGraphic(l,null),$view:u&&u.view},spatialReference:u&&u.sr}}function Jr(l,u,c){return w.Z.createFromGraphicLikeObject(u,l,c,null)}function $r(l,u){null!=l.vars&&(l.vars.$feature=u)}function Yr(l,u){let c;try{c=$t(l,u)}catch{c=null}return c}function Qr(l,u){let c;try{c=l?l(u):null}catch{c=null}return c}function Xr(l,u){try{return l?l(u):Promise.resolve(null)}catch{return Promise.resolve(null)}}function qr(l,u){if(!l)return[];const c="string"==typeof l?Rt(l):l;if(!c)return[];const m=In(c);let A=new Array;m.forEach(J=>{Zn.test(J)&&(J=J.replace(Zn,""),A.push(J))});const P=A.filter(J=>J.includes("*"));return A=A.filter(J=>!P.includes(J)),u&&P.forEach(J=>{const ae=new RegExp(`^${J.split(/\*+/).map(jr).join(".*")}$`,"i");u.forEach(ue=>ae.test(ue)?A.push(ue):null)}),[...new Set(A.sort())]}function ei(l){return Nt(l,"$view")}function ti(l,u){return!!l&&Nt(l,u)}function ni(l){if(l&&(null!=l.spatialReference||null!=l.scale&&null!=l.viewingMode))return{view:l.viewingMode&&null!=l.scale?new V.Z({viewingMode:l.viewingMode,scale:l.scale}):null,sr:l.spatialReference}}function ri({url:l,spatialReference:u,lrucache:c,interceptor:m}){const A=Ht();return A?A.createFeatureSetCollectionFromService(l,u,c,m):null}function ii({layer:l,spatialReference:u,outFields:c,returnGeometry:m,lrucache:A,interceptor:P}){if(null===l)return null;const J=Ht();return J?J.constructFeatureSet(l,u,c,m??!0,A,P):null}function ai(l){if(null===l?.map)return null;const u=Ht();return u?u.createFeatureSetCollectionFromMap(l.map,l.spatialReference,l.lrucache,l.interceptor):null}function si(l,u){return V.Z.convertJsonToArcade(l,u)}function ui(l,u,c=[]){return Ln(l,u,c)}function oi(){return Qt()}function li(){return rn()}function Gn(l,u){if(!l)return!1;if("string"==typeof l)return u(l);const c=l;if(function ci(l){return"simple"===l.type||"class-breaks"===l.type||"unique-value"===l.type||"dot-density"===l.type||"dictionary"===l.type||"pie-chart"===l.type}(c)){if("dot-density"===c.type){const P=c.attributes?.some(J=>u(J.valueExpression));if(P)return P}const m=c.visualVariables,A=!!m&&m.some(P=>{let J=u(P.valueExpression);return"size"===P.type&&((0,Vn.iY)(P.minSize)&&(J=J||u(P.minSize.valueExpression)),(0,Vn.iY)(P.maxSize)&&(J=J||u(P.maxSize.valueExpression))),J});return!(!("valueExpression"in c)||!u(c.valueExpression))||A}if(function di(l){return"esri.layers.support.LabelClass"===l.declaredClass}(c)){const m=c.labelExpressionInfo&&c.labelExpressionInfo.expression;return!(!m||!u(m))||!1}return!!function fi(l){return"esri.PopupTemplate"===l.declaredClass}(c)&&(!!c.expressionInfos&&c.expressionInfos.some(m=>u(m.expression))||Array.isArray(c.content)&&c.content.some(m=>"expression"===m.type&&u(m.expressionInfo?.expression)))}function hi(l){const u=Rt(l);return!!u&&Un(u)}function mi(l){return Gn(l,hi)}function pi(l){const u=Rt(l);return!!u&&Ut(u)}function Di(l){return Gn(l,pi)}}}]);
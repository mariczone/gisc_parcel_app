"use strict";(self.webpackChunkparcel_app=self.webpackChunkparcel_app||[]).push([[7948],{83137:(j,g,e)=>{e.d(g,{dp:()=>m,yZ:()=>D});var O=e(16730);function D(d,f){const M=f||d.extent,a=d.width,R=(0,O.c9)(M&&M.spatialReference);return M&&a?M.width/a*R*O.hd*96:0}function m(d,f){return d/((0,O.c9)(f)*O.hd*96)}},48887:(j,g,e)=>{e.r(g),e.d(g,{default:()=>te});var O=e(15861),o=e(17626),D=e(84792),m=e(97478),y=e(26584),C=e(80542),I=e(47877),d=e(62208),f=e(99959),M=e(10699),a=e(77712),R=e(90912),S=(e(85931),e(68653)),B=e(76898),K=e(99433),T=e(31283),W=e(2004),b=e(83137),F=e(44917),N=e(50085),Z=e(19027),J=e(65088),V=e(552),$=e(50107),G=e(49286),z=e(6647),H=e(30346),Q=e(99555),Y=e(66120),X=e(97941),w=e(13812),k=e(14772),q=e(12585),ee=e(39058),A=e(13410),re=e(5676),x=e(41039);let i=class extends((0,V.h)((0,X.n)((0,Q.M)((0,Y.x)((0,Z.O)((0,J.Y)((0,G.q)((0,z.I)((0,f.R)((0,H.Q)((0,N.V)((0,$.N)((0,C.p)(F.Z)))))))))))))){constructor(...r){super(...r),this.dateFieldsTimeReference=null,this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.preferredTimeReference=null,this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(r,s){return"string"==typeof r?{url:r,...s}:r}load(r){const s=(0,d.pC)(r)?r.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},r).catch(M.r9).then(()=>this._fetchService(s))),Promise.resolve(this)}readImageFormat(r,s){const c=s.supportedImageFormatTypes;return c&&c.includes("PNG32")?"png32":"png24"}writeSublayers(r,s,c,l){if(!this.loaded||!r)return;const E=r.slice().reverse().flatten(({sublayers:p})=>p&&p.toArray().reverse()).toArray();let _=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap?.supportsDynamicLayers){const p=(0,T.M9)(l.origin);if(p===T.s3.PORTAL_ITEM){const v=this.createSublayersForOrigin("service").sublayers;_=(0,A.QV)(E,v,T.s3.SERVICE)}else if(p>T.s3.PORTAL_ITEM){const v=this.createSublayersForOrigin("portal-item");_=(0,A.QV)(E,v.sublayers,(0,T.M9)(v.origin))}}const u=[],P={writeSublayerStructure:_,...l};let h=_;E.forEach(p=>{const v=p.write({},P);u.push(v),h=h||"user"===p.originOf("visible")}),u.some(p=>Object.keys(p).length>1)&&(s.layers=u),h&&(s.visibleLayers=E.filter(p=>p.visible).map(p=>p.id))}createExportImageParameters(r,s,c,l){const E=l&&l.pixelRatio||1;r&&this.version>=10&&(r=r.clone().shiftCentralMeridian());const _=new k.R({layer:this,floors:l?.floors,scale:(0,b.yZ)({extent:r,width:s})*E}),u=_.toJSON();_.destroy();const P=!l||!l.rotation||this.version<10.3?{}:{rotation:-l.rotation},h=r&&r.spatialReference,p=h.wkid||JSON.stringify(h.toJSON());u.dpi*=E;const v={};if(l?.timeExtent){const{start:L,end:U}=l.timeExtent.toJSON();v.time=L&&U&&L===U?""+L:`${L??"null"},${U??"null"}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(v.time="null,null");return{bbox:r&&r.xmin+","+r.ymin+","+r.xmax+","+r.ymax,bboxSR:p,imageSR:p,size:s+","+c,...u,...P,...v}}fetchImage(r,s,c,l){var E=this;return(0,O.Z)(function*(){const{data:_}=yield E._fetchImage("image",r,s,c,l);return _})()}fetchImageBitmap(r,s,c,l){var E=this;return(0,O.Z)(function*(){const{data:_,url:u}=yield E._fetchImage("blob",r,s,c,l);return(0,q.g)(_,u)})()}fetchRecomputedExtents(r={}){var s=this;return(0,O.Z)(function*(){const c={...r,query:{returnUpdates:!0,f:"json",...s.customParameters,token:s.apiKey}},{data:l}=yield(0,D.default)(s.url,c),{extent:E,fullExtent:_,timeExtent:u}=l,P=E||_;return{fullExtent:P&&W.Z.fromJSON(P),timeExtent:u&&m.Z.fromJSON({start:u[0],end:u[1]})}})()}loadAll(){return(0,I.G)(this,r=>{r(this.allSublayers)})}serviceSupportsSpatialReference(r){return(0,re.D)(this,r)}_fetchImage(r,s,c,l,E){var _=this;return(0,O.Z)(function*(){const u={responseType:r,signal:E?.signal??null,query:{..._.parsedUrl.query,..._.createExportImageParameters(s,c,l,E),f:"image",..._.refreshParameters,..._.customParameters,token:_.apiKey}},P=_.parsedUrl.path+"/export";if(null!=u.query?.dynamicLayers&&!_.capabilities?.exportMap?.supportsDynamicLayers)throw new y.Z("mapimagelayer:dynamiclayer-not-supported",`service ${_.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:u.query});try{const{data:h}=yield(0,D.default)(P,u);return{data:h,url:P}}catch(h){throw(0,M.D_)(h)?h:new y.Z("mapimagelayer:image-fetch-error",`Unable to load image: ${P}`,{error:h})}})()}_fetchService(r){var s=this;return(0,O.Z)(function*(){if(s.sourceJSON)return void s.read(s.sourceJSON,{origin:"service",url:s.parsedUrl});const{data:c,ssl:l}=yield(0,D.default)(s.parsedUrl.path,{query:{f:"json",...s.parsedUrl.query,...s.customParameters,token:s.apiKey},signal:r});l&&(s.url=s.url.replace(/^http:/i,"https:")),s.sourceJSON=c,s.read(c,{origin:"service",url:s.parsedUrl})})()}};(0,o._)([(0,a.Cb)({type:x.Z})],i.prototype,"dateFieldsTimeReference",void 0),(0,o._)([(0,a.Cb)({type:Boolean})],i.prototype,"datesInUnknownTimezone",void 0),(0,o._)([(0,a.Cb)()],i.prototype,"dpi",void 0),(0,o._)([(0,a.Cb)()],i.prototype,"gdbVersion",void 0),(0,o._)([(0,a.Cb)()],i.prototype,"imageFormat",void 0),(0,o._)([(0,S.r)("imageFormat",["supportedImageFormatTypes"])],i.prototype,"readImageFormat",null),(0,o._)([(0,a.Cb)({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],i.prototype,"imageMaxHeight",void 0),(0,o._)([(0,a.Cb)({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],i.prototype,"imageMaxWidth",void 0),(0,o._)([(0,a.Cb)()],i.prototype,"imageTransparency",void 0),(0,o._)([(0,a.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],i.prototype,"isReference",void 0),(0,o._)([(0,a.Cb)({json:{read:!1,write:!1}})],i.prototype,"labelsVisible",void 0),(0,o._)([(0,a.Cb)({type:["ArcGISMapServiceLayer"]})],i.prototype,"operationalLayerType",void 0),(0,o._)([(0,a.Cb)({json:{read:!1,write:!1}})],i.prototype,"popupEnabled",void 0),(0,o._)([(0,a.Cb)({type:x.Z})],i.prototype,"preferredTimeReference",void 0),(0,o._)([(0,a.Cb)()],i.prototype,"sourceJSON",void 0),(0,o._)([(0,a.Cb)({json:{write:{ignoreOrigin:!0}}})],i.prototype,"sublayers",void 0),(0,o._)([(0,K.c)("sublayers",{layers:{type:[ee.Z]},visibleLayers:{type:[R.z8]}})],i.prototype,"writeSublayers",null),(0,o._)([(0,a.Cb)({type:["show","hide","hide-children"]})],i.prototype,"listMode",void 0),(0,o._)([(0,a.Cb)({json:{read:!1},readOnly:!0,value:"map-image"})],i.prototype,"type",void 0),(0,o._)([(0,a.Cb)(w.HQ)],i.prototype,"url",void 0),i=(0,o._)([(0,B.j)("esri.layers.MapImageLayer")],i);const te=i},59990:(j,g,e)=>{function O(m){const y=m.layer;return"floorInfo"in y&&y.floorInfo?.floorField&&"floors"in m.view?D(m.view.floors,y.floorInfo.floorField):null}function o(m,y){return"floorInfo"in y&&y.floorInfo?.floorField?D(m,y.floorInfo.floorField):null}function D(m,y){if(!m?.length)return null;const C=m.filter(I=>""!==I).map(I=>`'${I}'`);return C.push("''"),`${y} IN (${C.join(",")}) OR ${y} IS NULL`}e.d(g,{c:()=>O,f:()=>o})}}]);
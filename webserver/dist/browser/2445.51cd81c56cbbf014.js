"use strict";(self.webpackChunkparcel_app=self.webpackChunkparcel_app||[]).push([[2445],{22445:(U,y,r)=>{r.r(y),r.d(y,{createLabelFunction:()=>T,formatField:()=>v});var D=r(15861),f=r(26584),P=r(63290),O=r(62208),h=r(88411),M=r(15348),C=r(36630),g=r(86793),W=r(46679);const p=P.Z.getLogger("esri.layers.support.labelFormatUtils"),E={type:"simple",evaluate:()=>null},L={getAttribute:(t,n)=>t.field(n)};function T(t,n,e){return m.apply(this,arguments)}function m(){return(m=(0,D.Z)(function*(t,n,e){if(!t||!t.symbol||!n)return E;const s=t.where,o=(0,g.hV)(t),_=s?yield Promise.resolve().then(r.bind(r,10410)):null;let i;if("arcade"===o.type){const a=yield(0,W.WW)(o.expression,e,n);if((0,O.Wi)(a))return E;i={type:"arcade",evaluate(u){try{const l=a.evaluate({$feature:"attributes"in u?a.repurposeFeature(u):u});if(null!=l)return l.toString()}catch{p.error(new f.Z("arcade-expression-error","Encountered an error when evaluating label expression for feature",{feature:u,expression:o}))}return null},needsHydrationToEvaluate:()=>null==(0,g.el)(o.expression)}}else i={type:"simple",evaluate:a=>o.expression.replace(/{[^}]*}/g,u=>{const l=u.slice(1,-1),c=n.get(l);if(!c)return u;let d=null;return"attributes"in a?a&&a.attributes&&(d=a.attributes[c.name]):d=a.field(c.name),null==d?"":v(d,c)})};if(s){let a;try{a=_.WhereClause.create(s,n)}catch(l){return p.error(new f.Z("bad-where-clause","Encountered an error when evaluating where clause, ignoring",{where:s,error:l})),E}const u=i.evaluate;i.evaluate=l=>{const c="attributes"in l?void 0:L;try{if(a.testFeature(l,c))return u(l)}catch(d){p.error(new f.Z("bad-where-clause","Encountered an error when evaluating where clause for feature",{where:s,feature:l,error:d}))}return null}}return i})).apply(this,arguments)}function v(t,n){if(null==t)return"";const e=n.domain;if(e)if("codedValue"===e.type||"coded-value"===e.type){const o=t;for(const _ of e.codedValues)if(_.code===o)return _.name}else if("range"===e.type){const o=+t;if(("range"in e?e.range[0]:e.minValue)<=o&&o<=("range"in e?e.range[1]:e.maxValue))return e.name}let s=t;return"date"===n.type||"esriFieldTypeDate"===n.type?s=(0,h.p6)(s,(0,h.Ze)("short-date")):(0,C.H7)(n)&&(s=(0,M.uf)(+s)),s||""}}}]);
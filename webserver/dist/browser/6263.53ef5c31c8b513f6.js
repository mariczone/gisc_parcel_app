"use strict";(self.webpackChunkparcel_app=self.webpackChunkparcel_app||[]).push([[6263],{65389:(V,U,r)=>{r.d(U,{Z:()=>O});var x=r(62208);class O{constructor(c){this.size=0,this._start=0,this.maxSize=c,this._buffer=new Array(c)}get entries(){return this._buffer}enqueue(c){if(this.size===this.maxSize){const S=this._buffer[this._start];return this._buffer[this._start]=c,this._start=(this._start+1)%this.maxSize,S}return this._buffer[(this._start+this.size++)%this.maxSize]=c,null}dequeue(){if(0===this.size)return null;const c=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,c}peek(){return 0===this.size?null:this._buffer[this._start]}find(c){if(0===this.size)return null;for(const S of this._buffer)if((0,x.pC)(S)&&c(S))return S;return null}clear(c){let S=this.dequeue();for(;(0,x.pC)(S);)c&&c(S),S=this.dequeue()}}},53023:(V,U,r)=>{r.d(U,{hN:()=>B,P0:()=>z,cW:()=>Z});var x=r(15861),O=r(26584),A=r(33190),c=r(11519),E=r(91179),C=r(37053);function d(t,i){return t?i?4:3:i?3:2}function l(t,i,h,y,R){if(!t)return!1;const v=d(i,h),{coords:g,lengths:w}=t;let G=!1,P=0;for(const j of w)G=n(G,g,v,P,j,y,R),P+=j*v;return G}function n(t,i,h,y,R,v,g){let w=t,G=y;for(let P=y,j=y+R*h;P<j;P+=h){G=P+h,G===j&&(G=y);const D=i[P],M=i[P+1],Y=i[G+1];(M<g&&Y>=g||Y<g&&M>=g)&&D+(g-M)/(Y-M)*(i[G]-D)<v&&(w=!w)}return w}var o=r(82054),a=r(88071),b=r(82959),I=r(6185);const T="feature-store:unsupported-query",W={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},F_spatialRelationship={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},F_queryGeometry={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},F_layerGeometry={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};function e(t){return null!=t&&!0===F_spatialRelationship[t]}function s(t){return null!=t&&!0===F_queryGeometry[(0,E.Ji)(t)]}function u(t){return null!=t&&!0===F_layerGeometry[t]}function Z(t,i,h,y,R){if((0,E.oU)(i)&&"esriGeometryPoint"===h&&("esriSpatialRelIntersects"===t||"esriSpatialRelContains"===t)){const v=(0,o.Uy)(new a.Z,i,!1,!1);return Promise.resolve(g=>function p(t,i,h,y){return l(t,i,h,y.coords[0],y.coords[1])}(v,!1,!1,g))}if((0,E.oU)(i)&&"esriGeometryMultipoint"===h){const v=(0,o.Uy)(new a.Z,i,!1,!1);if("esriSpatialRelContains"===t)return Promise.resolve(g=>function f(t,i,h,y,R,v){const g=d(R,v),{coords:w,lengths:G}=y;if(!G)return!1;for(let P=0,j=0;P<G.length;P++,j+=g)if(!l(t,i,h,w[j],w[j+1]))return!1;return!0}(v,!1,!1,g,y,R))}if((0,E.YX)(i)&&"esriGeometryPoint"===h&&("esriSpatialRelIntersects"===t||"esriSpatialRelContains"===t))return Promise.resolve(v=>(0,A.aV)(i,(0,I.Op)(h,y,R,v)));if((0,E.YX)(i)&&"esriGeometryMultipoint"===h&&"esriSpatialRelContains"===t)return Promise.resolve(v=>(0,A.lQ)(i,(0,I.Op)(h,y,R,v)));if((0,E.YX)(i)&&"esriSpatialRelIntersects"===t){const v=function S(t){return"mesh"===t?c.h_:(0,c.IY)(t)}(h);return Promise.resolve(g=>v(i,(0,I.Op)(h,y,R,g)))}return function m(){return Promise.all([r.e(4918),r.e(8592),r.e(2825)]).then(r.bind(r,32825))}().then(v=>{const g=v[W[t]].bind(null,i.spatialReference,i);return w=>g((0,I.Op)(h,y,R,w))})}function z(t,i,h){return N.apply(this,arguments)}function N(){return(N=(0,x.Z)(function*(t,i,h){const{spatialRel:y,geometry:R}=t;if(R){if(!e(y))throw new O.Z(T,"Unsupported query spatial relationship",{query:t});if((0,C.JY)(R.spatialReference)&&(0,C.JY)(h)){if(!s(R))throw new O.Z(T,"Unsupported query geometry type",{query:t});if(!u(i))throw new O.Z(T,"Unsupported layer geometry type",{query:t});if(t.outSR)return(0,b._W)(t.geometry&&t.geometry.spatialReference,t.outSR)}}})).apply(this,arguments)}function B(t){if((0,E.YX)(t))return!0;if((0,E.oU)(t)){for(const i of t.rings)if(5!==i.length||i[0][0]!==i[1][0]||i[0][0]!==i[4][0]||i[2][0]!==i[3][0]||i[0][1]!==i[3][1]||i[0][1]!==i[4][1]||i[1][1]!==i[2][1])return!1;return!0}return!1}},76530:(V,U,r)=>{r.d(U,{R:()=>O,y:()=>c});var x=r(15861);function O(d,p){return A.apply(this,arguments)}function A(){return(A=(0,x.Z)(function*(d,p){if(!d)return null;const f=p.featureAdapter,{startTimeField:l,endTimeField:n}=d;let o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;if(l&&n)yield p.forEach(b=>{const I=f.getAttribute(b,l),T=f.getAttribute(b,n);null==I||isNaN(I)||(o=Math.min(o,I)),null==T||isNaN(T)||(a=Math.max(a,T))});else{const b=l||n;yield p.forEach(I=>{const T=f.getAttribute(I,b);null==T||isNaN(T)||(o=Math.min(o,T),a=Math.max(a,T))})}return{start:o,end:a}})).apply(this,arguments)}function c(d,p,f){if(!p||!d)return null;const{startTimeField:l,endTimeField:n}=d;if(!l&&!n)return null;const{start:o,end:a}=p;return null===o&&null===a?null:void 0===o&&void 0===a?()=>!1:l&&n?function S(d,p,f,l,n){return null!=l&&null!=n?o=>{const a=d.getAttribute(o,p),b=d.getAttribute(o,f);return(null==a||a<=n)&&(null==b||b>=l)}:null!=l?o=>{const a=d.getAttribute(o,f);return null==a||a>=l}:null!=n?o=>{const a=d.getAttribute(o,p);return null==a||a<=n}:void 0}(f,l,n,o,a):function E(d,p,f,l){return null!=f&&null!=l&&f===l?n=>d.getAttribute(n,p)===f:null!=f&&null!=l?n=>{const o=d.getAttribute(n,p);return o>=f&&o<=l}:null!=f?n=>d.getAttribute(n,p)>=f:null!=l?n=>d.getAttribute(n,p)<=l:void 0}(f,l||n,o,a)}},8967:(V,U,r)=>{r.r(U),r.d(U,{default:()=>W});var x=r(15861),O=r(26584),A=r(63290),c=r(62208),S=r(65401),E=r(32442),C=r(53023),d=r(76530),p=r(6185),f=r(96854),l=r(55746);const n=A.Z.getLogger("esri.views.2d.layers.features.support.whereUtils"),o={getAttribute:(F,e)=>F.field(e)};function b(){return(b=(0,x.Z)(function*(F,e){const s=yield Promise.resolve().then(r.bind(r,10410));try{const u=s.WhereClause.create(F,e);if(!u.isStandardized){const m=new O.Z("mapview - bad input","Unable to apply filter's definition expression, as expression is not standardized.",u);n.error(m)}return m=>{const Z=m.readArcadeFeature();return u.testFeature(Z,o)}}catch{return n.warn("mapview-bad-where-clause","Encountered an error when evaluating where clause",F),m=>!0}})).apply(this,arguments)}class W{constructor(e){this._geometryBounds=(0,S.Ue)(),this._idToVisibility=new Map,this._serviceInfo=e}get hash(){return this._hash}check(e){return this._applyFilter(e)}clear(){const e=this._resetAllHiddenIds();return this.update(),{show:e,hide:[]}}invalidate(){this._idToVisibility.forEach((e,s)=>{this._idToVisibility.set(s,0)})}setKnownIds(e){for(const s of e)this._idToVisibility.set(s,1)}setTrue(e){const s=[],u=[],m=new Set(e);return this._idToVisibility.forEach((Z,z)=>{const N=!!(1&this._idToVisibility.get(z)),B=m.has(z);!N&&B?s.push(z):N&&!B&&u.push(z),this._idToVisibility.set(z,B?3:0)}),{show:s,hide:u}}createQuery(){const{geometry:e,spatialRel:s,where:u,timeExtent:m,objectIds:Z}=this;return f.Z.fromJSON({geometry:e,spatialRel:s,where:u,timeExtent:m,objectIds:Z})}update(e,s){var u=this;return(0,x.Z)(function*(){u._hash=JSON.stringify(e);const m=yield(0,p.j6)(e,null,s);yield Promise.all([u._setGeometryFilter(m),u._setIdFilter(m),u._setAttributeFilter(m),u._setTimeFilter(m)])})()}_setAttributeFilter(e){var s=this;return(0,x.Z)(function*(){if(!e||!e.where)return s._clause=null,void(s.where=null);s._clause=yield function a(F,e){return b.apply(this,arguments)}(e.where,s._serviceInfo.fieldsIndex),s.where=e.where})()}_setIdFilter(e){this._idsToShow=e&&e.objectIds&&new Set(e.objectIds),this._idsToHide=e&&e.hiddenIds&&new Set(e.hiddenIds),this.objectIds=e&&e.objectIds}_setGeometryFilter(e){var s=this;return(0,x.Z)(function*(){if(!e||!e.geometry)return s._spatialQueryOperator=null,s.geometry=null,void(s.spatialRel=null);const u=e.geometry,m=e.spatialRel||"esriSpatialRelIntersects",Z=yield(0,C.cW)(m,u,s._serviceInfo.geometryType,s._serviceInfo.hasZ,s._serviceInfo.hasM);(0,E.$P)(s._geometryBounds,u),s._spatialQueryOperator=Z,s.geometry=u,s.spatialRel=m})()}_setTimeFilter(e){if(this.timeExtent=this._timeOperator=null,e&&e.timeExtent)if(this._serviceInfo.timeInfo)this.timeExtent=e.timeExtent,this._timeOperator=(0,d.y)(this._serviceInfo.timeInfo,e.timeExtent,l.k);else{const s=new O.Z("feature-layer-view:time-filter-not-available","Unable to apply time filter, as layer doesn't have time metadata.",e.timeExtent);A.Z.getLogger("esri.views.2d.layers.features.controllers.FeatureFilter").error(s)}}_applyFilter(e){return this._filterByGeometry(e)&&this._filterById(e)&&this._filterByTime(e)&&this._filterByExpression(e)}_filterByExpression(e){return!this.where||this._clause(e)}_filterById(e){return(!this._idsToHide||!this._idsToHide.size||!this._idsToHide.has(e.getObjectId()))&&(!this._idsToShow||!this._idsToShow.size||this._idsToShow.has(e.getObjectId()))}_filterByGeometry(e){if(!this.geometry)return!0;const s=e.readHydratedGeometry();return!!s&&this._spatialQueryOperator(s)}_filterByTime(e){return!!(0,c.Wi)(this._timeOperator)||this._timeOperator(e)}_resetAllHiddenIds(){const e=[];return this._idToVisibility.forEach((s,u)=>{1&s||(this._idToVisibility.set(u,1),e.push(u))}),e}}}}]);
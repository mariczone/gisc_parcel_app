"use strict";(self.webpackChunkparcel_app=self.webpackChunkparcel_app||[]).push([[9603,7126],{550:(B,O,t)=>{function h(){return[1,0,0,0,1,0,0,0,1]}function f(n,c,A,v,g,L,w,S,I){return[n,c,A,v,g,L,w,S,I]}function P(n,c){return new Float64Array(n,c,9)}t.d(O,{a:()=>P,c:()=>h,f:()=>f}),Object.freeze(Object.defineProperty({__proto__:null,clone:function o(n){return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8]]},create:h,createView:P,fromValues:f},Symbol.toStringTag,{value:"Module"}))},43703:(B,O,t)=>{function h(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function o(c){return[c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15]]}function f(c,A,v,g,L,w,S,I,W,H,_,l,m,b,Y,F){return[c,A,v,g,L,w,S,I,W,H,_,l,m,b,Y,F]}function P(c,A){return new Float64Array(c,A,16)}t.d(O,{I:()=>y,a:()=>P,b:()=>o,c:()=>h,f:()=>f});const y=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:y,clone:o,create:h,createView:P,fromValues:f},Symbol.toStringTag,{value:"Module"}))},78451:(B,O,t)=>{function h(){return[0,0,0,1]}function o(c){return[c[0],c[1],c[2],c[3]]}function P(c,A){return new Float64Array(c,A,4)}t.d(O,{I:()=>y,a:()=>h,b:()=>o,c:()=>P});const y=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:y,clone:o,create:h,createView:P,fromValues:function f(c,A,v,g){return[c,A,v,g]}},Symbol.toStringTag,{value:"Module"}))},97126:(B,O,t)=>{t.d(O,{a:()=>b,c:()=>I,f:()=>F,g:()=>Y,h:()=>W,j:()=>U,l:()=>l,m:()=>N,w:()=>_}),t(8314);var o=t(63290),f=t(21286),P=t(62208),y=t(28347),n=t(84161),c=t(28093),A=t(993),v=t(4794),g=t(78172),L=t(70562),w=t(34054),S=t(26242);function I(){return(0,v.c)()}function W(e,d=I()){return(0,A.c)(d,e)}function _(e){return e}function l(e){e[0]=e[1]=e[2]=e[3]=0}function b(e){return e[3]}function Y(e){return e}function F(e,d,a,E){return(0,v.f)(e,d,a,E)}function J(e,d,a){if((0,P.Wi)(d))return!1;const{origin:E,direction:M}=d,C=T;C[0]=E[0]-e[0],C[1]=E[1]-e[1],C[2]=E[2]-e[2];const R=M[0]*M[0]+M[1]*M[1]+M[2]*M[2];if(0===R)return!1;const V=2*(M[0]*C[0]+M[1]*C[1]+M[2]*C[2]),G=V*V-4*R*(C[0]*C[0]+C[1]*C[1]+C[2]*C[2]-e[3]*e[3]);if(G<0)return!1;const tt=Math.sqrt(G);let z=(-V-tt)/(2*R);const q=(-V+tt)/(2*R);return(z<0||q<z&&q>0)&&(z=q),!(z<0||(a&&(a[0]=E[0]+M[0]*z,a[1]=E[1]+M[1]*z,a[2]=E[2]+M[2]*z),0))}const T=(0,c.c)();function U(e,d){return J(e,d,null)}function r(e,d,a){const E=S.WM.get(),M=S.MP.get();(0,n.f)(E,d.origin,d.direction);const C=b(e);(0,n.f)(a,E,d.origin),(0,n.g)(a,a,1/(0,n.l)(a)*C);const R=j(e,d.origin),V=(0,w.EU)(d.origin,a);return(0,y.d)(M,V+R,E),(0,n.m)(a,a,M),a}function p(e,d,a){const E=(0,n.b)(S.WM.get(),d,e),M=(0,n.g)(S.WM.get(),E,e[3]/(0,n.l)(E));return(0,n.a)(a,M,e)}function j(e,d){const a=(0,n.b)(S.WM.get(),d,e),E=(0,n.l)(a),M=b(e),C=M+Math.abs(M-E);return(0,f.ZF)(M/C)}const x=(0,c.c)();function k(e,d,a,E){const M=(0,n.b)(x,d,e);switch(a){case g.R.X:{const C=(0,f.jE)(M,x)[2];return(0,n.s)(E,-Math.sin(C),Math.cos(C),0)}case g.R.Y:{const C=(0,f.jE)(M,x),R=C[1],V=C[2],G=Math.sin(R);return(0,n.s)(E,-G*Math.cos(V),-G*Math.sin(V),Math.cos(R))}case g.R.Z:return(0,n.n)(E,M);default:return}}function Z(e,d){const a=(0,n.b)($,d,e);return(0,n.l)(a)-e[3]}function N(e,d){const a=(0,n.d)(e,d),E=b(e);return a<=E*E}const $=(0,c.c)(),et=I();Object.freeze(Object.defineProperty({__proto__:null,altitudeAt:Z,angleToSilhouette:j,axisAt:k,clear:l,closestPoint:function u(e,d,a){return J(e,d,a)?a:((0,L.JI)(d,e,a),p(e,a,a))},closestPointOnSilhouette:r,containsPoint:N,copy:W,create:I,distanceToSilhouette:function D(e,d){const a=(0,n.b)(S.WM.get(),d,e),E=(0,n.p)(a);return Math.sqrt(Math.abs(E-e[3]*e[3]))},elevate:function K(e,d,a){return e!==a&&(0,n.c)(a,e),a[3]=e[3]+d,a},fromCenterAndRadius:function H(e,d){return(0,v.f)(e[0],e[1],e[2],d)},fromRadius:function m(e,d){return e[0]=e[1]=e[2]=0,e[3]=d,e},fromValues:F,getCenter:Y,getRadius:b,intersectRay:J,intersectRayClosestSilhouette:function s(e,d,a){if(J(e,d,a))return a;const E=r(e,d,S.WM.get());return(0,n.a)(a,d.origin,(0,n.g)(S.WM.get(),d.direction,(0,n.i)(d.origin,E)/(0,n.l)(d.direction))),a},intersectsRay:U,projectPoint:p,setAltitudeAt:function X(e,d,a,E){const M=Z(e,d),C=k(e,d,g.R.Z,$),R=(0,n.g)($,C,a-M);return(0,n.a)(E,d,R)},setExtent:function Q(e,d,a){return o.Z.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported"),e===a?a:W(e,a)},tmpSphere:et,wrap:_},Symbol.toStringTag,{value:"Module"}))},97535:(B,O,t)=>{t.d(O,{x:()=>o});var h=t(79682);class o{constructor(y){this._allocator=y,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,h.Y)(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const y=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*f);this._items.length=Math.min(y,this._items.length),this._itemsPtr=0}_grow(){for(let y=0;y<Math.max(8,Math.min(this._items.length,f));y++)this._items.push(this._allocator())}}const f=1024},78172:(B,O,t)=>{var h,o;t.d(O,{R:()=>h}),(o=h||(h={}))[o.X=0]="X",o[o.Y=1]="Y",o[o.Z=2]="Z"},70562:(B,O,t)=>{t.d(O,{JG:()=>g,JI:()=>W,Jk:()=>S,Ue:()=>n,re:()=>v,zk:()=>L}),t(85931);var o=t(97535),f=t(84161),P=t(28093),y=t(26242);function n(_){return _?c((0,P.a)(_.origin),(0,P.a)(_.direction)):c((0,P.c)(),(0,P.c)())}function c(_,l){return{origin:_,direction:l}}function v(_,l){const m=H.get();return m.origin=_,m.direction=l,m}function g(_,l=n()){return function w(_,l,m=n()){return(0,f.c)(m.origin,_),(0,f.c)(m.direction,l),m}(_.origin,_.direction,l)}function L(_,l,m=n()){return(0,f.c)(m.origin,_),(0,f.b)(m.direction,l,_),m}function S(_,l){const m=(0,f.f)(y.WM.get(),(0,f.n)(y.WM.get(),_.direction),(0,f.b)(y.WM.get(),l,_.origin));return(0,f.e)(m,m)}function W(_,l,m){const b=(0,f.e)(_.direction,(0,f.b)(m,l,_.origin));return(0,f.a)(m,_.origin,(0,f.g)(m,_.direction,b)),m}const H=new o.x(()=>n())},34054:(B,O,t)=>{t.d(O,{EU:()=>n,SR:()=>y,cp:()=>c,nF:()=>P});var h=t(21286),o=t(84161),f=t(28093);function P(g,L,w){const S=(0,o.e)(g,L)/(0,o.e)(g,g);return(0,o.g)(w,g,S)}function y(g,L){return(0,o.e)(g,L)/(0,o.l)(g)}function n(g,L){const w=(0,o.e)(g,L)/((0,o.l)(g)*(0,o.l)(L));return-(0,h.ZF)(w)}function c(g,L,w){(0,o.n)(A,g),(0,o.n)(v,L);const S=(0,o.e)(A,v),I=(0,h.ZF)(S),W=(0,o.f)(A,A,v);return(0,o.e)(W,w)<0?2*Math.PI-I:I}const A=(0,f.c)(),v=(0,f.c)()},26242:(B,O,t)=>{t.d(O,{MP:()=>W,vD:()=>H,qW:()=>L,WM:()=>w,o6:()=>S});var h=t(27306),o=t(79682),f=t(550),P=t(43703),y=t(78451),n=t(99770),c=t(28093),A=t(4794);class v{constructor(l,m,b){this._itemByteSize=l,this._itemCreate=m,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(b/this._itemByteSize)}get(){0===this._itemsPtr&&(0,o.Y)(()=>this._reset());const l=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=l;){const m=new ArrayBuffer(this._itemsPerBuffer*this._itemByteSize);for(let b=0;b<this._itemsPerBuffer;++b)this._items.push(this._itemCreate(m,b*this._itemByteSize));this._buffers.push(m)}return this._items[this._itemsPtr++]}_reset(){const l=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>l;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(l=g){return new v(16,n.c,l)}static createVec3f64(l=g){return new v(24,c.b,l)}static createVec4f64(l=g){return new v(32,A.a,l)}static createMat3f64(l=g){return new v(72,f.a,l)}static createMat4f64(l=g){return new v(128,P.a,l)}static createQuatf64(l=g){return new v(32,y.c,l)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this._itemByteSize}}}const g=4*h.Y8.KILOBYTES,L=v.createVec2f64(),w=v.createVec3f64(),S=v.createVec4f64(),W=(v.createMat3f64(),v.createMat4f64()),H=v.createQuatf64()},17493:(B,O,t)=>{t.r(O),t.d(O,{SceneLayerSnappingSource:()=>U});var h=t(15861),o=t(17626),f=t(14517),P=t(62208),y=t(10699),n=t(77712),v=(t(90912),t(85931),t(76898)),g=t(80542),L=t(54024),w=t(55713),S=t(42930),I=t(2975),W=t(91573);class H extends S.q{constructor(r){super("EdgeProcessingWorker","extract",{extract:u=>[u.dataBuffer],extractComponentsEdgeLocations:u=>[u.dataBuffer],extractEdgeLocations:u=>[u.dataBuffer]},r)}process(r,u,p){var D=this;return(0,h.Z)(function*(){if(p)return(0,W.Kl)(r);const j=yield D.invoke(new _(r),u);return D._unpackOutput(j)})()}extractEdgeLocations(r,u){var p=this;return(0,h.Z)(function*(){const D=yield p.invokeMethod("extractEdgeLocations",new _(r),u);return(0,I.aj)(D)})()}extractComponentsEdgeLocations(r,u){var p=this;return(0,h.Z)(function*(){const D=yield p.invokeMethod("extractComponentsEdgeLocations",new _(r),u);return(0,I.aj)(D)})()}_unpackOutput(r){return{regular:{instancesData:(0,I.aj)(r.regular.instancesData),lodInfo:{lengths:new Float32Array(r.regular.lodInfo.lengths)}},silhouette:{instancesData:(0,I.aj)(r.silhouette.instancesData),lodInfo:{lengths:new Float32Array(r.silhouette.lodInfo.lengths)}},averageEdgeLength:r.averageEdgeLength}}}class _{constructor(r){this.dataBuffer=r.data.buffer,this.writerSettings=r.writerSettings,this.skipDeduplicate=r.skipDeduplicate,this.indices=Array.isArray(r.indices)?r.indices:r.indices.buffer,this.indicesType=Array.isArray(r.indices)?"Array":(0,w.ZY)(r.indices)?"Uint32Array":"Uint16Array",this.indicesLength=r.indicesLength}}var l=t(28093),m=t(97126),b=t(59550),Y=t(75897),F=t(70211);let K=class extends g.r{constructor(s){super(s),this.availability=0,this._ids=new Set}destroy(){this._workerHandle.destroy(),this._workerHandle=null}initialize(){this._workerHandle=new Q(this.schedule,{fetchAllEdgeLocations:(s,r)=>this._fetchAllEdgeLocations(s,r)})}fetchCandidates(s,r){var u=this;return(0,h.Z)(function*(){const p=s.coordinateHelper,{point:D}=s,j=J;u.renderCoordsHelper.toRenderCoords(D,p.spatialReference,j);const x=s.distance,k="number"==typeof x?x:x.distance,Z=yield u._workerHandle.invoke({bounds:(0,m.f)(j[0],j[1],j[2],k),types:s.types},r);return Z.candidates.sort((X,N)=>X.distance-N.distance),Z.candidates.map(X=>u._convertCandidate(p,X))})()}add(s,r){var u=this;return(0,h.Z)(function*(){u._ids.add(s.id),yield u._workerHandle.invokeMethod("add",s,r)})()}remove(s,r){var u=this;return(0,h.Z)(function*(){u._ids.delete(s.id),yield u._workerHandle.invokeMethod("remove",s,r)})()}_convertCandidate(s,r){switch(r.type){case"edge":return new Y.L({objectId:r.objectId,targetPoint:this._convertRenderCoordinate(s,r.target),edgeStart:this._convertRenderCoordinate(s,r.start),edgeEnd:this._convertRenderCoordinate(s,r.end),isDraped:!1});case"vertex":return new F.x({objectId:r.objectId,targetPoint:this._convertRenderCoordinate(s,r.target),isDraped:!1})}}_convertRenderCoordinate({spatialReference:s},r){const u=(0,l.c)();return this.renderCoordsHelper.fromRenderCoords(r,u,s),(0,b.uc)(u)}_fetchAllEdgeLocations(s,r){var u=this;return(0,h.Z)(function*(){const p=[],D=[];for(const{id:j,uid:x}of s.components)u._ids.has(j)&&p.push((0,h.Z)(function*(){const k=yield u.fetchEdgeLocations(j,r.signal),Z=k.locations.buffer;return D.push(Z),{id:j,uid:x,objectIds:k.objectIds,locations:Z,origin:k.origin,type:k.type}})());return{result:{components:(yield Promise.all(p)).filter(({id:j})=>u._ids.has(j))},transferList:D}})()}};(0,o._)([(0,n.Cb)({constructOnly:!0})],K.prototype,"renderCoordsHelper",void 0),(0,o._)([(0,n.Cb)({constructOnly:!0})],K.prototype,"fetchEdgeLocations",void 0),(0,o._)([(0,n.Cb)({constructOnly:!0})],K.prototype,"schedule",void 0),(0,o._)([(0,n.Cb)({readOnly:!0})],K.prototype,"availability",void 0),K=(0,o._)([(0,v.j)("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker")],K);class Q extends S.q{constructor(r,u){super("SceneLayerSnappingSourceWorker","fetchCandidates",{},r,{strategy:"dedicated",client:u})}}const J=(0,l.c)();let T=class extends g.r{get updating(){return this.updatingHandles.updating}constructor(s){super(s),this.availability=1,this._abortController=new AbortController}destroy(){this._tracker=(0,P.hw)(this._tracker),this._abortController=(0,P.IM)(this._abortController)}initialize(){var s=this;const{view:r}=this,u=r.resourceController;var p;this._edgeWorker=new H(p=>u.immediate.schedule(p)),this._workerHandle=new K({renderCoordsHelper:this.view.renderCoordsHelper,schedule:p=>u.immediate.schedule(p),fetchEdgeLocations:(p=(0,h.Z)(function*(D,j){if((0,P.Wi)(s._tracker))throw new Error("tracker-not-initialized");return s._tracker.fetchEdgeLocations(D,s._edgeWorker,j)}),function(j,x){return p.apply(this,arguments)})}),this.updatingHandles.addPromise(this._setupLayerView()),this.handles.add([(0,L.ed)(this._workerHandle),(0,L.ed)(this._edgeWorker)])}fetchCandidates(s,r){var u=this;return(0,h.Z)(function*(){return u._workerHandle.fetchCandidates(s,r)})()}refresh(){}_setupLayerView(){var s=this;return(0,h.Z)(function*(){if(s.destroyed)return;const r=(0,P.yw)(s._abortController,p=>p.signal),u=yield s.getLayerView();(0,P.Wi)(u)||(0,y.Hc)(r)||(s._tracker=u.trackSnappingSources({add:(p,D)=>{s.updatingHandles.addPromise(s._workerHandle.add({id:p,bounds:D},r))},remove:p=>{s.updatingHandles.addPromise(s._workerHandle.remove({id:p},r))}}))})()}};(0,o._)([(0,n.Cb)({constructOnly:!0})],T.prototype,"getLayerView",void 0),(0,o._)([(0,n.Cb)({constructOnly:!0})],T.prototype,"view",void 0),(0,o._)([(0,n.Cb)({readOnly:!0})],T.prototype,"updating",null),(0,o._)([(0,n.Cb)({readOnly:!0})],T.prototype,"availability",void 0),T=(0,o._)([(0,v.j)("esri.views.interactive.snapping.featureSources.I3SSnappingSource")],T);let U=class extends f.Z{get updating(){return this._i3sSources.some(s=>s.updating)}constructor(s){super(s),this.availability=1,this._i3sSources=[]}destroy(){this._i3sSources.forEach(s=>s.destroy()),this._i3sSources.length=0}initialize(){const{view:s}=this,r=this.layerSource.layer;this._i3sSources="building-scene"===r.type?this._getBuildingSceneI3SSources(s,r):[this._getSceneLayerI3SSource(s,r)]}fetchCandidates(s,r){var u=this;return(0,h.Z)(function*(){const p=yield Promise.all(u._i3sSources.map(D=>D.fetchCandidates(s,r)));return(0,y.k_)(r),p.flat()})()}refresh(){this._i3sSources.forEach(s=>s.refresh())}_getBuildingSceneI3SSources(s,r){return r.allSublayers.toArray().map(u=>{return"building-component"===u.type?new T({getLayerView:(p=(0,h.Z)(function*(){return(yield s.whenLayerView(r)).whenSublayerView(u)}),function(){return p.apply(this,arguments)}),view:s}):null;var p}).filter(P.pC)}_getSceneLayerI3SSource(s,r){return new T({getLayerView:(u=(0,h.Z)(function*(){const p=yield s.whenLayerView(r);return"scene-layer-graphics-3d"===p.type?void 0:p}),function(){return u.apply(this,arguments)}),view:s});var u}};(0,o._)([(0,n.Cb)({constructOnly:!0})],U.prototype,"layerSource",void 0),(0,o._)([(0,n.Cb)({constructOnly:!0})],U.prototype,"view",void 0),(0,o._)([(0,n.Cb)({readOnly:!0})],U.prototype,"updating",null),(0,o._)([(0,n.Cb)({readOnly:!0})],U.prototype,"availability",void 0),U=(0,o._)([(0,v.j)("esri.views.interactive.snapping.featureSources.SceneLayerSnappingSource")],U)},19038:(B,O,t)=>{t.d(O,{n:()=>f});var h=t(84161),o=t(5286);class f extends o.r{constructor(y,n,c){super(n,c),this.point=y}equals(y){return y instanceof f&&(0,h.k)(this.point,y.point)}}}}]);